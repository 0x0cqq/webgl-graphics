/*! For license information please see hw3.js.LICENSE.txt */
(()=>{"use strict";var t={887:(t,e,r)=>{r.r(e),r.d(e,{glMatrix:()=>n,mat2:()=>o,mat2d:()=>a,mat3:()=>i,mat4:()=>u,quat:()=>f,quat2:()=>l,vec2:()=>h,vec3:()=>s,vec4:()=>c});var n={};r.r(n),r.d(n,{ARRAY_TYPE:()=>d,EPSILON:()=>m,RANDOM:()=>b,equals:()=>v,setMatrixArrayType:()=>p,toRadian:()=>M});var o={};r.r(o),r.d(o,{LDU:()=>D,add:()=>U,adjoint:()=>T,clone:()=>g,copy:()=>A,create:()=>x,determinant:()=>S,equals:()=>q,exactEquals:()=>L,frob:()=>k,fromRotation:()=>R,fromScaling:()=>O,fromValues:()=>F,identity:()=>w,invert:()=>P,mul:()=>G,multiply:()=>I,multiplyScalar:()=>V,multiplyScalarAndAdd:()=>W,rotate:()=>z,scale:()=>B,set:()=>_,str:()=>C,sub:()=>$,subtract:()=>j,transpose:()=>E});var a={};r.r(a),r.d(a,{add:()=>ct,clone:()=>X,copy:()=>Y,create:()=>N,determinant:()=>J,equals:()=>dt,exactEquals:()=>mt,frob:()=>st,fromRotation:()=>ot,fromScaling:()=>at,fromTranslation:()=>it,fromValues:()=>Q,identity:()=>H,invert:()=>K,mul:()=>bt,multiply:()=>tt,multiplyScalar:()=>lt,multiplyScalarAndAdd:()=>ht,rotate:()=>et,scale:()=>rt,set:()=>Z,str:()=>ut,sub:()=>pt,subtract:()=>ft,translate:()=>nt});var i={};r.r(i),r.d(i,{add:()=>qt,adjoint:()=>Et,clone:()=>vt,copy:()=>xt,create:()=>yt,determinant:()=>Pt,equals:()=>Nt,exactEquals:()=>$t,frob:()=>Lt,fromMat2d:()=>Ct,fromMat4:()=>Mt,fromQuat:()=>kt,fromRotation:()=>Rt,fromScaling:()=>Ot,fromTranslation:()=>Bt,fromValues:()=>gt,identity:()=>wt,invert:()=>_t,mul:()=>Xt,multiply:()=>Tt,multiplyScalar:()=>Wt,multiplyScalarAndAdd:()=>Gt,normalFromMat4:()=>Dt,projection:()=>Ut,rotate:()=>It,scale:()=>zt,set:()=>At,str:()=>jt,sub:()=>Yt,subtract:()=>Vt,translate:()=>St,transpose:()=>Ft});var u={};r.r(u),r.d(u,{add:()=>Ue,adjoint:()=>ne,clone:()=>Qt,copy:()=>Zt,create:()=>Ht,determinant:()=>oe,equals:()=>We,exactEquals:()=>Ve,frob:()=>De,fromQuat:()=>_e,fromQuat2:()=>ve,fromRotation:()=>de,fromRotationTranslation:()=>Me,fromRotationTranslationScale:()=>we,fromRotationTranslationScaleOrigin:()=>Fe,fromScaling:()=>me,fromTranslation:()=>he,fromValues:()=>Kt,fromXRotation:()=>be,fromYRotation:()=>pe,fromZRotation:()=>ye,frustum:()=>Ee,getRotation:()=>Ae,getScaling:()=>ge,getTranslation:()=>xe,identity:()=>te,invert:()=>re,lookAt:()=>Oe,mul:()=>Ge,multiply:()=>ae,multiplyScalar:()=>Le,multiplyScalarAndAdd:()=>qe,ortho:()=>Be,orthoNO:()=>ze,orthoZO:()=>Re,perspective:()=>Te,perspectiveFromFieldOfView:()=>Ie,perspectiveNO:()=>Pe,perspectiveZO:()=>Se,rotate:()=>se,rotateX:()=>ce,rotateY:()=>fe,rotateZ:()=>le,scale:()=>ue,set:()=>Jt,str:()=>ke,sub:()=>$e,subtract:()=>je,targetTo:()=>Ce,translate:()=>ie,transpose:()=>ee});var s={};r.r(s),r.d(s,{add:()=>Ke,angle:()=>Pr,bezier:()=>vr,ceil:()=>rr,clone:()=>Xe,copy:()=>Qe,create:()=>Ne,cross:()=>pr,dist:()=>kr,distance:()=>cr,div:()=>Cr,divide:()=>er,dot:()=>br,equals:()=>zr,exactEquals:()=>Ir,floor:()=>nr,forEach:()=>Lr,fromValues:()=>He,hermite:()=>Mr,inverse:()=>mr,len:()=>Ur,length:()=>Ye,lerp:()=>yr,max:()=>ar,min:()=>or,mul:()=>Or,multiply:()=>tr,negate:()=>hr,normalize:()=>dr,random:()=>xr,rotateX:()=>Fr,rotateY:()=>_r,rotateZ:()=>Er,round:()=>ir,scale:()=>ur,scaleAndAdd:()=>sr,set:()=>Ze,sqrDist:()=>Dr,sqrLen:()=>jr,squaredDistance:()=>fr,squaredLength:()=>lr,str:()=>Sr,sub:()=>Rr,subtract:()=>Je,transformMat3:()=>Ar,transformMat4:()=>gr,transformQuat:()=>wr,zero:()=>Tr});var c={};r.r(c),r.d(c,{add:()=>Nr,ceil:()=>Qr,clone:()=>Vr,copy:()=>Gr,create:()=>qr,cross:()=>hn,dist:()=>Fn,distance:()=>nn,div:()=>wn,divide:()=>Hr,dot:()=>ln,equals:()=>xn,exactEquals:()=>vn,floor:()=>Zr,forEach:()=>Tn,fromValues:()=>Wr,inverse:()=>cn,len:()=>En,length:()=>an,lerp:()=>mn,max:()=>Jr,min:()=>Kr,mul:()=>An,multiply:()=>Yr,negate:()=>sn,normalize:()=>fn,random:()=>dn,round:()=>tn,scale:()=>en,scaleAndAdd:()=>rn,set:()=>$r,sqrDist:()=>_n,sqrLen:()=>Pn,squaredDistance:()=>on,squaredLength:()=>un,str:()=>Mn,sub:()=>gn,subtract:()=>Xr,transformMat4:()=>bn,transformQuat:()=>pn,zero:()=>yn});var f={};r.r(f),r.d(f,{add:()=>ao,calculateW:()=>Un,clone:()=>eo,conjugate:()=>$n,copy:()=>no,create:()=>Sn,dot:()=>so,equals:()=>yo,exactEquals:()=>po,exp:()=>jn,fromEuler:()=>Xn,fromMat3:()=>Nn,fromValues:()=>ro,getAngle:()=>Rn,getAxisAngle:()=>Bn,identity:()=>In,invert:()=>Gn,len:()=>lo,length:()=>fo,lerp:()=>co,ln:()=>Ln,mul:()=>io,multiply:()=>On,normalize:()=>bo,pow:()=>qn,random:()=>Wn,rotateX:()=>Cn,rotateY:()=>kn,rotateZ:()=>Dn,rotationTo:()=>Mo,scale:()=>uo,set:()=>oo,setAxes:()=>xo,setAxisAngle:()=>zn,slerp:()=>Vn,sqlerp:()=>vo,sqrLen:()=>mo,squaredLength:()=>ho,str:()=>Yn});var l={};r.r(l),r.d(l,{add:()=>Go,clone:()=>Ao,conjugate:()=>Zo,copy:()=>So,create:()=>go,dot:()=>Yo,equals:()=>aa,exactEquals:()=>oa,fromMat4:()=>To,fromRotation:()=>Po,fromRotationTranslation:()=>_o,fromRotationTranslationValues:()=>Fo,fromTranslation:()=>Eo,fromValues:()=>wo,getDual:()=>Ro,getReal:()=>Bo,getTranslation:()=>ko,identity:()=>Io,invert:()=>Qo,len:()=>Jo,length:()=>Ko,lerp:()=>Ho,mul:()=>No,multiply:()=>$o,normalize:()=>ra,rotateAroundAxis:()=>Wo,rotateByQuatAppend:()=>qo,rotateByQuatPrepend:()=>Vo,rotateX:()=>Uo,rotateY:()=>jo,rotateZ:()=>Lo,scale:()=>Xo,set:()=>zo,setDual:()=>Co,setReal:()=>Oo,sqrLen:()=>ea,squaredLength:()=>ta,str:()=>na,translate:()=>Do});var h={};r.r(h),r.d(h,{add:()=>la,angle:()=>Ua,ceil:()=>ba,clone:()=>ua,copy:()=>ca,create:()=>ia,cross:()=>Ia,dist:()=>Xa,distance:()=>Aa,div:()=>Na,divide:()=>da,dot:()=>Sa,equals:()=>Va,exactEquals:()=>qa,floor:()=>pa,forEach:()=>Qa,fromValues:()=>sa,inverse:()=>Pa,len:()=>Wa,length:()=>Fa,lerp:()=>za,max:()=>Ma,min:()=>ya,mul:()=>$a,multiply:()=>ma,negate:()=>Ea,normalize:()=>Ta,random:()=>Ba,rotate:()=>Da,round:()=>va,scale:()=>xa,scaleAndAdd:()=>ga,set:()=>fa,sqrDist:()=>Ya,sqrLen:()=>Ha,squaredDistance:()=>wa,squaredLength:()=>_a,str:()=>La,sub:()=>Ga,subtract:()=>ha,transformMat2:()=>Ra,transformMat2d:()=>Oa,transformMat3:()=>Ca,transformMat4:()=>ka,zero:()=>ja});var m=1e-6,d="undefined"!=typeof Float32Array?Float32Array:Array,b=Math.random;function p(t){d=t}var y=Math.PI/180;function M(t){return t*y}function v(t,e){return Math.abs(t-e)<=m*Math.max(1,Math.abs(t),Math.abs(e))}function x(){var t=new d(4);return d!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function g(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function A(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function w(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function F(t,e,r,n){var o=new d(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o}function _(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t}function E(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function P(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r*a-o*n;return i?(i=1/i,t[0]=a*i,t[1]=-n*i,t[2]=-o*i,t[3]=r*i,t):null}function T(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function S(t){return t[0]*t[3]-t[2]*t[1]}function I(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[0],s=r[1],c=r[2],f=r[3];return t[0]=n*u+a*s,t[1]=o*u+i*s,t[2]=n*c+a*f,t[3]=o*c+i*f,t}function z(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s+a*u,t[1]=o*s+i*u,t[2]=n*-u+a*s,t[3]=o*-u+i*s,t}function B(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[0],s=r[1];return t[0]=n*u,t[1]=o*u,t[2]=a*s,t[3]=i*s,t}function R(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function O(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function C(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function k(t){return Math.hypot(t[0],t[1],t[2],t[3])}function D(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function U(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function j(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function L(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function q(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(r-i)<=m*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=m*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=m*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-c)<=m*Math.max(1,Math.abs(a),Math.abs(c))}function V(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function W(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var G=I,$=j;function N(){var t=new d(6);return d!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function X(t){var e=new d(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function H(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Q(t,e,r,n,o,a){var i=new d(6);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i[4]=o,i[5]=a,i}function Z(t,e,r,n,o,a,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t}function K(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=r*a-n*o;return s?(s=1/s,t[0]=a*s,t[1]=-n*s,t[2]=-o*s,t[3]=r*s,t[4]=(o*u-a*i)*s,t[5]=(n*i-r*u)*s,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=r[0],f=r[1],l=r[2],h=r[3],m=r[4],d=r[5];return t[0]=n*c+a*f,t[1]=o*c+i*f,t[2]=n*l+a*h,t[3]=o*l+i*h,t[4]=n*m+a*d+u,t[5]=o*m+i*d+s,t}function et(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=Math.sin(r),f=Math.cos(r);return t[0]=n*f+a*c,t[1]=o*f+i*c,t[2]=n*-c+a*f,t[3]=o*-c+i*f,t[4]=u,t[5]=s,t}function rt(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=r[0],f=r[1];return t[0]=n*c,t[1]=o*c,t[2]=a*f,t[3]=i*f,t[4]=u,t[5]=s,t}function nt(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=r[0],f=r[1];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=n*c+a*f+u,t[5]=o*c+i*f+s,t}function ot(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function at(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function it(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ut(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function st(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function ft(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function lt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function ht(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function mt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function dt(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=e[0],c=e[1],f=e[2],l=e[3],h=e[4],d=e[5];return Math.abs(r-s)<=m*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-c)<=m*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-f)<=m*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-l)<=m*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-h)<=m*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=m*Math.max(1,Math.abs(u),Math.abs(d))}var bt=tt,pt=ft;function yt(){var t=new d(9);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Mt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function vt(t){var e=new d(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function gt(t,e,r,n,o,a,i,u,s){var c=new d(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=o,c[5]=a,c[6]=i,c[7]=u,c[8]=s,c}function At(t,e,r,n,o,a,i,u,s,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t}function wt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ft(t,e){if(t===e){var r=e[1],n=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function _t(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=f*i-u*c,h=-f*a+u*s,m=c*a-i*s,d=r*l+n*h+o*m;return d?(d=1/d,t[0]=l*d,t[1]=(-f*n+o*c)*d,t[2]=(u*n-o*i)*d,t[3]=h*d,t[4]=(f*r-o*s)*d,t[5]=(-u*r+o*a)*d,t[6]=m*d,t[7]=(-c*r+n*s)*d,t[8]=(i*r-n*a)*d,t):null}function Et(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8];return t[0]=i*f-u*c,t[1]=o*c-n*f,t[2]=n*u-o*i,t[3]=u*s-a*f,t[4]=r*f-o*s,t[5]=o*a-r*u,t[6]=a*c-i*s,t[7]=n*s-r*c,t[8]=r*i-n*a,t}function Pt(t){var e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],i=t[5],u=t[6],s=t[7],c=t[8];return e*(c*a-i*s)+r*(-c*o+i*u)+n*(s*o-a*u)}function Tt(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=r[0],m=r[1],d=r[2],b=r[3],p=r[4],y=r[5],M=r[6],v=r[7],x=r[8];return t[0]=h*n+m*i+d*c,t[1]=h*o+m*u+d*f,t[2]=h*a+m*s+d*l,t[3]=b*n+p*i+y*c,t[4]=b*o+p*u+y*f,t[5]=b*a+p*s+y*l,t[6]=M*n+v*i+x*c,t[7]=M*o+v*u+x*f,t[8]=M*a+v*s+x*l,t}function St(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=r[0],m=r[1];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=s,t[6]=h*n+m*i+c,t[7]=h*o+m*u+f,t[8]=h*a+m*s+l,t}function It(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(r),m=Math.cos(r);return t[0]=m*n+h*i,t[1]=m*o+h*u,t[2]=m*a+h*s,t[3]=m*i-h*n,t[4]=m*u-h*o,t[5]=m*s-h*a,t[6]=c,t[7]=f,t[8]=l,t}function zt(t,e,r){var n=r[0],o=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Bt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Rt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ct(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function kt(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r+r,u=n+n,s=o+o,c=r*i,f=n*i,l=n*u,h=o*i,m=o*u,d=o*s,b=a*i,p=a*u,y=a*s;return t[0]=1-l-d,t[3]=f-y,t[6]=h+p,t[1]=f+y,t[4]=1-c-d,t[7]=m-b,t[2]=h-p,t[5]=m+b,t[8]=1-c-l,t}function Dt(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],m=e[11],d=e[12],b=e[13],p=e[14],y=e[15],M=r*u-n*i,v=r*s-o*i,x=r*c-a*i,g=n*s-o*u,A=n*c-a*u,w=o*c-a*s,F=f*b-l*d,_=f*p-h*d,E=f*y-m*d,P=l*p-h*b,T=l*y-m*b,S=h*y-m*p,I=M*S-v*T+x*P+g*E-A*_+w*F;return I?(I=1/I,t[0]=(u*S-s*T+c*P)*I,t[1]=(s*E-i*S-c*_)*I,t[2]=(i*T-u*E+c*F)*I,t[3]=(o*T-n*S-a*P)*I,t[4]=(r*S-o*E+a*_)*I,t[5]=(n*E-r*T-a*F)*I,t[6]=(b*w-p*A+y*g)*I,t[7]=(p*x-d*w-y*v)*I,t[8]=(d*A-b*x+y*M)*I,t):null}function Ut(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function jt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Lt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function qt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function Vt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function Wt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function Gt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function $t(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Nt(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=e[0],h=e[1],d=e[2],b=e[3],p=e[4],y=e[5],M=e[6],v=e[7],x=e[8];return Math.abs(r-l)<=m*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-h)<=m*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-d)<=m*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-b)<=m*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(i-p)<=m*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-y)<=m*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(s-M)<=m*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(c-v)<=m*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(f-x)<=m*Math.max(1,Math.abs(f),Math.abs(x))}var Xt=Tt,Yt=Vt;function Ht(){var t=new d(16);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qt(t){var e=new d(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Kt(t,e,r,n,o,a,i,u,s,c,f,l,h,m,b,p){var y=new d(16);return y[0]=t,y[1]=e,y[2]=r,y[3]=n,y[4]=o,y[5]=a,y[6]=i,y[7]=u,y[8]=s,y[9]=c,y[10]=f,y[11]=l,y[12]=h,y[13]=m,y[14]=b,y[15]=p,y}function Jt(t,e,r,n,o,a,i,u,s,c,f,l,h,m,d,b,p){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=m,t[13]=d,t[14]=b,t[15]=p,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var r=e[1],n=e[2],o=e[3],a=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=o,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],m=e[11],d=e[12],b=e[13],p=e[14],y=e[15],M=r*u-n*i,v=r*s-o*i,x=r*c-a*i,g=n*s-o*u,A=n*c-a*u,w=o*c-a*s,F=f*b-l*d,_=f*p-h*d,E=f*y-m*d,P=l*p-h*b,T=l*y-m*b,S=h*y-m*p,I=M*S-v*T+x*P+g*E-A*_+w*F;return I?(I=1/I,t[0]=(u*S-s*T+c*P)*I,t[1]=(o*T-n*S-a*P)*I,t[2]=(b*w-p*A+y*g)*I,t[3]=(h*A-l*w-m*g)*I,t[4]=(s*E-i*S-c*_)*I,t[5]=(r*S-o*E+a*_)*I,t[6]=(p*x-d*w-y*v)*I,t[7]=(f*w-h*x+m*v)*I,t[8]=(i*T-u*E+c*F)*I,t[9]=(n*E-r*T-a*F)*I,t[10]=(d*A-b*x+y*M)*I,t[11]=(l*x-f*A-m*M)*I,t[12]=(u*_-i*P-s*F)*I,t[13]=(r*P-n*_+o*F)*I,t[14]=(b*v-d*g-p*M)*I,t[15]=(f*g-l*v+h*M)*I,t):null}function ne(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],m=e[11],d=e[12],b=e[13],p=e[14],y=e[15];return t[0]=u*(h*y-m*p)-l*(s*y-c*p)+b*(s*m-c*h),t[1]=-(n*(h*y-m*p)-l*(o*y-a*p)+b*(o*m-a*h)),t[2]=n*(s*y-c*p)-u*(o*y-a*p)+b*(o*c-a*s),t[3]=-(n*(s*m-c*h)-u*(o*m-a*h)+l*(o*c-a*s)),t[4]=-(i*(h*y-m*p)-f*(s*y-c*p)+d*(s*m-c*h)),t[5]=r*(h*y-m*p)-f*(o*y-a*p)+d*(o*m-a*h),t[6]=-(r*(s*y-c*p)-i*(o*y-a*p)+d*(o*c-a*s)),t[7]=r*(s*m-c*h)-i*(o*m-a*h)+f*(o*c-a*s),t[8]=i*(l*y-m*b)-f*(u*y-c*b)+d*(u*m-c*l),t[9]=-(r*(l*y-m*b)-f*(n*y-a*b)+d*(n*m-a*l)),t[10]=r*(u*y-c*b)-i*(n*y-a*b)+d*(n*c-a*u),t[11]=-(r*(u*m-c*l)-i*(n*m-a*l)+f*(n*c-a*u)),t[12]=-(i*(l*p-h*b)-f*(u*p-s*b)+d*(u*h-s*l)),t[13]=r*(l*p-h*b)-f*(n*p-o*b)+d*(n*h-o*l),t[14]=-(r*(u*p-s*b)-i*(n*p-o*b)+d*(n*s-o*u)),t[15]=r*(u*h-s*l)-i*(n*h-o*l)+f*(n*s-o*u),t}function oe(t){var e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],i=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],m=t[12],d=t[13],b=t[14],p=t[15];return(e*i-r*a)*(l*p-h*b)-(e*u-n*a)*(f*p-h*d)+(e*s-o*a)*(f*b-l*d)+(r*u-n*i)*(c*p-h*m)-(r*s-o*i)*(c*b-l*m)+(n*s-o*u)*(c*d-f*m)}function ae(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],m=e[10],d=e[11],b=e[12],p=e[13],y=e[14],M=e[15],v=r[0],x=r[1],g=r[2],A=r[3];return t[0]=v*n+x*u+g*l+A*b,t[1]=v*o+x*s+g*h+A*p,t[2]=v*a+x*c+g*m+A*y,t[3]=v*i+x*f+g*d+A*M,v=r[4],x=r[5],g=r[6],A=r[7],t[4]=v*n+x*u+g*l+A*b,t[5]=v*o+x*s+g*h+A*p,t[6]=v*a+x*c+g*m+A*y,t[7]=v*i+x*f+g*d+A*M,v=r[8],x=r[9],g=r[10],A=r[11],t[8]=v*n+x*u+g*l+A*b,t[9]=v*o+x*s+g*h+A*p,t[10]=v*a+x*c+g*m+A*y,t[11]=v*i+x*f+g*d+A*M,v=r[12],x=r[13],g=r[14],A=r[15],t[12]=v*n+x*u+g*l+A*b,t[13]=v*o+x*s+g*h+A*p,t[14]=v*a+x*c+g*m+A*y,t[15]=v*i+x*f+g*d+A*M,t}function ie(t,e,r){var n,o,a,i,u,s,c,f,l,h,m,d,b=r[0],p=r[1],y=r[2];return e===t?(t[12]=e[0]*b+e[4]*p+e[8]*y+e[12],t[13]=e[1]*b+e[5]*p+e[9]*y+e[13],t[14]=e[2]*b+e[6]*p+e[10]*y+e[14],t[15]=e[3]*b+e[7]*p+e[11]*y+e[15]):(n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],m=e[10],d=e[11],t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=m,t[11]=d,t[12]=n*b+u*p+l*y+e[12],t[13]=o*b+s*p+h*y+e[13],t[14]=a*b+c*p+m*y+e[14],t[15]=i*b+f*p+d*y+e[15]),t}function ue(t,e,r){var n=r[0],o=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function se(t,e,r,n){var o,a,i,u,s,c,f,l,h,d,b,p,y,M,v,x,g,A,w,F,_,E,P,T,S=n[0],I=n[1],z=n[2],B=Math.hypot(S,I,z);return B<m?null:(S*=B=1/B,I*=B,z*=B,o=Math.sin(r),i=1-(a=Math.cos(r)),u=e[0],s=e[1],c=e[2],f=e[3],l=e[4],h=e[5],d=e[6],b=e[7],p=e[8],y=e[9],M=e[10],v=e[11],x=S*S*i+a,g=I*S*i+z*o,A=z*S*i-I*o,w=S*I*i-z*o,F=I*I*i+a,_=z*I*i+S*o,E=S*z*i+I*o,P=I*z*i-S*o,T=z*z*i+a,t[0]=u*x+l*g+p*A,t[1]=s*x+h*g+y*A,t[2]=c*x+d*g+M*A,t[3]=f*x+b*g+v*A,t[4]=u*w+l*F+p*_,t[5]=s*w+h*F+y*_,t[6]=c*w+d*F+M*_,t[7]=f*w+b*F+v*_,t[8]=u*E+l*P+p*T,t[9]=s*E+h*P+y*T,t[10]=c*E+d*P+M*T,t[11]=f*E+b*P+v*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[4],i=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*o+c*n,t[5]=i*o+f*n,t[6]=u*o+l*n,t[7]=s*o+h*n,t[8]=c*o-a*n,t[9]=f*o-i*n,t[10]=l*o-u*n,t[11]=h*o-s*n,t}function fe(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[0],i=e[1],u=e[2],s=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o-c*n,t[1]=i*o-f*n,t[2]=u*o-l*n,t[3]=s*o-h*n,t[8]=a*n+c*o,t[9]=i*n+f*o,t[10]=u*n+l*o,t[11]=s*n+h*o,t}function le(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[0],i=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o+c*n,t[1]=i*o+f*n,t[2]=u*o+l*n,t[3]=s*o+h*n,t[4]=c*o-a*n,t[5]=f*o-i*n,t[6]=l*o-u*n,t[7]=h*o-s*n,t}function he(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function me(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function de(t,e,r){var n,o,a,i=r[0],u=r[1],s=r[2],c=Math.hypot(i,u,s);return c<m?null:(i*=c=1/c,u*=c,s*=c,n=Math.sin(e),a=1-(o=Math.cos(e)),t[0]=i*i*a+o,t[1]=u*i*a+s*n,t[2]=s*i*a-u*n,t[3]=0,t[4]=i*u*a-s*n,t[5]=u*u*a+o,t[6]=s*u*a+i*n,t[7]=0,t[8]=i*s*a+u*n,t[9]=u*s*a-i*n,t[10]=s*s*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function be(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Me(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=n+n,s=o+o,c=a+a,f=n*u,l=n*s,h=n*c,m=o*s,d=o*c,b=a*c,p=i*u,y=i*s,M=i*c;return t[0]=1-(m+b),t[1]=l+M,t[2]=h-y,t[3]=0,t[4]=l-M,t[5]=1-(f+b),t[6]=d+p,t[7]=0,t[8]=h+y,t[9]=d-p,t[10]=1-(f+m),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ve(t,e){var r=new d(3),n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=n*n+o*o+a*a+i*i;return l>0?(r[0]=2*(u*i+f*n+s*a-c*o)/l,r[1]=2*(s*i+f*o+c*n-u*a)/l,r[2]=2*(c*i+f*a+u*o-s*n)/l):(r[0]=2*(u*i+f*n+s*a-c*o),r[1]=2*(s*i+f*o+c*n-u*a),r[2]=2*(c*i+f*a+u*o-s*n)),Me(t,e,r),t}function xe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function ge(t,e){var r=e[0],n=e[1],o=e[2],a=e[4],i=e[5],u=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(r,n,o),t[1]=Math.hypot(a,i,u),t[2]=Math.hypot(s,c,f),t}function Ae(t,e){var r=new d(3);ge(r,e);var n=1/r[0],o=1/r[1],a=1/r[2],i=e[0]*n,u=e[1]*o,s=e[2]*a,c=e[4]*n,f=e[5]*o,l=e[6]*a,h=e[8]*n,m=e[9]*o,b=e[10]*a,p=i+f+b,y=0;return p>0?(y=2*Math.sqrt(p+1),t[3]=.25*y,t[0]=(l-m)/y,t[1]=(h-s)/y,t[2]=(u-c)/y):i>f&&i>b?(y=2*Math.sqrt(1+i-f-b),t[3]=(l-m)/y,t[0]=.25*y,t[1]=(u+c)/y,t[2]=(h+s)/y):f>b?(y=2*Math.sqrt(1+f-i-b),t[3]=(h-s)/y,t[0]=(u+c)/y,t[1]=.25*y,t[2]=(l+m)/y):(y=2*Math.sqrt(1+b-i-f),t[3]=(u-c)/y,t[0]=(h+s)/y,t[1]=(l+m)/y,t[2]=.25*y),t}function we(t,e,r,n){var o=e[0],a=e[1],i=e[2],u=e[3],s=o+o,c=a+a,f=i+i,l=o*s,h=o*c,m=o*f,d=a*c,b=a*f,p=i*f,y=u*s,M=u*c,v=u*f,x=n[0],g=n[1],A=n[2];return t[0]=(1-(d+p))*x,t[1]=(h+v)*x,t[2]=(m-M)*x,t[3]=0,t[4]=(h-v)*g,t[5]=(1-(l+p))*g,t[6]=(b+y)*g,t[7]=0,t[8]=(m+M)*A,t[9]=(b-y)*A,t[10]=(1-(l+d))*A,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Fe(t,e,r,n,o){var a=e[0],i=e[1],u=e[2],s=e[3],c=a+a,f=i+i,l=u+u,h=a*c,m=a*f,d=a*l,b=i*f,p=i*l,y=u*l,M=s*c,v=s*f,x=s*l,g=n[0],A=n[1],w=n[2],F=o[0],_=o[1],E=o[2],P=(1-(b+y))*g,T=(m+x)*g,S=(d-v)*g,I=(m-x)*A,z=(1-(h+y))*A,B=(p+M)*A,R=(d+v)*w,O=(p-M)*w,C=(1-(h+b))*w;return t[0]=P,t[1]=T,t[2]=S,t[3]=0,t[4]=I,t[5]=z,t[6]=B,t[7]=0,t[8]=R,t[9]=O,t[10]=C,t[11]=0,t[12]=r[0]+F-(P*F+I*_+R*E),t[13]=r[1]+_-(T*F+z*_+O*E),t[14]=r[2]+E-(S*F+B*_+C*E),t[15]=1,t}function _e(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r+r,u=n+n,s=o+o,c=r*i,f=n*i,l=n*u,h=o*i,m=o*u,d=o*s,b=a*i,p=a*u,y=a*s;return t[0]=1-l-d,t[1]=f+y,t[2]=h-p,t[3]=0,t[4]=f-y,t[5]=1-c-d,t[6]=m+b,t[7]=0,t[8]=h+p,t[9]=m-b,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ee(t,e,r,n,o,a,i){var u=1/(r-e),s=1/(o-n),c=1/(a-i);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(o+n)*s,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t}function Pe(t,e,r,n,o){var a,i=1/Math.tan(e/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(n-o),t[10]=(o+n)*a,t[14]=2*o*n*a):(t[10]=-1,t[14]=-2*n),t}var Te=Pe;function Se(t,e,r,n,o){var a,i=1/Math.tan(e/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(n-o),t[10]=o*a,t[14]=o*n*a):(t[10]=-1,t[14]=-n),t}function Ie(t,e,r,n){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(o+a);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(o-a)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function ze(t,e,r,n,o,a,i){var u=1/(e-r),s=1/(n-o),c=1/(a-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*u,t[13]=(o+n)*s,t[14]=(i+a)*c,t[15]=1,t}var Be=ze;function Re(t,e,r,n,o,a,i){var u=1/(e-r),s=1/(n-o),c=1/(a-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+r)*u,t[13]=(o+n)*s,t[14]=a*c,t[15]=1,t}function Oe(t,e,r,n){var o,a,i,u,s,c,f,l,h,d,b=e[0],p=e[1],y=e[2],M=n[0],v=n[1],x=n[2],g=r[0],A=r[1],w=r[2];return Math.abs(b-g)<m&&Math.abs(p-A)<m&&Math.abs(y-w)<m?te(t):(f=b-g,l=p-A,h=y-w,o=v*(h*=d=1/Math.hypot(f,l,h))-x*(l*=d),a=x*(f*=d)-M*h,i=M*l-v*f,(d=Math.hypot(o,a,i))?(o*=d=1/d,a*=d,i*=d):(o=0,a=0,i=0),u=l*i-h*a,s=h*o-f*i,c=f*a-l*o,(d=Math.hypot(u,s,c))?(u*=d=1/d,s*=d,c*=d):(u=0,s=0,c=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=s,t[6]=l,t[7]=0,t[8]=i,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*b+a*p+i*y),t[13]=-(u*b+s*p+c*y),t[14]=-(f*b+l*p+h*y),t[15]=1,t)}function Ce(t,e,r,n){var o=e[0],a=e[1],i=e[2],u=n[0],s=n[1],c=n[2],f=o-r[0],l=a-r[1],h=i-r[2],m=f*f+l*l+h*h;m>0&&(f*=m=1/Math.sqrt(m),l*=m,h*=m);var d=s*h-c*l,b=c*f-u*h,p=u*l-s*f;return(m=d*d+b*b+p*p)>0&&(d*=m=1/Math.sqrt(m),b*=m,p*=m),t[0]=d,t[1]=b,t[2]=p,t[3]=0,t[4]=l*p-h*b,t[5]=h*d-f*p,t[6]=f*b-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t}function ke(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function De(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ue(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function je(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function Le(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function qe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function Ve(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function We(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],b=t[12],p=t[13],y=t[14],M=t[15],v=e[0],x=e[1],g=e[2],A=e[3],w=e[4],F=e[5],_=e[6],E=e[7],P=e[8],T=e[9],S=e[10],I=e[11],z=e[12],B=e[13],R=e[14],O=e[15];return Math.abs(r-v)<=m*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(n-x)<=m*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(o-g)<=m*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-A)<=m*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(i-w)<=m*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(u-F)<=m*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(s-_)<=m*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(c-E)<=m*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(f-P)<=m*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(l-T)<=m*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(h-S)<=m*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(d-I)<=m*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(b-z)<=m*Math.max(1,Math.abs(b),Math.abs(z))&&Math.abs(p-B)<=m*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(y-R)<=m*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(M-O)<=m*Math.max(1,Math.abs(M),Math.abs(O))}var Ge=ae,$e=je;function Ne(){var t=new d(3);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Xe(t){var e=new d(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ye(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function He(t,e,r){var n=new d(3);return n[0]=t,n[1]=e,n[2]=r,n}function Qe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ze(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Ke(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Je(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function tr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function er(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function rr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function nr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function or(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function ar(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function ir(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function ur(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function sr(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function cr(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return Math.hypot(r,n,o)}function fr(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return r*r+n*n+o*o}function lr(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function hr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function mr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function dr(t,e){var r=e[0],n=e[1],o=e[2],a=r*r+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function br(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pr(t,e,r){var n=e[0],o=e[1],a=e[2],i=r[0],u=r[1],s=r[2];return t[0]=o*s-a*u,t[1]=a*i-n*s,t[2]=n*u-o*i,t}function yr(t,e,r,n){var o=e[0],a=e[1],i=e[2];return t[0]=o+n*(r[0]-o),t[1]=a+n*(r[1]-a),t[2]=i+n*(r[2]-i),t}function Mr(t,e,r,n,o,a){var i=a*a,u=i*(2*a-3)+1,s=i*(a-2)+a,c=i*(a-1),f=i*(3-2*a);return t[0]=e[0]*u+r[0]*s+n[0]*c+o[0]*f,t[1]=e[1]*u+r[1]*s+n[1]*c+o[1]*f,t[2]=e[2]*u+r[2]*s+n[2]*c+o[2]*f,t}function vr(t,e,r,n,o,a){var i=1-a,u=i*i,s=a*a,c=u*i,f=3*a*u,l=3*s*i,h=s*a;return t[0]=e[0]*c+r[0]*f+n[0]*l+o[0]*h,t[1]=e[1]*c+r[1]*f+n[1]*l+o[1]*h,t[2]=e[2]*c+r[2]*f+n[2]*l+o[2]*h,t}function xr(t,e){e=e||1;var r=2*b()*Math.PI,n=2*b()-1,o=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=n*e,t}function gr(t,e,r){var n=e[0],o=e[1],a=e[2],i=r[3]*n+r[7]*o+r[11]*a+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*o+r[8]*a+r[12])/i,t[1]=(r[1]*n+r[5]*o+r[9]*a+r[13])/i,t[2]=(r[2]*n+r[6]*o+r[10]*a+r[14])/i,t}function Ar(t,e,r){var n=e[0],o=e[1],a=e[2];return t[0]=n*r[0]+o*r[3]+a*r[6],t[1]=n*r[1]+o*r[4]+a*r[7],t[2]=n*r[2]+o*r[5]+a*r[8],t}function wr(t,e,r){var n=r[0],o=r[1],a=r[2],i=r[3],u=e[0],s=e[1],c=e[2],f=o*c-a*s,l=a*u-n*c,h=n*s-o*u,m=o*h-a*l,d=a*f-n*h,b=n*l-o*f,p=2*i;return f*=p,l*=p,h*=p,m*=2,d*=2,b*=2,t[0]=u+f+m,t[1]=s+l+d,t[2]=c+h+b,t}function Fr(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function _r(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Er(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Pr(t,e){var r=t[0],n=t[1],o=t[2],a=e[0],i=e[1],u=e[2],s=Math.sqrt(r*r+n*n+o*o)*Math.sqrt(a*a+i*i+u*u),c=s&&br(t,e)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function Tr(t){return t[0]=0,t[1]=0,t[2]=0,t}function Sr(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ir(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function zr(t,e){var r=t[0],n=t[1],o=t[2],a=e[0],i=e[1],u=e[2];return Math.abs(r-a)<=m*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-i)<=m*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-u)<=m*Math.max(1,Math.abs(o),Math.abs(u))}var Br,Rr=Je,Or=tr,Cr=er,kr=cr,Dr=fr,Ur=Ye,jr=lr,Lr=(Br=Ne(),function(t,e,r,n,o,a){var i,u;for(e||(e=3),r||(r=0),u=n?Math.min(n*e+r,t.length):t.length,i=r;i<u;i+=e)Br[0]=t[i],Br[1]=t[i+1],Br[2]=t[i+2],o(Br,Br,a),t[i]=Br[0],t[i+1]=Br[1],t[i+2]=Br[2];return t});function qr(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Vr(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Wr(t,e,r,n){var o=new d(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o}function Gr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function $r(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t}function Nr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Xr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Yr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function Hr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Qr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Zr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Kr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function Jr(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function tn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function en(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function rn(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function nn(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return Math.hypot(r,n,o,a)}function on(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+o*o+a*a}function an(t){var e=t[0],r=t[1],n=t[2],o=t[3];return Math.hypot(e,r,n,o)}function un(t){var e=t[0],r=t[1],n=t[2],o=t[3];return e*e+r*r+n*n+o*o}function sn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function cn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function fn(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r*r+n*n+o*o+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=r*i,t[1]=n*i,t[2]=o*i,t[3]=a*i,t}function ln(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function hn(t,e,r,n){var o=r[0]*n[1]-r[1]*n[0],a=r[0]*n[2]-r[2]*n[0],i=r[0]*n[3]-r[3]*n[0],u=r[1]*n[2]-r[2]*n[1],s=r[1]*n[3]-r[3]*n[1],c=r[2]*n[3]-r[3]*n[2],f=e[0],l=e[1],h=e[2],m=e[3];return t[0]=l*c-h*s+m*u,t[1]=-f*c+h*i-m*a,t[2]=f*s-l*i+m*o,t[3]=-f*u+l*a-h*o,t}function mn(t,e,r,n){var o=e[0],a=e[1],i=e[2],u=e[3];return t[0]=o+n*(r[0]-o),t[1]=a+n*(r[1]-a),t[2]=i+n*(r[2]-i),t[3]=u+n*(r[3]-u),t}function dn(t,e){var r,n,o,a,i,u;e=e||1;do{i=(r=2*b()-1)*r+(n=2*b()-1)*n}while(i>=1);do{u=(o=2*b()-1)*o+(a=2*b()-1)*a}while(u>=1);var s=Math.sqrt((1-i)/u);return t[0]=e*r,t[1]=e*n,t[2]=e*o*s,t[3]=e*a*s,t}function bn(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3];return t[0]=r[0]*n+r[4]*o+r[8]*a+r[12]*i,t[1]=r[1]*n+r[5]*o+r[9]*a+r[13]*i,t[2]=r[2]*n+r[6]*o+r[10]*a+r[14]*i,t[3]=r[3]*n+r[7]*o+r[11]*a+r[15]*i,t}function pn(t,e,r){var n=e[0],o=e[1],a=e[2],i=r[0],u=r[1],s=r[2],c=r[3],f=c*n+u*a-s*o,l=c*o+s*n-i*a,h=c*a+i*o-u*n,m=-i*n-u*o-s*a;return t[0]=f*c+m*-i+l*-s-h*-u,t[1]=l*c+m*-u+h*-i-f*-s,t[2]=h*c+m*-s+f*-u-l*-i,t[3]=e[3],t}function yn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Mn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function vn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function xn(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(r-i)<=m*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=m*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=m*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-c)<=m*Math.max(1,Math.abs(a),Math.abs(c))}var gn=Xr,An=Yr,wn=Hr,Fn=nn,_n=on,En=an,Pn=un,Tn=function(){var t=qr();return function(e,r,n,o,a,i){var u,s;for(r||(r=4),n||(n=0),s=o?Math.min(o*r+n,e.length):e.length,u=n;u<s;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],a(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function Sn(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function In(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function zn(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Bn(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>m?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function Rn(t,e){var r=so(t,e);return Math.acos(2*r*r-1)}function On(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[0],s=r[1],c=r[2],f=r[3];return t[0]=n*f+i*u+o*c-a*s,t[1]=o*f+i*s+a*u-n*c,t[2]=a*f+i*c+n*s-o*u,t[3]=i*f-n*u-o*s-a*c,t}function Cn(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s+i*u,t[1]=o*s+a*u,t[2]=a*s-o*u,t[3]=i*s-n*u,t}function kn(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s-a*u,t[1]=o*s+i*u,t[2]=a*s+n*u,t[3]=i*s-o*u,t}function Dn(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],u=Math.sin(r),s=Math.cos(r);return t[0]=n*s+o*u,t[1]=o*s-n*u,t[2]=a*s+i*u,t[3]=i*s-a*u,t}function Un(t,e){var r=e[0],n=e[1],o=e[2];return t[0]=r,t[1]=n,t[2]=o,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-o*o)),t}function jn(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=Math.sqrt(r*r+n*n+o*o),u=Math.exp(a),s=i>0?u*Math.sin(i)/i:0;return t[0]=r*s,t[1]=n*s,t[2]=o*s,t[3]=u*Math.cos(i),t}function Ln(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=Math.sqrt(r*r+n*n+o*o),u=i>0?Math.atan2(i,a)/i:0;return t[0]=r*u,t[1]=n*u,t[2]=o*u,t[3]=.5*Math.log(r*r+n*n+o*o+a*a),t}function qn(t,e,r){return Ln(t,e),uo(t,t,r),jn(t,t),t}function Vn(t,e,r,n){var o,a,i,u,s,c=e[0],f=e[1],l=e[2],h=e[3],d=r[0],b=r[1],p=r[2],y=r[3];return(a=c*d+f*b+l*p+h*y)<0&&(a=-a,d=-d,b=-b,p=-p,y=-y),1-a>m?(o=Math.acos(a),i=Math.sin(o),u=Math.sin((1-n)*o)/i,s=Math.sin(n*o)/i):(u=1-n,s=n),t[0]=u*c+s*d,t[1]=u*f+s*b,t[2]=u*l+s*p,t[3]=u*h+s*y,t}function Wn(t){var e=b(),r=b(),n=b(),o=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=a*Math.sin(2*Math.PI*n),t[3]=a*Math.cos(2*Math.PI*n),t}function Gn(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r*r+n*n+o*o+a*a,u=i?1/i:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-o*u,t[3]=a*u,t}function $n(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Nn(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;r=Math.sqrt(e[3*o+o]-e[3*a+a]-e[3*i+i]+1),t[o]=.5*r,r=.5/r,t[3]=(e[3*a+i]-e[3*i+a])*r,t[a]=(e[3*a+o]+e[3*o+a])*r,t[i]=(e[3*i+o]+e[3*o+i])*r}return t}function Xn(t,e,r,n){var o=.5*Math.PI/180;e*=o,r*=o,n*=o;var a=Math.sin(e),i=Math.cos(e),u=Math.sin(r),s=Math.cos(r),c=Math.sin(n),f=Math.cos(n);return t[0]=a*s*f-i*u*c,t[1]=i*u*f+a*s*c,t[2]=i*s*c-a*u*f,t[3]=i*s*f+a*u*c,t}function Yn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Hn,Qn,Zn,Kn,Jn,to,eo=Vr,ro=Wr,no=Gr,oo=$r,ao=Nr,io=On,uo=en,so=ln,co=mn,fo=an,lo=fo,ho=un,mo=ho,bo=fn,po=vn,yo=xn,Mo=(Hn=Ne(),Qn=He(1,0,0),Zn=He(0,1,0),function(t,e,r){var n=br(e,r);return n<-.999999?(pr(Hn,Qn,e),Ur(Hn)<1e-6&&pr(Hn,Zn,e),dr(Hn,Hn),zn(t,Hn,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(pr(Hn,e,r),t[0]=Hn[0],t[1]=Hn[1],t[2]=Hn[2],t[3]=1+n,bo(t,t))}),vo=(Kn=Sn(),Jn=Sn(),function(t,e,r,n,o,a){return Vn(Kn,e,o,a),Vn(Jn,r,n,a),Vn(t,Kn,Jn,2*a*(1-a)),t}),xo=(to=yt(),function(t,e,r,n){return to[0]=r[0],to[3]=r[1],to[6]=r[2],to[1]=n[0],to[4]=n[1],to[7]=n[2],to[2]=-e[0],to[5]=-e[1],to[8]=-e[2],bo(t,Nn(t,to))});function go(){var t=new d(8);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Ao(t){var e=new d(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function wo(t,e,r,n,o,a,i,u){var s=new d(8);return s[0]=t,s[1]=e,s[2]=r,s[3]=n,s[4]=o,s[5]=a,s[6]=i,s[7]=u,s}function Fo(t,e,r,n,o,a,i){var u=new d(8);u[0]=t,u[1]=e,u[2]=r,u[3]=n;var s=.5*o,c=.5*a,f=.5*i;return u[4]=s*n+c*r-f*e,u[5]=c*n+f*t-s*r,u[6]=f*n+s*e-c*t,u[7]=-s*t-c*e-f*r,u}function _o(t,e,r){var n=.5*r[0],o=.5*r[1],a=.5*r[2],i=e[0],u=e[1],s=e[2],c=e[3];return t[0]=i,t[1]=u,t[2]=s,t[3]=c,t[4]=n*c+o*s-a*u,t[5]=o*c+a*i-n*s,t[6]=a*c+n*u-o*i,t[7]=-n*i-o*u-a*s,t}function Eo(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Po(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function To(t,e){var r=Sn();Ae(r,e);var n=new d(3);return xe(n,e),_o(t,r,n),t}function So(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Io(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function zo(t,e,r,n,o,a,i,u,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=s,t}var Bo=no;function Ro(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Oo=no;function Co(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function ko(t,e){var r=e[4],n=e[5],o=e[6],a=e[7],i=-e[0],u=-e[1],s=-e[2],c=e[3];return t[0]=2*(r*c+a*i+n*s-o*u),t[1]=2*(n*c+a*u+o*i-r*s),t[2]=2*(o*c+a*s+r*u-n*i),t}function Do(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=.5*r[0],s=.5*r[1],c=.5*r[2],f=e[4],l=e[5],h=e[6],m=e[7];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=i*u+o*c-a*s+f,t[5]=i*s+a*u-n*c+l,t[6]=i*c+n*s-o*u+h,t[7]=-n*u-o*s-a*c+m,t}function Uo(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=u*i+f*n+s*a-c*o,h=s*i+f*o+c*n-u*a,m=c*i+f*a+u*o-s*n,d=f*i-u*n-s*o-c*a;return Cn(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+d*n+h*a-m*o,t[5]=h*i+d*o+m*n-l*a,t[6]=m*i+d*a+l*o-h*n,t[7]=d*i-l*n-h*o-m*a,t}function jo(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=u*i+f*n+s*a-c*o,h=s*i+f*o+c*n-u*a,m=c*i+f*a+u*o-s*n,d=f*i-u*n-s*o-c*a;return kn(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+d*n+h*a-m*o,t[5]=h*i+d*o+m*n-l*a,t[6]=m*i+d*a+l*o-h*n,t[7]=d*i-l*n-h*o-m*a,t}function Lo(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=u*i+f*n+s*a-c*o,h=s*i+f*o+c*n-u*a,m=c*i+f*a+u*o-s*n,d=f*i-u*n-s*o-c*a;return Dn(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+d*n+h*a-m*o,t[5]=h*i+d*o+m*n-l*a,t[6]=m*i+d*a+l*o-h*n,t[7]=d*i-l*n-h*o-m*a,t}function qo(t,e,r){var n=r[0],o=r[1],a=r[2],i=r[3],u=e[0],s=e[1],c=e[2],f=e[3];return t[0]=u*i+f*n+s*a-c*o,t[1]=s*i+f*o+c*n-u*a,t[2]=c*i+f*a+u*o-s*n,t[3]=f*i-u*n-s*o-c*a,u=e[4],s=e[5],c=e[6],f=e[7],t[4]=u*i+f*n+s*a-c*o,t[5]=s*i+f*o+c*n-u*a,t[6]=c*i+f*a+u*o-s*n,t[7]=f*i-u*n-s*o-c*a,t}function Vo(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[0],s=r[1],c=r[2],f=r[3];return t[0]=n*f+i*u+o*c-a*s,t[1]=o*f+i*s+a*u-n*c,t[2]=a*f+i*c+n*s-o*u,t[3]=i*f-n*u-o*s-a*c,u=r[4],s=r[5],c=r[6],f=r[7],t[4]=n*f+i*u+o*c-a*s,t[5]=o*f+i*s+a*u-n*c,t[6]=a*f+i*c+n*s-o*u,t[7]=i*f-n*u-o*s-a*c,t}function Wo(t,e,r,n){if(Math.abs(n)<m)return So(t,e);var o=Math.hypot(r[0],r[1],r[2]);n*=.5;var a=Math.sin(n),i=a*r[0]/o,u=a*r[1]/o,s=a*r[2]/o,c=Math.cos(n),f=e[0],l=e[1],h=e[2],d=e[3];t[0]=f*c+d*i+l*s-h*u,t[1]=l*c+d*u+h*i-f*s,t[2]=h*c+d*s+f*u-l*i,t[3]=d*c-f*i-l*u-h*s;var b=e[4],p=e[5],y=e[6],M=e[7];return t[4]=b*c+M*i+p*s-y*u,t[5]=p*c+M*u+y*i-b*s,t[6]=y*c+M*s+b*u-p*i,t[7]=M*c-b*i-p*u-y*s,t}function Go(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function $o(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],u=r[4],s=r[5],c=r[6],f=r[7],l=e[4],h=e[5],m=e[6],d=e[7],b=r[0],p=r[1],y=r[2],M=r[3];return t[0]=n*M+i*b+o*y-a*p,t[1]=o*M+i*p+a*b-n*y,t[2]=a*M+i*y+n*p-o*b,t[3]=i*M-n*b-o*p-a*y,t[4]=n*f+i*u+o*c-a*s+l*M+d*b+h*y-m*p,t[5]=o*f+i*s+a*u-n*c+h*M+d*p+m*b-l*y,t[6]=a*f+i*c+n*s-o*u+m*M+d*y+l*p-h*b,t[7]=i*f-n*u-o*s-a*c+d*M-l*b-h*p-m*y,t}var No=$o;function Xo(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var Yo=so;function Ho(t,e,r,n){var o=1-n;return Yo(e,r)<0&&(n=-n),t[0]=e[0]*o+r[0]*n,t[1]=e[1]*o+r[1]*n,t[2]=e[2]*o+r[2]*n,t[3]=e[3]*o+r[3]*n,t[4]=e[4]*o+r[4]*n,t[5]=e[5]*o+r[5]*n,t[6]=e[6]*o+r[6]*n,t[7]=e[7]*o+r[7]*n,t}function Qo(t,e){var r=ta(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Zo(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Ko=fo,Jo=Ko,ta=ho,ea=ta;function ra(t,e){var r=ta(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,o=e[1]/r,a=e[2]/r,i=e[3]/r,u=e[4],s=e[5],c=e[6],f=e[7],l=n*u+o*s+a*c+i*f;t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=(u-n*l)/r,t[5]=(s-o*l)/r,t[6]=(c-a*l)/r,t[7]=(f-i*l)/r}return t}function na(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function oa(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function aa(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=e[0],l=e[1],h=e[2],d=e[3],b=e[4],p=e[5],y=e[6],M=e[7];return Math.abs(r-f)<=m*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-l)<=m*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-h)<=m*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-d)<=m*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-b)<=m*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(u-p)<=m*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(s-y)<=m*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-M)<=m*Math.max(1,Math.abs(c),Math.abs(M))}function ia(){var t=new d(2);return d!=Float32Array&&(t[0]=0,t[1]=0),t}function ua(t){var e=new d(2);return e[0]=t[0],e[1]=t[1],e}function sa(t,e){var r=new d(2);return r[0]=t,r[1]=e,r}function ca(t,e){return t[0]=e[0],t[1]=e[1],t}function fa(t,e,r){return t[0]=e,t[1]=r,t}function la(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function ha(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function ma(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function da(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function ba(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function pa(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function ya(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function Ma(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function va(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function xa(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function ga(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function Aa(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function wa(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function Fa(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function _a(t){var e=t[0],r=t[1];return e*e+r*r}function Ea(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Pa(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Ta(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function Sa(t,e){return t[0]*e[0]+t[1]*e[1]}function Ia(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function za(t,e,r,n){var o=e[0],a=e[1];return t[0]=o+n*(r[0]-o),t[1]=a+n*(r[1]-a),t}function Ba(t,e){e=e||1;var r=2*b()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function Ra(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o,t[1]=r[1]*n+r[3]*o,t}function Oa(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t}function Ca(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[3]*o+r[6],t[1]=r[1]*n+r[4]*o+r[7],t}function ka(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[4]*o+r[12],t[1]=r[1]*n+r[5]*o+r[13],t}function Da(t,e,r,n){var o=e[0]-r[0],a=e[1]-r[1],i=Math.sin(n),u=Math.cos(n);return t[0]=o*u-a*i+r[0],t[1]=o*i+a*u+r[1],t}function Ua(t,e){var r=t[0],n=t[1],o=e[0],a=e[1],i=Math.sqrt(r*r+n*n)*Math.sqrt(o*o+a*a),u=i&&(r*o+n*a)/i;return Math.acos(Math.min(Math.max(u,-1),1))}function ja(t){return t[0]=0,t[1]=0,t}function La(t){return"vec2("+t[0]+", "+t[1]+")"}function qa(t,e){return t[0]===e[0]&&t[1]===e[1]}function Va(t,e){var r=t[0],n=t[1],o=e[0],a=e[1];return Math.abs(r-o)<=m*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=m*Math.max(1,Math.abs(n),Math.abs(a))}var Wa=Fa,Ga=ha,$a=ma,Na=da,Xa=Aa,Ya=wa,Ha=_a,Qa=function(){var t=ia();return function(e,r,n,o,a,i){var u,s;for(r||(r=2),n||(n=0),s=o?Math.min(o*r+n,e.length):e.length,u=n;u<s;u+=r)t[0]=e[u],t[1]=e[u+1],a(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}()},963:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=e.CameraMovement=void 0;const n=r(887),o=r(75);var a;!function(t){t[t.FORWARD=0]="FORWARD",t[t.BACKWARD=1]="BACKWARD",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT",t[t.UP=4]="UP",t[t.DOWN=5]="DOWN"}(a=e.CameraMovement||(e.CameraMovement={})),e.Camera=class{update_camera_vectors(){let t=n.vec3.create();t[0]=Math.cos((0,o.deg_to_rad)(this.yaw))*Math.cos((0,o.deg_to_rad)(this.pitch)),t[1]=Math.sin((0,o.deg_to_rad)(this.pitch)),t[2]=Math.sin((0,o.deg_to_rad)(this.yaw))*Math.cos((0,o.deg_to_rad)(this.pitch)),n.vec3.normalize(this.front_axis,t),n.vec3.cross(this.right_axis,this.front_axis,this.world_up),n.vec3.normalize(this.right_axis,this.right_axis),n.vec3.cross(this.up_axis,this.right_axis,this.front_axis),n.vec3.normalize(this.up_axis,this.up_axis)}constructor(t=n.vec3.fromValues(0,0,1),e=n.vec3.fromValues(0,1,0),r=-90,o=0){this.position=n.vec3.fromValues(0,0,0),this.front_axis=n.vec3.fromValues(0,0,-1),this.up_axis=n.vec3.fromValues(0,1,0),this.right_axis=n.vec3.fromValues(1,0,0),this.movement_speed=2.5,this.mouse_sensitivity=.1,this.zoom=45,this.position=t,this.world_up=e,this.yaw=r,this.pitch=o,this.update_camera_vectors()}set_position(t){this.position=t,this.update_camera_vectors()}set_yaw_pitch(t,e){this.yaw=t,this.pitch=e,this.update_camera_vectors()}set_zoom(t){this.zoom=t,this.update_camera_vectors()}get_position_string(){return`(${this.position[0].toFixed(2)}, ${this.position[1].toFixed(2)}, ${this.position[2].toFixed(2)})`}get_angles_string(){return`(yaw: ${this.yaw.toFixed(2)}, pitch: ${this.pitch.toFixed(2)})`}get_zoom_string(){return`zoom: ${this.zoom.toFixed(2)}`}get_view_matrix(){let t=n.mat4.create(),e=n.vec3.create();return n.vec3.add(e,this.position,this.front_axis),n.mat4.lookAt(t,this.position,e,this.up_axis),t}get_projection_matrix(t,e){return n.mat4.perspective(n.mat4.create(),(0,o.deg_to_rad)(this.zoom),t/e,1,2e3)}process_keyboard(t,e){let r=this.movement_speed*e;t==a.FORWARD&&n.vec3.scaleAndAdd(this.position,this.position,this.front_axis,r),t==a.BACKWARD&&n.vec3.scaleAndAdd(this.position,this.position,this.front_axis,-r),t==a.LEFT&&n.vec3.scaleAndAdd(this.position,this.position,this.right_axis,-r),t==a.RIGHT&&n.vec3.scaleAndAdd(this.position,this.position,this.right_axis,r),t==a.UP&&n.vec3.scaleAndAdd(this.position,this.position,this.up_axis,r),t==a.DOWN&&n.vec3.scaleAndAdd(this.position,this.position,this.up_axis,-r)}process_mouse_movement(t,e,r=!0){t*=this.mouse_sensitivity,e*=this.mouse_sensitivity,this.yaw+=t,this.pitch+=e,r&&(this.pitch>89&&(this.pitch=89),this.pitch<-89&&(this.pitch=-89)),this.update_camera_vectors()}process_mouse_scroll(t){console.log(t),this.zoom>=1&&this.zoom<=90&&(this.zoom-=t),this.zoom<=1&&(this.zoom=1),this.zoom>=90&&(this.zoom=90)}}},244:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});const i=r(887),u=a(r(460)),s=r(963);!function(){const t=document.querySelector("#canvas"),e=t.getContext("webgl2");u.resizeCanvasToDisplaySize(t),e?new s.Camera(i.vec3.fromValues(0,0,15)):alert("No WebGL2! Please use a newer browser.")}()},75:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rad_to_deg=e.deg_to_rad=void 0,e.deg_to_rad=function(t){return t*Math.PI/180},e.rad_to_deg=function(t){return 180*t/Math.PI}},460:(t,e,r)=>{r.r(e),r.d(e,{addExtensionsToContext:()=>Ii,attributes:()=>vt,bindFramebufferInfo:()=>Mi,bindTransformFeedbackInfo:()=>Ta,bindUniformBlock:()=>Ca,canFilter:()=>Vn,canGenerateMipmap:()=>qn,createAttribsFromArrays:()=>mt,createAttributeSetters:()=>qa,createBufferFromArray:()=>yt,createBufferFromTypedArray:()=>rt,createBufferInfoFromArrays:()=>pt,createBuffersFromArrays:()=>Mt,createFramebufferInfo:()=>pi,createProgram:()=>da,createProgramAsync:()=>pa,createProgramFromScripts:()=>xa,createProgramFromSources:()=>ga,createProgramInfo:()=>Na,createProgramInfoAsync:()=>ya,createProgramInfoFromProgram:()=>Ga,createProgramInfos:()=>Ha,createProgramInfosAsync:()=>Za,createPrograms:()=>Ya,createProgramsAsync:()=>Qa,createSampler:()=>Jn,createSamplers:()=>to,createTexture:()=>mo,createTextures:()=>po,createTransformFeedback:()=>Sa,createTransformFeedbackInfo:()=>Pa,createUniformBlockInfo:()=>Oa,createUniformBlockInfoFromProgram:()=>Ra,createUniformBlockSpecFromProgram:()=>Ia,createUniformSetters:()=>Ea,createVAOAndSetAttributes:()=>Ai,createVAOFromBufferInfo:()=>wi,createVertexArrayInfo:()=>gi,draw:()=>ni,drawBufferInfo:()=>ei,drawObjectList:()=>ri,framebuffers:()=>vi,getArray_:()=>ot,getBytesPerElementForInternalFormat:()=>Un,getContext:()=>Bi,getFormatAndTypeForInternalFormat:()=>jn,getGLTypeForTypedArray:()=>S,getGLTypeForTypedArrayType:()=>I,getNumComponentsForFormat:()=>Wn,getNumComponents_:()=>ut,getTypedArrayTypeForGLType:()=>z,getWebGLContext:()=>zi,glEnumToString:()=>xe,isArrayBuffer:()=>B,isWebGL1:()=>ve,isWebGL2:()=>Me,loadTextureFromUrl:()=>fo,m4:()=>x,primitives:()=>ye,programs:()=>Ka,resizeCanvasToDisplaySize:()=>Ri,resizeFramebufferInfo:()=>yi,resizeTexture:()=>bo,setAttribInfoBufferFromArray:()=>dt,setAttributeDefaults_:()=>tt,setAttributePrefix:()=>J,setAttributes:()=>Va,setBlockUniforms:()=>Da,setBuffersAndAttributes:()=>Wa,setDefaultTextureColor:()=>Nn,setDefaults:()=>Ei,setEmptyTexture:()=>ho,setSamplerParameters:()=>Kn,setTextureDefaults_:()=>Xn,setTextureFilteringForSize:()=>eo,setTextureFromArray:()=>lo,setTextureFromElement:()=>ao,setTextureParameters:()=>Zn,setUniformBlock:()=>ka,setUniforms:()=>ja,setUniformsAndBindTextures:()=>La,textures:()=>yo,typedarrays:()=>R,utils:()=>ge,v3:()=>f,vertexArrays:()=>Fi});let n=Float32Array;function o(t,e,r){const o=new n(3);return t&&(o[0]=t),e&&(o[1]=e),r&&(o[2]=r),o}function a(t,e,r){return(r=r||new n(3))[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r}function i(t,e,r){return(r=r||new n(3))[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r}function u(t,e,r){r=r||new n(3);const o=t[2]*e[0]-t[0]*e[2],a=t[0]*e[1]-t[1]*e[0];return r[0]=t[1]*e[2]-t[2]*e[1],r[1]=o,r[2]=a,r}function s(t,e){e=e||new n(3);const r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=Math.sqrt(r);return o>1e-5?(e[0]=t[0]/o,e[1]=t[1]/o,e[2]=t[2]/o):(e[0]=0,e[1]=0,e[2]=0),e}function c(t,e,r){return(r=r||new n(3))[0]=t[0]*e[0],r[1]=t[1]*e[1],r[2]=t[2]*e[2],r}var f=Object.freeze({__proto__:null,add:a,copy:function(t,e){return(e=e||new n(3))[0]=t[0],e[1]=t[1],e[2]=t[2],e},create:o,cross:u,distance:function(t,e){const r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(r*r+n*n+o*o)},distanceSq:function(t,e){const r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return r*r+n*n+o*o},divide:function(t,e,r){return(r=r||new n(3))[0]=t[0]/e[0],r[1]=t[1]/e[1],r[2]=t[2]/e[2],r},divScalar:function(t,e,r){return(r=r||new n(3))[0]=t[0]/e,r[1]=t[1]/e,r[2]=t[2]/e,r},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},lerp:function(t,e,r,o){return(o=o||new n(3))[0]=t[0]+r*(e[0]-t[0]),o[1]=t[1]+r*(e[1]-t[1]),o[2]=t[2]+r*(e[2]-t[2]),o},lerpV:function(t,e,r,o){return(o=o||new n(3))[0]=t[0]+r[0]*(e[0]-t[0]),o[1]=t[1]+r[1]*(e[1]-t[1]),o[2]=t[2]+r[2]*(e[2]-t[2]),o},length:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},lengthSq:function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},max:function(t,e,r){return(r=r||new n(3))[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r[2]=Math.max(t[2],e[2]),r},min:function(t,e,r){return(r=r||new n(3))[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.min(t[2],e[2]),r},mulScalar:function(t,e,r){return(r=r||new n(3))[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r},multiply:c,negate:function(t,e){return(e=e||new n(3))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},normalize:s,setDefaultType:function(t){const e=n;return n=t,e},subtract:i});let l,h,m,d=Float32Array;function b(t,e){return(e=e||new d(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(t){return(t=t||new d(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function y(t,e){e=e||new d(16);const r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],m=t[11],b=t[12],p=t[13],y=t[14],M=t[15],v=h*M,x=y*m,g=s*M,A=y*c,w=s*m,F=h*c,_=o*M,E=y*a,P=o*m,T=h*a,S=o*c,I=s*a,z=f*p,B=b*l,R=i*p,O=b*u,C=i*l,k=f*u,D=r*p,U=b*n,j=r*l,L=f*n,q=r*u,V=i*n,W=v*u+A*l+w*p-(x*u+g*l+F*p),G=x*n+_*l+T*p-(v*n+E*l+P*p),$=g*n+E*u+S*p-(A*n+_*u+I*p),N=F*n+P*u+I*l-(w*n+T*u+S*l),X=1/(r*W+i*G+f*$+b*N);return e[0]=X*W,e[1]=X*G,e[2]=X*$,e[3]=X*N,e[4]=X*(x*i+g*f+F*b-(v*i+A*f+w*b)),e[5]=X*(v*r+E*f+P*b-(x*r+_*f+T*b)),e[6]=X*(A*r+_*i+I*b-(g*r+E*i+S*b)),e[7]=X*(w*r+T*i+S*f-(F*r+P*i+I*f)),e[8]=X*(z*c+O*m+C*M-(B*c+R*m+k*M)),e[9]=X*(B*a+D*m+L*M-(z*a+U*m+j*M)),e[10]=X*(R*a+U*c+q*M-(O*a+D*c+V*M)),e[11]=X*(k*a+j*c+V*m-(C*a+L*c+q*m)),e[12]=X*(R*h+k*y+B*s-(C*y+z*s+O*h)),e[13]=X*(j*y+z*o+U*h-(D*h+L*y+B*o)),e[14]=X*(D*s+V*y+O*o-(q*y+R*o+U*s)),e[15]=X*(q*h+C*o+L*s-(j*s+V*h+k*o)),e}function M(t,e,r){r=r||o();const n=e[0],a=e[1],i=e[2],u=n*t[3]+a*t[7]+i*t[11]+t[15];return r[0]=(n*t[0]+a*t[4]+i*t[8]+t[12])/u,r[1]=(n*t[1]+a*t[5]+i*t[9]+t[13])/u,r[2]=(n*t[2]+a*t[6]+i*t[10]+t[14])/u,r}function v(t,e,r){r=r||o();const n=e[0],a=e[1],i=e[2];return r[0]=n*t[0]+a*t[4]+i*t[8],r[1]=n*t[1]+a*t[5]+i*t[9],r[2]=n*t[2]+a*t[6]+i*t[10],r}var x=Object.freeze({__proto__:null,axisRotate:function(t,e,r,n){n=n||new d(16);let o=e[0],a=e[1],i=e[2];const u=Math.sqrt(o*o+a*a+i*i);o/=u,a/=u,i/=u;const s=o*o,c=a*a,f=i*i,l=Math.cos(r),h=Math.sin(r),m=1-l,b=s+(1-s)*l,p=o*a*m+i*h,y=o*i*m-a*h,M=o*a*m-i*h,v=c+(1-c)*l,x=a*i*m+o*h,g=o*i*m+a*h,A=a*i*m-o*h,w=f+(1-f)*l,F=t[0],_=t[1],E=t[2],P=t[3],T=t[4],S=t[5],I=t[6],z=t[7],B=t[8],R=t[9],O=t[10],C=t[11];return n[0]=b*F+p*T+y*B,n[1]=b*_+p*S+y*R,n[2]=b*E+p*I+y*O,n[3]=b*P+p*z+y*C,n[4]=M*F+v*T+x*B,n[5]=M*_+v*S+x*R,n[6]=M*E+v*I+x*O,n[7]=M*P+v*z+x*C,n[8]=g*F+A*T+w*B,n[9]=g*_+A*S+w*R,n[10]=g*E+A*I+w*O,n[11]=g*P+A*z+w*C,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},axisRotation:function(t,e,r){r=r||new d(16);let n=t[0],o=t[1],a=t[2];const i=Math.sqrt(n*n+o*o+a*a);n/=i,o/=i,a/=i;const u=n*n,s=o*o,c=a*a,f=Math.cos(e),l=Math.sin(e),h=1-f;return r[0]=u+(1-u)*f,r[1]=n*o*h+a*l,r[2]=n*a*h-o*l,r[3]=0,r[4]=n*o*h-a*l,r[5]=s+(1-s)*f,r[6]=o*a*h+n*l,r[7]=0,r[8]=n*a*h+o*l,r[9]=o*a*h-n*l,r[10]=c+(1-c)*f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},copy:b,create:function(){return new d(16).fill(0)},frustum:function(t,e,r,n,o,a,i){const u=e-t,s=n-r,c=o-a;return(i=i||new d(16))[0]=2*o/u,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*o/s,i[6]=0,i[7]=0,i[8]=(t+e)/u,i[9]=(n+r)/s,i[10]=a/c,i[11]=-1,i[12]=0,i[13]=0,i[14]=o*a/c,i[15]=0,i},getAxis:function(t,e,r){const n=4*e;return(r=r||o())[0]=t[n+0],r[1]=t[n+1],r[2]=t[n+2],r},getTranslation:function(t,e){return(e=e||o())[0]=t[12],e[1]=t[13],e[2]=t[14],e},identity:p,inverse:y,lookAt:function(t,e,r,n){return n=n||new d(16),l=l||o(),h=h||o(),m=m||o(),s(i(t,e,m),m),s(u(r,m,l),l),s(u(m,l,h),h),n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=0,n[4]=h[0],n[5]=h[1],n[6]=h[2],n[7]=0,n[8]=m[0],n[9]=m[1],n[10]=m[2],n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n},multiply:function(t,e,r){r=r||new d(16);const n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=t[8],h=t[9],m=t[10],b=t[11],p=t[12],y=t[13],M=t[14],v=t[15],x=e[0],g=e[1],A=e[2],w=e[3],F=e[4],_=e[5],E=e[6],P=e[7],T=e[8],S=e[9],I=e[10],z=e[11],B=e[12],R=e[13],O=e[14],C=e[15];return r[0]=n*x+u*g+l*A+p*w,r[1]=o*x+s*g+h*A+y*w,r[2]=a*x+c*g+m*A+M*w,r[3]=i*x+f*g+b*A+v*w,r[4]=n*F+u*_+l*E+p*P,r[5]=o*F+s*_+h*E+y*P,r[6]=a*F+c*_+m*E+M*P,r[7]=i*F+f*_+b*E+v*P,r[8]=n*T+u*S+l*I+p*z,r[9]=o*T+s*S+h*I+y*z,r[10]=a*T+c*S+m*I+M*z,r[11]=i*T+f*S+b*I+v*z,r[12]=n*B+u*R+l*O+p*C,r[13]=o*B+s*R+h*O+y*C,r[14]=a*B+c*R+m*O+M*C,r[15]=i*B+f*R+b*O+v*C,r},negate:function(t,e){return(e=e||new d(16))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},ortho:function(t,e,r,n,o,a,i){return(i=i||new d(16))[0]=2/(e-t),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(n-r),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(o-a),i[11]=0,i[12]=(e+t)/(t-e),i[13]=(n+r)/(r-n),i[14]=(a+o)/(o-a),i[15]=1,i},perspective:function(t,e,r,n,o){o=o||new d(16);const a=Math.tan(.5*Math.PI-.5*t),i=1/(r-n);return o[0]=a/e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(r+n)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=r*n*i*2,o[15]=0,o},rotateX:function(t,e,r){r=r||new d(16);const n=t[4],o=t[5],a=t[6],i=t[7],u=t[8],s=t[9],c=t[10],f=t[11],l=Math.cos(e),h=Math.sin(e);return r[4]=l*n+h*u,r[5]=l*o+h*s,r[6]=l*a+h*c,r[7]=l*i+h*f,r[8]=l*u-h*n,r[9]=l*s-h*o,r[10]=l*c-h*a,r[11]=l*f-h*i,t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},rotateY:function(t,e,r){r=r||new d(16);const n=t[0],o=t[1],a=t[2],i=t[3],u=t[8],s=t[9],c=t[10],f=t[11],l=Math.cos(e),h=Math.sin(e);return r[0]=l*n-h*u,r[1]=l*o-h*s,r[2]=l*a-h*c,r[3]=l*i-h*f,r[8]=l*u+h*n,r[9]=l*s+h*o,r[10]=l*c+h*a,r[11]=l*f+h*i,t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},rotateZ:function(t,e,r){r=r||new d(16);const n=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],l=Math.cos(e),h=Math.sin(e);return r[0]=l*n+h*u,r[1]=l*o+h*s,r[2]=l*a+h*c,r[3]=l*i+h*f,r[4]=l*u-h*n,r[5]=l*s-h*o,r[6]=l*c-h*a,r[7]=l*f-h*i,t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},rotationX:function(t,e){e=e||new d(16);const r=Math.cos(t),n=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationY:function(t,e){e=e||new d(16);const r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationZ:function(t,e){e=e||new d(16);const r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},scale:function(t,e,r){r=r||new d(16);const n=e[0],o=e[1],a=e[2];return r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=n*t[3],r[4]=o*t[4],r[5]=o*t[5],r[6]=o*t[6],r[7]=o*t[7],r[8]=a*t[8],r[9]=a*t[9],r[10]=a*t[10],r[11]=a*t[11],t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},scaling:function(t,e){return(e=e||new d(16))[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},setAxis:function(t,e,r,n){n!==t&&(n=b(t,n));const o=4*r;return n[o+0]=e[0],n[o+1]=e[1],n[o+2]=e[2],n},setDefaultType:function(t){const e=d;return d=t,e},setTranslation:function(t,e,r){return t!==(r=r||p())&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11]),r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r},transformDirection:v,transformNormal:function(t,e,r){r=r||o();const n=y(t),a=e[0],i=e[1],u=e[2];return r[0]=a*n[0]+i*n[1]+u*n[2],r[1]=a*n[4]+i*n[5]+u*n[6],r[2]=a*n[8]+i*n[9]+u*n[10],r},transformPoint:M,translate:function(t,e,r){r=r||new d(16);const n=e[0],o=e[1],a=e[2],i=t[0],u=t[1],s=t[2],c=t[3],f=t[4],l=t[5],h=t[6],m=t[7],b=t[8],p=t[9],y=t[10],M=t[11],v=t[12],x=t[13],g=t[14],A=t[15];return t!==r&&(r[0]=i,r[1]=u,r[2]=s,r[3]=c,r[4]=f,r[5]=l,r[6]=h,r[7]=m,r[8]=b,r[9]=p,r[10]=y,r[11]=M),r[12]=i*n+f*o+b*a+v,r[13]=u*n+l*o+p*a+x,r[14]=s*n+h*o+y*a+g,r[15]=c*n+m*o+M*a+A,r},translation:function(t,e){return(e=e||new d(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},transpose:function(t,e){if((e=e||new d(16))===t){let r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,e}const r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],m=t[11],b=t[12],p=t[13],y=t[14],M=t[15];return e[0]=r,e[1]=i,e[2]=f,e[3]=b,e[4]=n,e[5]=u,e[6]=l,e[7]=p,e[8]=o,e[9]=s,e[10]=h,e[11]=y,e[12]=a,e[13]=c,e[14]=m,e[15]=M,e}});const g=5120,A=5121,w=5122,F=5123,_=5124,E=5125,P=5126,T={};{const t=T;t[g]=Int8Array,t[A]=Uint8Array,t[w]=Int16Array,t[F]=Uint16Array,t[_]=Int32Array,t[E]=Uint32Array,t[P]=Float32Array,t[32819]=Uint16Array,t[32820]=Uint16Array,t[33635]=Uint16Array,t[5131]=Uint16Array,t[33640]=Uint32Array,t[35899]=Uint32Array,t[35902]=Uint32Array,t[36269]=Uint32Array,t[34042]=Uint32Array}function S(t){if(t instanceof Int8Array)return g;if(t instanceof Uint8Array)return A;if(t instanceof Uint8ClampedArray)return A;if(t instanceof Int16Array)return w;if(t instanceof Uint16Array)return F;if(t instanceof Int32Array)return _;if(t instanceof Uint32Array)return E;if(t instanceof Float32Array)return P;throw new Error("unsupported typed array type")}function I(t){if(t===Int8Array)return g;if(t===Uint8Array)return A;if(t===Uint8ClampedArray)return A;if(t===Int16Array)return w;if(t===Uint16Array)return F;if(t===Int32Array)return _;if(t===Uint32Array)return E;if(t===Float32Array)return P;throw new Error("unsupported typed array type")}function z(t){const e=T[t];if(!e)throw new Error("unknown gl type");return e}const B="undefined"!=typeof SharedArrayBuffer?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};var R=Object.freeze({__proto__:null,getGLTypeForTypedArray:S,getGLTypeForTypedArrayType:I,getTypedArrayTypeForGLType:z,isArrayBuffer:B});function O(t,e){Object.keys(e).forEach((function(r){e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(e[r]=t[r])}))}function C(...t){console.error(...t)}function k(...t){console.warn(...t)}const D=new Map;function U(t,e){if(!t||"object"!=typeof t)return!1;let r=D.get(e);r||(r=new WeakMap,D.set(e,r));let n=r.get(t);if(void 0===n){const o=Object.prototype.toString.call(t);n=o.substring(8,o.length-1)===e,r.set(t,n)}return n}function j(t,e){return"undefined"!=typeof WebGLRenderbuffer&&U(e,"WebGLRenderbuffer")}function L(t,e){return"undefined"!=typeof WebGLTexture&&U(e,"WebGLTexture")}const q=35044,V=34962,W=34963,G=34660,$=5120,N=5121,X=5122,Y=5123,H=5124,Q=5125,Z=5126,K={attribPrefix:""};function J(t){K.attribPrefix=t}function tt(t){O(t,K)}function et(t,e,r,n,o){t.bindBuffer(e,r),t.bufferData(e,n,o||q)}function rt(t,e,r,n){if("undefined"!=typeof WebGLBuffer&&U(e,"WebGLBuffer"))return e;r=r||V;const o=t.createBuffer();return et(t,r,o,e,n),o}function nt(t){return"indices"===t}function ot(t){return t.length?t:t.data}const at=/coord|texture/i,it=/color|colour/i;function ut(t,e,r){return t.numComponents||t.size||function(t,e){let r;if(r=at.test(t)?2:it.test(t)?4:3,e%r>0)throw new Error(`Can not guess numComponents for attribute '${t}'. Tried ${r} but ${e} values is not evenly divisible by ${r}. You should specify it.`);return r}(e,r||ot(t).length)}function st(t,e){if(B(t))return t;if(B(t.data))return t.data;Array.isArray(t)&&(t={data:t});let r=t.type?ct(t.type):void 0;return r||(r=nt(e)?Uint16Array:Float32Array),new r(t.data)}function ct(t){return"number"==typeof t?z(t):t||Float32Array}function ft(t,e){return{buffer:e.buffer,numValues:24,type:(r=e.type,"number"==typeof r?r:r?I(r):Z),arrayType:ct(e.type)};var r}function lt(t,e){const r=e.data||e,n=ct(e.type),o=r*n.BYTES_PER_ELEMENT,a=t.createBuffer();return t.bindBuffer(V,a),t.bufferData(V,o,e.drawType||q),{buffer:a,numValues:r,type:I(n),arrayType:n}}function ht(t,e,r){const n=st(e,r);return{arrayType:n.constructor,buffer:rt(t,n,void 0,e.drawType),type:S(n),numValues:0}}function mt(t,e){const r={};return Object.keys(e).forEach((function(n){if(!nt(n)){const a=e[n],i=a.attrib||a.name||a.attribName||K.attribPrefix+n;if(a.value){if(!Array.isArray(a.value)&&!B(a.value))throw new Error("array.value is not array or typedarray");r[i]={value:a.value}}else{let e;e=a.buffer&&a.buffer instanceof WebGLBuffer?ft:"number"==typeof a||"number"==typeof a.data?lt:ht;const{buffer:u,type:s,numValues:c,arrayType:f}=e(t,a,n),l=void 0!==a.normalize?a.normalize:(o=f)===Int8Array||o===Uint8Array,h=ut(a,n,c);r[i]={buffer:u,numComponents:h,type:s,normalize:l,stride:a.stride||0,offset:a.offset||0,divisor:void 0===a.divisor?void 0:a.divisor,drawType:a.drawType}}}var o})),t.bindBuffer(V,null),r}function dt(t,e,r,n){r=st(r),void 0!==n?(t.bindBuffer(V,e.buffer),t.bufferSubData(V,n,r)):et(t,V,e.buffer,r,e.drawType)}const bt=["position","positions","a_position"];function pt(t,e,r){const n=mt(t,e),o=Object.assign({},r||{});o.attribs=Object.assign({},r?r.attribs:{},n);const a=e.indices;if(a){const e=st(a,"indices");o.indices=rt(t,e,W),o.numElements=e.length,o.elementType=S(e)}else o.numElements||(o.numElements=function(t,e){let r,n;for(n=0;n<bt.length&&(r=bt[n],!(r in e))&&(r=K.attribPrefix+r,!(r in e));++n);n===bt.length&&(r=Object.keys(e)[0]);const o=e[r];if(!o.buffer)return 1;t.bindBuffer(V,o.buffer);const a=t.getBufferParameter(V,G);var i;t.bindBuffer(V,null);const u=a/((i=o.type)===$||i===N?1:i===X||i===Y?2:i===H||i===Q||i===Z?4:0),s=o.numComponents||o.size,c=u/s;if(c%1!=0)throw new Error(`numComponents ${s} not correct for length ${length}`);return c}(t,o.attribs));return o}function yt(t,e,r){const n="indices"===r?W:V;return rt(t,st(e,r),n)}function Mt(t,e){const r={};return Object.keys(e).forEach((function(n){r[n]=yt(t,e[n],n)})),e.indices?(r.numElements=e.indices.length,r.elementType=S(st(e.indices))):r.numElements=function(t){let e,r;for(r=0;r<bt.length&&(e=bt[r],!(e in t));++r);r===bt.length&&(e=Object.keys(t)[0]);const n=t[e],o=ot(n).length;if(void 0===o)return 1;const a=ut(n,e),i=o/a;if(o%a>0)throw new Error(`numComponents ${a} not correct for length ${o}`);return i}(e),r}var vt=Object.freeze({__proto__:null,createAttribsFromArrays:mt,createBuffersFromArrays:Mt,createBufferFromArray:yt,createBufferFromTypedArray:rt,createBufferInfoFromArrays:pt,setAttribInfoBufferFromArray:dt,setAttributePrefix:J,setAttributeDefaults_:tt,getNumComponents_:ut,getArray_:ot});const xt=ot,gt=ut;function At(t,e){let r=0;return t.push=function(){for(let e=0;e<arguments.length;++e){const n=arguments[e];if(n instanceof Array||B(n))for(let e=0;e<n.length;++e)t[r++]=n[e];else t[r++]=n}},t.reset=function(t){r=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function wt(t,e,r){return At(new(r||Float32Array)(t*e),t)}function Ft(t){return"indices"!==t}function _t(t,e,r){const n=t.length,o=new Float32Array(3);for(let a=0;a<n;a+=3)r(e,[t[a],t[a+1],t[a+2]],o),t[a]=o[0],t[a+1]=o[1],t[a+2]=o[2]}function Et(t,e,r){r=r||o();const n=e[0],a=e[1],i=e[2];return r[0]=n*t[0]+a*t[1]+i*t[2],r[1]=n*t[4]+a*t[5]+i*t[6],r[2]=n*t[8]+a*t[9]+i*t[10],r}function Pt(t,e){return _t(t,e,v),t}function Tt(t,e){return _t(t,y(e),Et),t}function St(t,e){return _t(t,e,M),t}function It(t,e){return Object.keys(t).forEach((function(r){const n=t[r];r.indexOf("pos")>=0?St(n,e):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?Pt(n,e):r.indexOf("norm")>=0&&Tt(n,e)})),t}function zt(t,e,r){return t=t||2,{position:{numComponents:2,data:[(e=e||0)+-1*(t*=.5),(r=r||0)+-1*t,e+1*t,r+-1*t,e+-1*t,r+1*t,e+1*t,r+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function Bt(t,e,r,n,o){t=t||1,e=e||1,r=r||1,n=n||1,o=o||p();const a=(r+1)*(n+1),i=wt(3,a),u=wt(3,a),s=wt(2,a);for(let o=0;o<=n;o++)for(let a=0;a<=r;a++){const c=a/r,f=o/n;i.push(t*c-.5*t,0,e*f-.5*e),u.push(0,1,0),s.push(c,f)}const c=r+1,f=wt(3,r*n*2,Uint16Array);for(let t=0;t<n;t++)for(let e=0;e<r;e++)f.push((t+0)*c+e,(t+1)*c+e,(t+0)*c+e+1),f.push((t+1)*c+e,(t+1)*c+e+1,(t+0)*c+e+1);return It({position:i,normal:u,texcoord:s,indices:f},o)}function Rt(t,e,r,n,o,a,i){if(e<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,a=a||0;const u=(o=o||Math.PI)-n,s=(i=i||2*Math.PI)-a,c=(e+1)*(r+1),f=wt(3,c),l=wt(3,c),h=wt(2,c);for(let o=0;o<=r;o++)for(let i=0;i<=e;i++){const c=i/e,m=o/r,d=s*c+a,b=u*m+n,p=Math.sin(d),y=Math.cos(d),M=Math.sin(b),v=y*M,x=Math.cos(b),g=p*M;f.push(t*v,t*x,t*g),l.push(v,x,g),h.push(1-c,m)}const m=e+1,d=wt(3,e*r*2,Uint16Array);for(let t=0;t<e;t++)for(let e=0;e<r;e++)d.push((e+0)*m+t,(e+0)*m+t+1,(e+1)*m+t),d.push((e+1)*m+t,(e+0)*m+t+1,(e+1)*m+t+1);return{position:f,normal:l,texcoord:h,indices:d}}const Ot=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function Ct(t){const e=(t=t||1)/2,r=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],a=wt(3,24),i=wt(3,24),u=wt(2,24),s=wt(3,12,Uint16Array);for(let t=0;t<6;++t){const e=Ot[t];for(let s=0;s<4;++s){const c=r[e[s]],f=n[t],l=o[s];a.push(c),i.push(f),u.push(l)}const c=4*t;s.push(c+0,c+1,c+2),s.push(c+0,c+2,c+3)}return{position:a,normal:i,texcoord:u,indices:s}}function kt(t,e,r,n,o,a,i){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");const u=void 0===a||a,s=void 0===i||i,c=(u?2:0)+(s?2:0),f=(n+1)*(o+1+c),l=wt(3,f),h=wt(3,f),m=wt(2,f),d=wt(3,n*(o+c/2)*2,Uint16Array),b=n+1,p=Math.atan2(t-e,r),y=Math.cos(p),M=Math.sin(p),v=o+(s?2:0);for(let a=u?-2:0;a<=v;++a){let i,u=a/o,s=r*u;a<0?(s=0,u=1,i=t):a>o?(s=r,u=1,i=e):i=t+a/o*(e-t),-2!==a&&a!==o+2||(i=0,u=0),s-=r/2;for(let t=0;t<b;++t){const e=Math.sin(t*Math.PI*2/n),r=Math.cos(t*Math.PI*2/n);l.push(e*i,s,r*i),a<0?h.push(0,-1,0):a>o?h.push(0,1,0):0===i?h.push(0,0,0):h.push(e*y,M,r*y),m.push(t/n,1-u)}}for(let t=0;t<o+c;++t)if(!(1===t&&u||t===o+c-2&&s))for(let e=0;e<n;++e)d.push(b*(t+0)+0+e,b*(t+0)+1+e,b*(t+1)+1+e),d.push(b*(t+0)+0+e,b*(t+1)+1+e,b*(t+1)+0+e);return{position:l,normal:h,texcoord:m,indices:d}}function Dt(t,e){e=e||[];const r=[];for(let n=0;n<t.length;n+=4){const o=t[n],a=t.slice(n+1,n+4);a.push.apply(a,e);for(let t=0;t<o;++t)r.push.apply(r,a)}return r}function Ut(){const t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=Dt([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=Dt([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=t.length/3,o={position:wt(3,n),texcoord:wt(2,n),normal:wt(3,n),color:wt(4,n,Uint8Array),indices:wt(3,n/3,Uint16Array)};o.position.push(t),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(e),o.color.push(r);for(let t=0;t<n;++t)o.indices.push(t);return o}function jt(t,e,r,n,o,i,u){if(o<=0)throw new Error("subdivisionDown must be > 0");const s=(u=u||1)-(i=i||0),f=2*(o+1)*4,l=wt(3,f),h=wt(3,f),m=wt(2,f);function d(t,e,r){return t+(e-t)*r}function b(e,r,u,f,b,p){for(let y=0;y<=o;y++){const M=r/1,v=y/o,x=2*(M-.5),g=(i+v*s)*Math.PI,A=Math.sin(g),w=Math.cos(g),F=d(t,e,A),_=x*n,E=w*t,P=A*F;l.push(_,E,P);const T=a(c([0,A,w],u),f);h.push(T),m.push(M*b+p,v)}}for(let t=0;t<2;t++){const n=2*(t/1-.5);b(e,t,[1,1,1],[0,0,0],1,0),b(e,t,[0,0,0],[n,0,0],0,0),b(r,t,[1,1,1],[0,0,0],1,0),b(r,t,[0,0,0],[n,0,0],0,1)}const p=wt(3,2*o*4,Uint16Array);function y(t,e){for(let r=0;r<o;++r)p.push(t+r+0,t+r+1,e+r+0),p.push(t+r+1,e+r+1,e+r+0)}const M=o+1;return y(0*M,4*M),y(5*M,7*M),y(6*M,2*M),y(3*M,1*M),{position:l,normal:h,texcoord:m,indices:p}}function Lt(t,e,r,n,o,a){return kt(t,t,e,r,n,o,a)}function qt(t,e,r,n,o,a){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0;const i=(a=a||2*Math.PI)-o,u=r+1,s=n+1,c=u*s,f=wt(3,c),l=wt(3,c),h=wt(2,c),m=wt(3,r*n*2,Uint16Array);for(let a=0;a<s;++a){const s=a/n,c=s*Math.PI*2,m=Math.sin(c),d=t+m*e,b=Math.cos(c),p=b*e;for(let t=0;t<u;++t){const e=t/r,n=o+e*i,a=Math.sin(n),u=Math.cos(n),c=a*d,y=u*d,M=a*m,v=u*m;f.push(c,p,y),l.push(M,b,v),h.push(e,1-s)}}for(let t=0;t<n;++t)for(let e=0;e<r;++e){const r=1+e,n=1+t;m.push(u*t+e,u*n+e,u*t+r),m.push(u*n+e,u*n+r,u*t+r)}return{position:f,normal:l,texcoord:h,indices:m}}function Vt(t,e,r,n,o){if(e<3)throw new Error("divisions must be at least 3");o=o||1,n=n||0;const a=(e+1)*((r=r||1)+1),i=wt(3,a),u=wt(3,a),s=wt(2,a),c=wt(3,r*e*2,Uint16Array);let f=0;const l=t-n,h=e+1;for(let t=0;t<=r;++t){const a=n+l*Math.pow(t/r,o);for(let n=0;n<=e;++n){const o=2*Math.PI*n/e,l=a*Math.cos(o),m=a*Math.sin(o);if(i.push(l,0,m),u.push(0,1,0),s.push(1-n/e,t/r),t>0&&n!==e){const t=f+(n+1),e=f+n,r=f+n-h,o=f+(n+1)-h;c.push(t,e,r),c.push(t,r,o)}}f+=e+1}return{position:i,normal:u,texcoord:s,indices:c}}function Wt(t){return function(e){return Mt(e,t.apply(this,Array.prototype.slice.call(arguments,1)))}}function Gt(t){return function(e){return pt(e,t.apply(null,Array.prototype.slice.call(arguments,1)))}}const $t=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function Nt(t,e,r,n){n=n||0;const o=t.length;for(let a=0;a<o;++a)e[r+a]=t[a]+n}function Xt(t,e){const r=xt(t),n=new r.constructor(e);let o=n;var a,i;return r.numComponents&&r.numElements&&At(n,r.numComponents),t.data&&(o={data:n},a=t,i=o,$t.forEach((function(t){const e=a[t];void 0!==e&&(i[t]=e)}))),o}const Yt=Gt(Ut),Ht=Wt(Ut),Qt=Gt(Ct),Zt=Wt(Ct),Kt=Gt(Bt),Jt=Wt(Bt),te=Gt(Rt),ee=Wt(Rt),re=Gt(kt),ne=Wt(kt),oe=Gt(zt),ae=Wt(zt),ie=Gt(jt),ue=Wt(jt),se=Gt(Lt),ce=Wt(Lt),fe=Gt(qt),le=Wt(qt),he=Gt(Vt),me=Wt(Vt),de=ie,be=ue,pe=jt;var ye=Object.freeze({__proto__:null,create3DFBufferInfo:Yt,create3DFBuffers:Ht,create3DFVertices:Ut,createAugmentedTypedArray:wt,createCubeBufferInfo:Qt,createCubeBuffers:Zt,createCubeVertices:Ct,createPlaneBufferInfo:Kt,createPlaneBuffers:Jt,createPlaneVertices:Bt,createSphereBufferInfo:te,createSphereBuffers:ee,createSphereVertices:Rt,createTruncatedConeBufferInfo:re,createTruncatedConeBuffers:ne,createTruncatedConeVertices:kt,createXYQuadBufferInfo:oe,createXYQuadBuffers:ae,createXYQuadVertices:zt,createCresentBufferInfo:de,createCresentBuffers:be,createCresentVertices:pe,createCrescentBufferInfo:ie,createCrescentBuffers:ue,createCrescentVertices:jt,createCylinderBufferInfo:se,createCylinderBuffers:ce,createCylinderVertices:Lt,createTorusBufferInfo:fe,createTorusBuffers:le,createTorusVertices:qt,createDiscBufferInfo:he,createDiscBuffers:me,createDiscVertices:Vt,deindexVertices:function(t){const e=t.indices,r={},n=e.length;return Object.keys(t).filter(Ft).forEach((function(o){const a=t[o],i=a.numComponents,u=wt(i,n,a.constructor);for(let t=0;t<n;++t){const r=e[t]*i;for(let t=0;t<i;++t)u.push(a[r+t])}r[o]=u})),r},flattenNormals:function(t){if(t.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const e=t.normal,r=e.length;for(let t=0;t<r;t+=9){const r=e[t+0],n=e[t+1],o=e[t+2],a=e[t+3],i=e[t+4],u=e[t+5];let s=r+a+e[t+6],c=n+i+e[t+7],f=o+u+e[t+8];const l=Math.sqrt(s*s+c*c+f*f);s/=l,c/=l,f/=l,e[t+0]=s,e[t+1]=c,e[t+2]=f,e[t+3]=s,e[t+4]=c,e[t+5]=f,e[t+6]=s,e[t+7]=c,e[t+8]=f}return t},makeRandomVertexColors:function(t,e){e=e||{};const r=t.position.numElements,n=wt(4,r,Uint8Array),o=e.rand||function(t,e){return e<3?(256,256*Math.random()|0):255};if(t.color=n,t.indices)for(let t=0;t<r;++t)n.push(o(t,0),o(t,1),o(t,2),o(t,3));else{const t=e.vertsPerColor||3,a=r/t;for(let e=0;e<a;++e){const r=[o(e,0),o(e,1),o(e,2),o(e,3)];for(let e=0;e<t;++e)n.push(r)}}return t},reorientDirections:Pt,reorientNormals:Tt,reorientPositions:St,reorientVertices:It,concatVertices:function(t){const e={};let r;for(let n=0;n<t.length;++n){const o=t[n];Object.keys(o).forEach((function(t){e[t]||(e[t]=[]),r||"indices"===t||(r=t);const n=o[t],a=gt(n,t),i=xt(n).length/a;e[t].push(i)}))}const n=e[r],o={};return Object.keys(e).forEach((function(e){const r=function(e){let r,n=0;for(let o=0;o<t.length;++o){const a=t[o][e];n+=xt(a).length,r&&!a.data||(r=a)}return{length:n,spec:r}}(e),a=Xt(r.spec,r.length);!function(e,r,n){let o=0,a=0;for(let i=0;i<t.length;++i){const u=t[i][e],s=xt(u);"indices"===e?(Nt(s,n,a,o),o+=r[i]):Nt(s,n,a),a+=s.length}}(e,n,xt(a)),o[e]=a})),o},duplicateVertices:function(t){const e={};return Object.keys(t).forEach((function(r){const n=t[r],o=xt(n),a=Xt(n,o.length);Nt(o,xt(a),0),e[r]=a})),e}});function Me(t){return!!t.texStorage2D}function ve(t){return!t.texStorage2D}const xe=function(){const t={},e={};return function(r,n){return function(r){const n=r.constructor.name;if(!t[n]){for(const t in r)if("number"==typeof r[t]){const n=e[r[t]];e[r[t]]=n?`${n} | ${t}`:t}t[n]=!0}}(r),e[n]||("number"==typeof n?`0x${n.toString(16)}`:n)}}();var ge=Object.freeze({__proto__:null,glEnumToString:xe,isWebGL1:ve,isWebGL2:Me});const Ae={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},we=B,Fe=function(){let t;return function(){return t=t||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null),t}}(),_e=6406,Ee=6407,Pe=6408,Te=6409,Se=6410,Ie=6402,ze=34041,Be=33071,Re=9728,Oe=9729,Ce=3553,ke=34067,De=32879,Ue=35866,je=34069,Le=34070,qe=34071,Ve=34072,We=34073,Ge=34074,$e=10241,Ne=10240,Xe=10242,Ye=10243,He=32882,Qe=33082,Ze=33083,Ke=33084,Je=33085,tr=34892,er=34893,rr=3317,nr=3314,or=32878,ar=3316,ir=3315,ur=32877,sr=37443,cr=37441,fr=37440,lr=33321,hr=36756,mr=33325,dr=33326,br=33330,pr=33329,yr=33338,Mr=33337,vr=33340,xr=33339,gr=33323,Ar=36757,wr=33327,Fr=33328,_r=33336,Er=33335,Pr=33332,Tr=33331,Sr=33334,Ir=33333,zr=32849,Br=35905,Rr=36194,Or=36758,Cr=35898,kr=35901,Dr=34843,Ur=34837,jr=36221,Lr=36239,qr=36215,Vr=36233,Wr=36209,Gr=36227,$r=32856,Nr=35907,Xr=36759,Yr=32855,Hr=32854,Qr=32857,Zr=34842,Kr=34836,Jr=36220,tn=36238,en=36975,rn=36214,nn=36232,on=36226,an=36208,un=33189,sn=33190,cn=36012,fn=36013,ln=35056,hn=5120,mn=5121,dn=5122,bn=5123,pn=5124,yn=5125,Mn=5126,vn=32819,xn=32820,gn=33635,An=5131,wn=36193,Fn=33640,_n=35899,En=35902,Pn=36269,Tn=34042,Sn=33319,In=33320,zn=6403,Bn=36244,Rn=36248,On=36249,Cn={};{const t=Cn;t[_e]={numColorComponents:1},t[Te]={numColorComponents:1},t[Se]={numColorComponents:2},t[Ee]={numColorComponents:3},t[Pe]={numColorComponents:4},t[zn]={numColorComponents:1},t[Bn]={numColorComponents:1},t[Sn]={numColorComponents:2},t[In]={numColorComponents:2},t[Ee]={numColorComponents:3},t[Rn]={numColorComponents:3},t[Pe]={numColorComponents:4},t[On]={numColorComponents:4},t[Ie]={numColorComponents:1},t[ze]={numColorComponents:2}}let kn;function Dn(t){if(!kn){const t={};t[_e]={textureFormat:_e,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[mn,An,wn,Mn]},t[Te]={textureFormat:Te,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[mn,An,wn,Mn]},t[Se]={textureFormat:Se,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[mn,An,wn,Mn]},t[Ee]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[mn,An,wn,Mn,gn]},t[Pe]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[mn,An,wn,Mn,vn,xn]},t[Ie]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[yn,bn]},t[lr]={textureFormat:zn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[mn]},t[hr]={textureFormat:zn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[hn]},t[mr]={textureFormat:zn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Mn,An]},t[dr]={textureFormat:zn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Mn]},t[br]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[mn]},t[pr]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[hn]},t[Pr]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[bn]},t[Tr]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[dn]},t[Sr]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yn]},t[Ir]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[pn]},t[gr]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[mn]},t[Ar]={textureFormat:Sn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[hn]},t[wr]={textureFormat:Sn,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Mn,An]},t[Fr]={textureFormat:Sn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Mn]},t[_r]={textureFormat:In,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[mn]},t[Er]={textureFormat:In,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[hn]},t[yr]={textureFormat:In,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[bn]},t[Mr]={textureFormat:In,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[dn]},t[vr]={textureFormat:In,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[yn]},t[xr]={textureFormat:In,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[pn]},t[zr]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[mn]},t[Br]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[mn]},t[Rr]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[mn,gn]},t[Or]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[hn]},t[Cr]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Mn,An,_n]},t[kr]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Mn,An,En]},t[Dr]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Mn,An]},t[Ur]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Mn]},t[jr]={textureFormat:Rn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[mn]},t[Lr]={textureFormat:Rn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[hn]},t[qr]={textureFormat:Rn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[bn]},t[Vr]={textureFormat:Rn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[dn]},t[Wr]={textureFormat:Rn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[yn]},t[Gr]={textureFormat:Rn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[pn]},t[$r]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[mn]},t[Nr]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[mn]},t[Xr]={textureFormat:Pe,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[hn]},t[Yr]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[mn,xn,Fn]},t[Hr]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[mn,vn]},t[Qr]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Fn]},t[Zr]={textureFormat:Pe,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Mn,An]},t[Kr]={textureFormat:Pe,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Mn]},t[Jr]={textureFormat:On,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[mn]},t[tn]={textureFormat:On,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[hn]},t[en]={textureFormat:On,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Fn]},t[rn]={textureFormat:On,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[bn]},t[nn]={textureFormat:On,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[dn]},t[on]={textureFormat:On,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[pn]},t[an]={textureFormat:On,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[yn]},t[un]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[bn,yn]},t[sn]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yn]},t[cn]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Mn]},t[ln]={textureFormat:ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Tn]},t[fn]={textureFormat:ze,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Pn]},Object.keys(t).forEach((function(e){const r=t[e];r.bytesPerElementMap={},r.bytesPerElement.forEach((function(t,e){const n=r.type[e];r.bytesPerElementMap[n]=t}))})),kn=t}return kn[t]}function Un(t,e){const r=Dn(t);if(!r)throw"unknown internal format";const n=r.bytesPerElementMap[e];if(void 0===n)throw"unknown internal format";return n}function jn(t){const e=Dn(t);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function Ln(t){return 0==(t&t-1)}function qn(t,e,r,n){if(!Me(t))return Ln(e)&&Ln(r);const o=Dn(n);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function Vn(t){const e=Dn(t);if(!e)throw"unknown internal format";return e.textureFilterable}function Wn(t){const e=Cn[t];if(!e)throw"unknown format: "+t;return e.numColorComponents}function Gn(t,e,r){return we(e)?S(e):r||mn}function $n(t,e,r,n,o){if(o%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=o/n)%1)throw"can't guess dimensions"}else if((n=o/r)%1)throw"can't guess dimensions"}else{const t=Math.sqrt(o/(e===ke?6:1));t%1==0?(r=t,n=t):(r=o,n=1)}return{width:r,height:n}}function Nn(t){Ae.textureColor=new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}function Xn(t){O(t,Ae),t.textureColor&&Nn(t.textureColor)}function Yn(t,e){void 0!==e.colorspaceConversion&&t.pixelStorei(sr,e.colorspaceConversion),void 0!==e.premultiplyAlpha&&t.pixelStorei(cr,e.premultiplyAlpha),void 0!==e.flipY&&t.pixelStorei(fr,e.flipY)}function Hn(t){t.pixelStorei(rr,4),Me(t)&&(t.pixelStorei(nr,0),t.pixelStorei(or,0),t.pixelStorei(ar,0),t.pixelStorei(ir,0),t.pixelStorei(ur,0))}function Qn(t,e,r,n){n.minMag&&(r.call(t,e,$e,n.minMag),r.call(t,e,Ne,n.minMag)),n.min&&r.call(t,e,$e,n.min),n.mag&&r.call(t,e,Ne,n.mag),n.wrap&&(r.call(t,e,Xe,n.wrap),r.call(t,e,Ye,n.wrap),(e===De||"undefined"!=typeof WebGLSampler&&U(e,"WebGLSampler"))&&r.call(t,e,He,n.wrap)),n.wrapR&&r.call(t,e,He,n.wrapR),n.wrapS&&r.call(t,e,Xe,n.wrapS),n.wrapT&&r.call(t,e,Ye,n.wrapT),void 0!==n.minLod&&r.call(t,e,Qe,n.minLod),void 0!==n.maxLod&&r.call(t,e,Ze,n.maxLod),void 0!==n.baseLevel&&r.call(t,e,Ke,n.baseLevel),void 0!==n.maxLevel&&r.call(t,e,Je,n.maxLevel),void 0!==n.compareFunc&&r.call(t,e,er,n.compareFunc),void 0!==n.compareMode&&r.call(t,e,tr,n.compareMode)}function Zn(t,e,r){const n=r.target||Ce;t.bindTexture(n,e),Qn(t,n,t.texParameteri,r)}function Kn(t,e,r){Qn(t,e,t.samplerParameteri,r)}function Jn(t,e){const r=t.createSampler();return Kn(t,r,e),r}function to(t,e){const r={};return Object.keys(e).forEach((function(n){r[n]=Jn(t,e[n])})),r}function eo(t,e,r,n,o,a){r=r||Ae.textureOptions,a=a||Pe;const i=r.target||Ce;if(n=n||r.width,o=o||r.height,t.bindTexture(i,e),qn(t,n,o,a))t.generateMipmap(i);else{const e=Vn(a)?Oe:Re;t.texParameteri(i,$e,e),t.texParameteri(i,Ne,e),t.texParameteri(i,Xe,Be),t.texParameteri(i,Ye,Be)}}function ro(t){return!0===t.auto||void 0===t.auto&&void 0===t.level}function no(t,e){return(e=e||{}).cubeFaceOrder||[je,Le,qe,Ve,We,Ge]}function oo(t,e){const r=no(0,e).map((function(t,e){return{face:t,ndx:e}}));return r.sort((function(t,e){return t.face-e.face})),r}function ao(t,e,r,n){const o=(n=n||Ae.textureOptions).target||Ce,a=n.level||0;let i=r.width,u=r.height;const s=n.internalFormat||n.format||Pe,c=jn(s),f=n.format||c.format,l=n.type||c.type;if(Yn(t,n),t.bindTexture(o,e),o===ke){const c=r.width,h=r.height;let m,d;if(c/6===h)m=h,d=[0,0,1,0,2,0,3,0,4,0,5,0];else if(h/6===c)m=c,d=[0,0,0,1,0,2,0,3,0,4,0,5];else if(c/3==h/2)m=c/3,d=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(c/2!=h/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);m=c/2,d=[0,0,1,0,0,1,1,1,0,2,1,2]}const b=Fe();b?(b.canvas.width=m,b.canvas.height=m,i=m,u=m,oo(0,n).forEach((function(e){const n=d[2*e.ndx+0]*m,o=d[2*e.ndx+1]*m;b.drawImage(r,n,o,m,m,0,0,m,m),t.texImage2D(e.face,a,s,f,l,b.canvas)})),b.canvas.width=1,b.canvas.height=1):"undefined"!=typeof createImageBitmap&&(i=m,u=m,oo(0,n).forEach((function(c){const h=d[2*c.ndx+0]*m,b=d[2*c.ndx+1]*m;t.texImage2D(c.face,a,s,m,m,0,f,l,null),createImageBitmap(r,h,b,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(r){Yn(t,n),t.bindTexture(o,e),t.texImage2D(c.face,a,s,f,l,r),ro(n)&&eo(t,e,n,i,u,s)}))})))}else if(o===De||o===Ue){const e=Math.min(r.width,r.height),n=Math.max(r.width,r.height),i=n/e;if(i%1!=0)throw"can not compute 3D dimensions of element";const u=r.width===n?1:0,c=r.height===n?1:0;t.pixelStorei(rr,1),t.pixelStorei(nr,r.width),t.pixelStorei(or,0),t.pixelStorei(ur,0),t.texImage3D(o,a,s,e,e,e,0,f,l,null);for(let n=0;n<i;++n){const i=n*e*u,s=n*e*c;t.pixelStorei(ar,i),t.pixelStorei(ir,s),t.texSubImage3D(o,a,0,0,n,e,e,1,f,l,r)}Hn(t)}else t.texImage2D(o,a,s,f,l,r);ro(n)&&eo(t,e,n,i,u,s),Zn(t,e,n)}function io(){}function uo(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof ImageData&&t instanceof ImageData||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement}function so(t,e,r){return uo(t)?(setTimeout((function(){r(null,t)})),t):function(t,e,r){let n;if(r=r||io,e=void 0!==e?e:Ae.crossOrigin,e=function(t,e){return void 0!==e||function(t){if("undefined"!=typeof document){const e=document.createElement("a");return e.href=t,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}{const e=new URL(location.href).origin;return new URL(t,location.href).origin===e}}(t)?e:"anonymous"}(t,e),"undefined"!=typeof Image){n=new Image,void 0!==e&&(n.crossOrigin=e);const o=function(){n.removeEventListener("error",a),n.removeEventListener("load",i),n=null},a=function(){const e="couldn't load image: "+t;C(e),r(e,n),o()},i=function(){r(null,n),o()};return n.addEventListener("error",a),n.addEventListener("load",i),n.src=t,n}if("undefined"!=typeof ImageBitmap){let o,a;const i=function(){r(o,a)},u={};e&&(u.mode="cors"),fetch(t,u).then((function(t){if(!t.ok)throw t;return t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){a=t,setTimeout(i)})).catch((function(t){o=t,setTimeout(i)})),n=null}return n}(t,e,r)}function co(t,e,r){const n=(r=r||Ae.textureOptions).target||Ce;if(t.bindTexture(n,e),!1===r.color)return;const o=function(t){return t=t||Ae.textureColor,we(t)?t:new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}(r.color);if(n===ke)for(let e=0;e<6;++e)t.texImage2D(je+e,0,Pe,1,1,0,Pe,mn,o);else n===De||n===Ue?t.texImage3D(n,0,Pe,1,1,1,0,Pe,mn,o):t.texImage2D(n,0,Pe,1,1,0,Pe,mn,o)}function fo(t,e,r,n){return n=n||io,r=r||Ae.textureOptions,co(t,e,r),so((r=Object.assign({},r)).src,r.crossOrigin,(function(o,a){o?n(o,e,a):(ao(t,e,a,r),n(null,e,a))}))}function lo(t,e,r,n){const o=(n=n||Ae.textureOptions).target||Ce;t.bindTexture(o,e);let a=n.width,i=n.height,u=n.depth;const s=n.level||0,c=n.internalFormat||n.format||Pe,f=jn(c),l=n.format||f.format,h=n.type||Gn(0,r,f.type);if(we(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{const t=z(h);r=new t(r)}const m=Un(c,h),d=r.byteLength/m;if(d%1)throw"length wrong size for format: "+xe(t,l);let b;if(o===De||o===Ue)if(a||i||u)!a||i&&u?!i||a&&u?(b=$n(0,o,a,i,d/u),a=b.width,i=b.height):(b=$n(0,o,a,u,d/i),a=b.width,u=b.height):(b=$n(0,o,i,u,d/a),i=b.width,u=b.height);else{const t=Math.cbrt(d);if(t%1!=0)throw"can't guess cube size of array of numElements: "+d;a=t,i=t,u=t}else b=$n(0,o,a,i,d),a=b.width,i=b.height;if(Hn(t),t.pixelStorei(rr,n.unpackAlignment||1),Yn(t,n),o===ke){const e=d/6*(m/r.BYTES_PER_ELEMENT);oo(0,n).forEach((n=>{const o=e*n.ndx,u=r.subarray(o,o+e);t.texImage2D(n.face,s,c,a,i,0,l,h,u)}))}else o===De||o===Ue?t.texImage3D(o,s,c,a,i,u,0,l,h,r):t.texImage2D(o,s,c,a,i,0,l,h,r);return{width:a,height:i,depth:u,type:h}}function ho(t,e,r){const n=r.target||Ce;t.bindTexture(n,e);const o=r.level||0,a=r.internalFormat||r.format||Pe,i=jn(a),u=r.format||i.format,s=r.type||i.type;if(Yn(t,r),n===ke)for(let e=0;e<6;++e)t.texImage2D(je+e,o,a,r.width,r.height,0,u,s,null);else n===De||n===Ue?t.texImage3D(n,o,a,r.width,r.height,r.depth,0,u,s,null):t.texImage2D(n,o,a,r.width,r.height,0,u,s,null)}function mo(t,e,r){r=r||io,e=e||Ae.textureOptions;const n=t.createTexture(),o=e.target||Ce;let a=e.width||1,i=e.height||1;const u=e.internalFormat||Pe;t.bindTexture(o,n),o===ke&&(t.texParameteri(o,Xe,Be),t.texParameteri(o,Ye,Be));let s=e.src;if(s)if("function"==typeof s&&(s=s(t,e)),"string"==typeof s)fo(t,n,e,r);else if(we(s)||Array.isArray(s)&&("number"==typeof s[0]||Array.isArray(s[0])||we(s[0]))){const r=lo(t,n,s,e);a=r.width,i=r.height}else Array.isArray(s)&&("string"==typeof s[0]||uo(s[0]))?o===ke?function(t,e,r,n){n=n||io;const o=r.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";const a=r.level||0,i=r.internalFormat||r.format||Pe,u=jn(i),s=r.format||u.format,c=r.type||mn,f=r.target||Ce;if(f!==ke)throw"target must be TEXTURE_CUBE_MAP";co(t,e,r),r=Object.assign({},r);let l=6;const h=[],m=no(0,r);let d;d=o.map((function(o,u){return so(o,r.crossOrigin,(b=m[u],function(o,u){--l,o?h.push(o):u.width!==u.height?h.push("cubemap face img is not a square: "+u.src):(Yn(t,r),t.bindTexture(f,e),5===l?no().forEach((function(e){t.texImage2D(e,a,i,s,c,u)})):t.texImage2D(b,a,i,s,c,u),ro(r)&&t.generateMipmap(f)),0===l&&n(h.length?h:void 0,e,d)}));var b}))}(t,n,e,r):function(t,e,r,n){n=n||io;const o=r.src,a=r.internalFormat||r.format||Pe,i=jn(a),u=r.format||i.format,s=r.type||mn,c=r.target||Ue;if(c!==De&&c!==Ue)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";co(t,e,r),r=Object.assign({},r);let f=o.length;const l=[];let h;const m=r.level||0;let d=r.width,b=r.height;const p=o.length;let y=!0;h=o.map((function(o,i){return so(o,r.crossOrigin,(M=i,function(o,i){if(--f,o)l.push(o);else{if(Yn(t,r),t.bindTexture(c,e),y){y=!1,d=r.width||i.width,b=r.height||i.height,t.texImage3D(c,m,a,d,b,p,0,u,s,null);for(let e=0;e<p;++e)t.texSubImage3D(c,m,0,0,e,d,b,1,u,s,i)}else{let e,r=i;i.width===d&&i.height===b||(e=Fe(),r=e.canvas,e.canvas.width=d,e.canvas.height=b,e.drawImage(i,0,0,d,b)),t.texSubImage3D(c,m,0,0,M,d,b,1,u,s,r),e&&r===e.canvas&&(e.canvas.width=0,e.canvas.height=0)}ro(r)&&t.generateMipmap(c)}0===f&&n(l.length?l:void 0,e,h)}));var M}))}(t,n,e,r):(ao(t,n,s,e),a=s.width,i=s.height);else ho(t,n,e);return ro(e)&&eo(t,n,e,a,i,u),Zn(t,n,e),n}function bo(t,e,r,n,o,a){n=n||r.width,o=o||r.height,a=a||r.depth;const i=r.target||Ce;t.bindTexture(i,e);const u=r.level||0,s=r.internalFormat||r.format||Pe,c=jn(s),f=r.format||c.format;let l;const h=r.src;if(l=h&&(we(h)||Array.isArray(h)&&"number"==typeof h[0])?r.type||Gn(0,h,c.type):r.type||c.type,i===ke)for(let e=0;e<6;++e)t.texImage2D(je+e,u,s,n,o,0,f,l,null);else i===De||i===Ue?t.texImage3D(i,u,s,n,o,a,0,f,l,null):t.texImage2D(i,u,s,n,o,0,f,l,null)}function po(t,e,r){r=r||io;let n=0;const o=[],a={},i={};function u(){0===n&&setTimeout((function(){r(o.length?o:void 0,a,i)}),0)}return Object.keys(e).forEach((function(r){const s=e[r];let c;var f;("string"==typeof(f=s.src)||Array.isArray(f)&&"string"==typeof f[0])&&(c=function(t,e,a){i[r]=a,--n,t&&o.push(t),u()},++n),a[r]=mo(t,s,c)})),u(),a}var yo=Object.freeze({__proto__:null,setTextureDefaults_:Xn,createSampler:Jn,createSamplers:to,setSamplerParameters:Kn,createTexture:mo,setEmptyTexture:ho,setTextureFromArray:lo,loadTextureFromUrl:fo,setTextureFromElement:ao,setTextureFilteringForSize:eo,setTextureParameters:Zn,setDefaultTextureColor:Nn,createTextures:po,resizeTexture:bo,canGenerateMipmap:qn,canFilter:Vn,getNumComponentsForFormat:Wn,getBytesPerElementForInternalFormat:Un,getFormatAndTypeForInternalFormat:jn});const Mo=C,vo=k;function xo(t){return"undefined"!=typeof document&&document.getElementById?document.getElementById(t):null}const go=33984,Ao=35048,wo=34962,Fo=34963,_o=35345,Eo=35982,Po=36386,To=35713,So=35714,Io=35632,zo=35633,Bo=35981,Ro=35718,Oo=35721,Co=35971,ko=35382,Do=35396,Uo=35398,jo=35392,Lo=35395,qo=5124,Vo=3553,Wo=34067,Go=32879,$o=35866,No={};function Xo(t,e){return No[e].bindPoint}function Yo(t,e){return function(r){t.uniform1i(e,r)}}function Ho(t,e){return function(r){t.uniform1iv(e,r)}}function Qo(t,e){return function(r){t.uniform2iv(e,r)}}function Zo(t,e){return function(r){t.uniform3iv(e,r)}}function Ko(t,e){return function(r){t.uniform4iv(e,r)}}function Jo(t,e,r,n){const o=Xo(0,e);return Me(t)?function(e){let a,i;!e||L(0,e)?(a=e,i=null):(a=e.texture,i=e.sampler),t.uniform1i(n,r),t.activeTexture(go+r),t.bindTexture(o,a),t.bindSampler(r,i)}:function(e){t.uniform1i(n,r),t.activeTexture(go+r),t.bindTexture(o,e)}}function ta(t,e,r,n,o){const a=Xo(0,e),i=new Int32Array(o);for(let t=0;t<o;++t)i[t]=r+t;return Me(t)?function(e){t.uniform1iv(n,i),e.forEach((function(e,n){let o,u;t.activeTexture(go+i[n]),!e||L(0,e)?(o=e,u=null):(o=e.texture,u=e.sampler),t.bindSampler(r,u),t.bindTexture(a,o)}))}:function(e){t.uniform1iv(n,i),e.forEach((function(e,r){t.activeTexture(go+i[r]),t.bindTexture(a,e)}))}}function ea(t,e){return function(r){if(r.value)switch(t.disableVertexAttribArray(e),r.value.length){case 4:t.vertexAttrib4fv(e,r.value);break;case 3:t.vertexAttrib3fv(e,r.value);break;case 2:t.vertexAttrib2fv(e,r.value);break;case 1:t.vertexAttrib1fv(e,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else t.bindBuffer(wo,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,r.numComponents||r.size,r.type||5126,r.normalize||!1,r.stride||0,r.offset||0),t.vertexAttribDivisor&&t.vertexAttribDivisor(e,r.divisor||0)}}function ra(t,e){return function(r){if(r.value){if(t.disableVertexAttribArray(e),4!==r.value.length)throw new Error("The length of an integer constant value must be 4!");t.vertexAttrib4iv(e,r.value)}else t.bindBuffer(wo,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,r.numComponents||r.size,r.type||qo,r.stride||0,r.offset||0),t.vertexAttribDivisor&&t.vertexAttribDivisor(e,r.divisor||0)}}function na(t,e){return function(r){if(r.value){if(t.disableVertexAttribArray(e),4!==r.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");t.vertexAttrib4uiv(e,r.value)}else t.bindBuffer(wo,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,r.numComponents||r.size,r.type||5125,r.stride||0,r.offset||0),t.vertexAttribDivisor&&t.vertexAttribDivisor(e,r.divisor||0)}}function oa(t,e,r){const n=r.size,o=r.count;return function(r){t.bindBuffer(wo,r.buffer);const a=r.size||r.numComponents||n,i=a/o,u=r.type||5126,s=No[u].size*a,c=r.normalize||!1,f=r.offset||0,l=s/o;for(let n=0;n<o;++n)t.enableVertexAttribArray(e+n),t.vertexAttribPointer(e+n,i,u,c,s,f+l*n),t.vertexAttribDivisor&&t.vertexAttribDivisor(e+n,r.divisor||0)}}No[5126]={Type:Float32Array,size:4,setter:function(t,e){return function(r){t.uniform1f(e,r)}},arraySetter:function(t,e){return function(r){t.uniform1fv(e,r)}}},No[35664]={Type:Float32Array,size:8,setter:function(t,e){return function(r){t.uniform2fv(e,r)}},cols:2},No[35665]={Type:Float32Array,size:12,setter:function(t,e){return function(r){t.uniform3fv(e,r)}},cols:3},No[35666]={Type:Float32Array,size:16,setter:function(t,e){return function(r){t.uniform4fv(e,r)}},cols:4},No[qo]={Type:Int32Array,size:4,setter:Yo,arraySetter:Ho},No[35667]={Type:Int32Array,size:8,setter:Qo,cols:2},No[35668]={Type:Int32Array,size:12,setter:Zo,cols:3},No[35669]={Type:Int32Array,size:16,setter:Ko,cols:4},No[5125]={Type:Uint32Array,size:4,setter:function(t,e){return function(r){t.uniform1ui(e,r)}},arraySetter:function(t,e){return function(r){t.uniform1uiv(e,r)}}},No[36294]={Type:Uint32Array,size:8,setter:function(t,e){return function(r){t.uniform2uiv(e,r)}},cols:2},No[36295]={Type:Uint32Array,size:12,setter:function(t,e){return function(r){t.uniform3uiv(e,r)}},cols:3},No[36296]={Type:Uint32Array,size:16,setter:function(t,e){return function(r){t.uniform4uiv(e,r)}},cols:4},No[35670]={Type:Uint32Array,size:4,setter:Yo,arraySetter:Ho},No[35671]={Type:Uint32Array,size:8,setter:Qo,cols:2},No[35672]={Type:Uint32Array,size:12,setter:Zo,cols:3},No[35673]={Type:Uint32Array,size:16,setter:Ko,cols:4},No[35674]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix2fv(e,!1,r)}},rows:2,cols:2},No[35675]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix3fv(e,!1,r)}},rows:3,cols:3},No[35676]={Type:Float32Array,size:64,setter:function(t,e){return function(r){t.uniformMatrix4fv(e,!1,r)}},rows:4,cols:4},No[35685]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix2x3fv(e,!1,r)}},rows:2,cols:3},No[35686]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix2x4fv(e,!1,r)}},rows:2,cols:4},No[35687]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix3x2fv(e,!1,r)}},rows:3,cols:2},No[35688]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix3x4fv(e,!1,r)}},rows:3,cols:4},No[35689]={Type:Float32Array,size:64,setter:function(t,e){return function(r){t.uniformMatrix4x2fv(e,!1,r)}},rows:4,cols:2},No[35690]={Type:Float32Array,size:64,setter:function(t,e){return function(r){t.uniformMatrix4x3fv(e,!1,r)}},rows:4,cols:3},No[35678]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Vo},No[35680]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Wo},No[35679]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Go},No[35682]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Vo},No[36289]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:$o},No[36292]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:$o},No[36293]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Wo},No[36298]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Vo},No[36299]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Go},No[36300]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Wo},No[36303]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:$o},No[36306]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Vo},No[36307]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Go},No[36308]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Wo},No[36311]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:$o};const aa={};aa[5126]={size:4,setter:ea},aa[35664]={size:8,setter:ea},aa[35665]={size:12,setter:ea},aa[35666]={size:16,setter:ea},aa[qo]={size:4,setter:ra},aa[35667]={size:8,setter:ra},aa[35668]={size:12,setter:ra},aa[35669]={size:16,setter:ra},aa[5125]={size:4,setter:na},aa[36294]={size:8,setter:na},aa[36295]={size:12,setter:na},aa[36296]={size:16,setter:na},aa[35670]={size:4,setter:ra},aa[35671]={size:8,setter:ra},aa[35672]={size:12,setter:ra},aa[35673]={size:16,setter:ra},aa[35674]={size:4,setter:oa,count:2},aa[35675]={size:9,setter:oa,count:3},aa[35676]={size:16,setter:oa,count:4};const ia=/ERROR:\s*\d+:(\d+)/gi,ua=/^[ \t]*\n/;function sa(t){let e=0;return ua.test(t)&&(e=1,t=t.replace(ua,"")),{lineOffset:e,shaderSource:t}}function ca(t,e){return t.errorCallback(e),t.callback&&setTimeout((()=>{t.callback(`${e}\n${t.errors.join("\n")}`)})),null}function fa(t,e,r){let n,o,a;if("function"==typeof e&&(r=e,e=void 0),"function"==typeof t)r=t,t=void 0;else if(t&&!Array.isArray(t)){const e=t;r=e.errorCallback,t=e.attribLocations,n=e.transformFeedbackVaryings,o=e.transformFeedbackMode,a=e.callback}const i=r||Mo,u=[],s={errorCallback(t,...e){u.push(t),i(t,...e)},transformFeedbackVaryings:n,transformFeedbackMode:o,callback:a,errors:u};{let r={};Array.isArray(t)?t.forEach((function(t,n){r[t]=e?e[n]:n})):r=t||{},s.attribLocations=r}return s}const la=["VERTEX_SHADER","FRAGMENT_SHADER"],ha=(t=0)=>new Promise((e=>setTimeout(e,t)));function ma(t,e,r){const n=t.createProgram(),{attribLocations:o,transformFeedbackVaryings:a,transformFeedbackMode:i}=fa(r);for(let r=0;r<e.length;++r){let o=e[r];if("string"==typeof o){const e=xo(o),a=e?e.text:o;let i=t[la[r]];e&&e.type&&(i=((u=e.type).indexOf("frag")>=0?Io:u.indexOf("vert")>=0?zo:void 0)||i),o=t.createShader(i),t.shaderSource(o,sa(a).shaderSource),t.compileShader(o),t.attachShader(n,o)}}var u;Object.entries(o).forEach((([e,r])=>t.bindAttribLocation(n,r,e)));{let e=a;e&&(e.attribs&&(e=e.attribs),Array.isArray(e)||(e=Object.keys(e)),t.transformFeedbackVaryings(n,e,i||Bo))}return t.linkProgram(n),n}function da(t,e,r,n,o){const a=fa(r,n,o),i=new Set(e),u=ma(t,e,a);function s(t,e){const r=va(t,e,a.errorCallback);return r&&function(t,e,r){const n=t.getAttachedShaders(e);for(const e of n)r.has(e)&&t.deleteShader(e);t.deleteProgram(e)}(t,e,i),r}if(!a.callback)return s(t,u)?void 0:u;Ma(t,u).then((()=>{const e=s(t,u);a.callback(e,e?void 0:u)}))}function ba(t){return function(e,r,...n){return new Promise(((o,a)=>{const i=fa(...n);i.callback=(t,e)=>{t?a(t):o(e)},t(e,r,i)}))}}const pa=ba(da),ya=ba(Na);async function Ma(t,e){const r=t.getExtension("KHR_parallel_shader_compile"),n=r?(t,e)=>t.getProgramParameter(e,r.COMPLETION_STATUS_KHR):()=>!0;let o=0;do{await ha(o),o=1e3/60}while(!n(t,e))}function va(t,e,r){if(r=r||Mo,!t.getProgramParameter(e,So)){const n=t.getProgramInfoLog(e);return r(`Error in program linking: ${n}`),`${n}\n${t.getAttachedShaders(e).map((e=>function(t,e,r,n){if(n=n||Mo,!t.getShaderParameter(r,To)){const o=t.getShaderInfoLog(r),{lineOffset:a,shaderSource:i}=sa(t.getShaderSource(r)),u=`${function(t,e="",r=0){const n=[...e.matchAll(ia)],o=new Map(n.map(((t,r)=>{const o=parseInt(t[1]),a=n[r+1],i=a?a.index:e.length;return[o-1,e.substring(t.index,i)]})));return t.split("\n").map(((t,e)=>{const n=o.get(e);return`${e+1+r}: ${t}${n?`\n\n^^^ ${n}`:""}`})).join("\n")}(i,o,a)}\nError compiling ${xe(t,e)}: ${o}`;return n(u),u}return""}(t,t.getShaderParameter(e,t.SHADER_TYPE),e,r))).filter((t=>t)).join("\n")}`}}function xa(t,e,r,n,o){const a=fa(r,n,o),i=[];for(const t of e){const e=xo(t);if(!e)return ca(a,`unknown script element: ${t}`);i.push(e.text)}return da(t,i,a)}function ga(t,e,r,n,o){return da(t,e,r,n,o)}function Aa(t){const e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const wa=/(\.|\[|]|\w+)/g,Fa=t=>t>="0"&&t<="9";function _a(t,e,r,n){const o=t.split(wa).filter((t=>""!==t));let a=0,i="";for(;;){const t=o[a++];i+=t;const u=Fa(t[0]),s=u?parseInt(t):t;if(u&&(i+=o[a++]),a===o.length){r[s]=e;break}{const t=o[a++],e="["===t,u=r[s]||(e?[]:{});r[s]=u,r=u,n[i]=n[i]||function(t){return function(e){Ua(t,e)}}(u),i+=t}}}function Ea(t,e){let r=0;function n(e,n,o){const a=n.name.endsWith("[0]"),i=n.type,u=No[i];if(!u)throw new Error(`unknown type: 0x${i.toString(16)}`);let s;if(u.bindPoint){const e=r;r+=n.size,s=a?u.arraySetter(t,i,e,o,n.size):u.setter(t,i,e,o,n.size)}else s=u.arraySetter&&a?u.arraySetter(t,o):u.setter(t,o);return s.location=o,s}const o={},a={},i=t.getProgramParameter(e,Ro);for(let r=0;r<i;++r){const i=t.getActiveUniform(e,r);if(Aa(i))continue;let u=i.name;u.endsWith("[0]")&&(u=u.substr(0,u.length-3));const s=t.getUniformLocation(e,i.name);if(s){const t=n(0,i,s);o[u]=t,_a(u,t,a,o)}}return o}function Pa(t,e){const r={},n=t.getProgramParameter(e,Co);for(let o=0;o<n;++o){const n=t.getTransformFeedbackVarying(e,o);r[n.name]={index:o,type:n.type,size:n.size}}return r}function Ta(t,e,r){e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),r.attribs&&(r=r.attribs);for(const n in r){const o=e[n];if(o){const e=r[n];e.offset?t.bindBufferRange(Eo,o.index,e.buffer,e.offset,e.size):t.bindBufferBase(Eo,o.index,e.buffer)}}}function Sa(t,e,r){const n=t.createTransformFeedback();return t.bindTransformFeedback(Po,n),t.useProgram(e.program),Ta(t,e,r),t.bindTransformFeedback(Po,null),n}function Ia(t,e){const r=t.getProgramParameter(e,Ro),n=[],o=[];for(let a=0;a<r;++a){o.push(a),n.push({});const r=t.getActiveUniform(e,a);n[a].name=r.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(r){const a=r[0],i=r[1];t.getActiveUniforms(e,o,t[a]).forEach((function(t,e){n[e][i]=t}))}));const a={},i=t.getProgramParameter(e,ko);for(let r=0;r<i;++r){const n=t.getActiveUniformBlockName(e,r),o={index:t.getUniformBlockIndex(e,n),usedByVertexShader:t.getActiveUniformBlockParameter(e,r,Do),usedByFragmentShader:t.getActiveUniformBlockParameter(e,r,Uo),size:t.getActiveUniformBlockParameter(e,r,jo),uniformIndices:t.getActiveUniformBlockParameter(e,r,Lo)};o.used=o.usedByVertexShader||o.usedByFragmentShader,a[n]=o}return{blockSpecs:a,uniformData:n}}const za=/\[\d+\]\.$/,Ba=(t,e)=>((t+(e-1))/e|0)*e;function Ra(t,e,r,n){const o=r.blockSpecs,a=r.uniformData,i=o[n];if(!i)return vo("no uniform block object named:",n),{name:n,uniforms:{}};const u=new ArrayBuffer(i.size),s=t.createBuffer(),c=i.index;t.bindBuffer(_o,s),t.uniformBlockBinding(e,i.index,c);let f=n+".";za.test(f)&&(f=f.replace(za,"."));const l={},h={},m={};return i.uniformIndices.forEach((function(t){const e=a[t];let r=e.name;r.startsWith(f)&&(r=r.substr(f.length));const n=r.endsWith("[0]");n&&(r=r.substr(0,r.length-3));const o=No[e.type],i=o.Type,s=n?Ba(o.size,16)*e.size:o.size*e.size,c=new i(u,e.offset,s/i.BYTES_PER_ELEMENT);l[r]=c;const d=function(t,e,r,n){if(e||r){n=n||1;const e=t.length/4;return function(r){let o=0,a=0;for(let i=0;i<e;++i){for(let e=0;e<n;++e)t[o++]=r[a++];o+=4-n}}}return function(e){e.length?t.set(e):t[0]=e}}(c,n,o.rows,o.cols);h[r]=d,_a(r,d,m,h)})),{name:n,array:u,asFloat:new Float32Array(u),buffer:s,uniforms:l,setters:h}}function Oa(t,e,r){return Ra(t,e.program,e.uniformBlockSpec,r)}function Ca(t,e,r){const n=(e.uniformBlockSpec||e).blockSpecs[r.name];if(n){const e=n.index;return t.bindBufferRange(_o,e,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function ka(t,e,r){Ca(t,e,r)&&t.bufferData(_o,r.array,Ao)}function Da(t,e){const r=t.setters;for(const t in e){const n=r[t];n&&n(e[t])}}function Ua(t,e){for(const r in e){const n=t[r];"function"==typeof n?n(e[r]):Ua(t[r],e[r])}}function ja(t,...e){const r=t.uniformSetters||t,n=e.length;for(let t=0;t<n;++t){const n=e[t];if(Array.isArray(n)){const t=n.length;for(let e=0;e<t;++e)ja(r,n[e])}else for(const t in n){const e=r[t];e&&e(n[t])}}}const La=ja;function qa(t,e){const r={},n=t.getProgramParameter(e,Oo);for(let o=0;o<n;++o){const n=t.getActiveAttrib(e,o);if(Aa(n))continue;const a=t.getAttribLocation(e,n.name),i=aa[n.type],u=i.setter(t,a,i);u.location=a,r[n.name]=u}return r}function Va(t,e){for(const r in e){const n=t[r];n&&n(e[r])}}function Wa(t,e,r){r.vertexArrayObject?t.bindVertexArray(r.vertexArrayObject):(Va(e.attribSetters||e,r.attribs),r.indices&&t.bindBuffer(Fo,r.indices))}function Ga(t,e){const r={program:e,uniformSetters:Ea(t,e),attribSetters:qa(t,e)};return Me(t)&&(r.uniformBlockSpec=Ia(t,e),r.transformFeedbackInfo=Pa(t,e)),r}const $a=/\s|{|}|;/;function Na(t,e,r,n,o){const a=fa(r,n,o),i=[];if(e=e.map((function(t){if(!$a.test(t)){const e=xo(t);if(e)t=e.text;else{const e=`no element with id: ${t}`;a.errorCallback(e),i.push(e)}}return t})),i.length)return ca(a,"");const u=a.callback;u&&(a.callback=(e,r)=>{u(e,e?void 0:Ga(t,r))});const s=ga(t,e,a);return s?Ga(t,s):null}function Xa(t,e,r,n,o){for(const[a,i]of Object.entries(e)){const u={...o},s=r[a];Array.isArray(s)||Object.assign(u,s);const c=va(t,i,u.errorCallback);if(c){for(const r of Object.values(e)){const e=t.getAttachedShaders(r);t.deleteProgram(r);for(const r of e)n.has(r)||t.deleteShader(r)}return c}}}function Ya(t,e,r={}){const n=new Set,o=Object.fromEntries(Object.entries(e).map((([e,o])=>{const a={...r},i=Array.isArray(o)?o:o.shaders;return Array.isArray(o)||Object.assign(a,o),i.forEach(n.add,n),[e,ma(t,i,a)]})));if(!r.callback)return Xa(t,o,e,n,r)?void 0:o;(async function(t,e){for(const r of Object.values(e))await Ma(t,r)})(t,o).then((()=>{const a=Xa(t,o,e,n,r);r.callback(a,a?void 0:o)}))}function Ha(t,e,r){function n(t,e){return Object.fromEntries(Object.entries(e).map((([e,r])=>[e,Ga(t,r)])))}const o=(r=fa(r)).callback;o&&(r.callback=(e,r)=>{o(e,e?void 0:n(t,r))});const a=Ya(t,e,r);if(!o&&a)return n(t,a)}const Qa=ba(Ya),Za=ba(Ha);var Ka=Object.freeze({__proto__:null,createAttributeSetters:qa,createProgram:da,createProgramAsync:pa,createPrograms:Ya,createProgramsAsync:Qa,createProgramFromScripts:xa,createProgramFromSources:ga,createProgramInfo:Na,createProgramInfoAsync:ya,createProgramInfos:Ha,createProgramInfosAsync:Za,createProgramInfoFromProgram:Ga,createUniformSetters:Ea,createUniformBlockSpecFromProgram:Ia,createUniformBlockInfoFromProgram:Ra,createUniformBlockInfo:Oa,createTransformFeedback:Sa,createTransformFeedbackInfo:Pa,bindTransformFeedbackInfo:Ta,setAttributes:Va,setBuffersAndAttributes:Wa,setUniforms:ja,setUniformsAndBindTextures:La,setUniformBlock:ka,setBlockUniforms:Da,bindUniformBlock:Ca});const Ja=4,ti=5123;function ei(t,e,r,n,o,a){r=void 0===r?Ja:r;const i=e.indices,u=e.elementType,s=void 0===n?e.numElements:n;o=void 0===o?0:o,u||i?void 0!==a?t.drawElementsInstanced(r,s,void 0===u?ti:e.elementType,o,a):t.drawElements(r,s,void 0===u?ti:e.elementType,o):void 0!==a?t.drawArraysInstanced(r,o,s,a):t.drawArrays(r,o,s)}function ri(t,e){let r=null,n=null;e.forEach((function(e){if(!1===e.active)return;const o=e.programInfo,a=e.vertexArrayInfo||e.bufferInfo;let i=!1;const u=void 0===e.type?Ja:e.type;o!==r&&(r=o,t.useProgram(o.program),i=!0),(i||a!==n)&&(n&&n.vertexArrayObject&&!a.vertexArrayObject&&t.bindVertexArray(null),n=a,Wa(t,o,a)),ja(o,e.uniforms),ei(t,a,u,e.count,e.offset,e.instanceCount)})),n&&n.vertexArrayObject&&t.bindVertexArray(null)}var ni=Object.freeze({__proto__:null,drawBufferInfo:ei,drawObjectList:ri});const oi=36160,ai=36161,ii=3553,ui=36064,si=36096,ci=33306,fi=33071,li=9729,hi=[{format:6408,type:5121,min:li,wrap:fi},{format:34041}],mi={};mi[34041]=ci,mi[6401]=36128,mi[36168]=36128,mi[6402]=si,mi[33189]=si,mi[33190]=si,mi[36012]=si,mi[35056]=ci,mi[36013]=ci;const di={32854:!0,32855:!0,36194:!0,34041:!0,33189:!0,6401:!0,36168:!0},bi=32;function pi(t,e,r,n){const o=oi,a=t.createFramebuffer();t.bindFramebuffer(o,a),r=r||t.drawingBufferWidth,n=n||t.drawingBufferHeight;const i=[],u={framebuffer:a,attachments:[],width:r,height:n};return(e=e||hi).forEach((function(e,a){let s=e.attachment;const c=e.samples,f=e.format;let l=e.attachmentPoint||function(t,e){return mi[t]||mi[e]}(f,e.internalFormat);if(l||(l=ui+a),function(t){return t>=ui&&t<ui+bi}(l)&&i.push(l),!s)if(void 0!==c||function(t){return di[t]}(f))s=t.createRenderbuffer(),t.bindRenderbuffer(ai,s),c>1?t.renderbufferStorageMultisample(ai,c,f,r,n):t.renderbufferStorage(ai,f,r,n);else{const o=Object.assign({},e);o.width=r,o.height=n,void 0===o.auto&&(o.auto=!1,o.min=o.min||o.minMag||li,o.mag=o.mag||o.minMag||li,o.wrapS=o.wrapS||o.wrap||fi,o.wrapT=o.wrapT||o.wrap||fi),s=mo(t,o)}if(j(0,s))t.framebufferRenderbuffer(o,l,ai,s);else{if(!L(0,s))throw new Error("unknown attachment type");void 0!==e.layer?t.framebufferTextureLayer(o,l,s,e.level||0,e.layer):t.framebufferTexture2D(o,l,e.target||ii,s,e.level||0)}u.attachments.push(s)})),t.drawBuffers&&t.drawBuffers(i),u}function yi(t,e,r,n,o){n=n||t.drawingBufferWidth,o=o||t.drawingBufferHeight,e.width=n,e.height=o,(r=r||hi).forEach((function(r,a){const i=e.attachments[a],u=r.format,s=r.samples;if(void 0!==s||j(0,i))t.bindRenderbuffer(ai,i),s>1?t.renderbufferStorageMultisample(ai,s,u,n,o):t.renderbufferStorage(ai,u,n,o);else{if(!L(0,i))throw new Error("unknown attachment type");bo(t,i,r,n,o)}}))}function Mi(t,e,r){r=r||oi,e?(t.bindFramebuffer(r,e.framebuffer),t.viewport(0,0,e.width,e.height)):(t.bindFramebuffer(r,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight))}var vi=Object.freeze({__proto__:null,bindFramebufferInfo:Mi,createFramebufferInfo:pi,resizeFramebufferInfo:yi});const xi=34963;function gi(t,e,r){const n=t.createVertexArray();return t.bindVertexArray(n),e.length||(e=[e]),e.forEach((function(e){Wa(t,e,r)})),t.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:n}}function Ai(t,e,r,n){const o=t.createVertexArray();return t.bindVertexArray(o),Va(e,r),n&&t.bindBuffer(xi,n),t.bindVertexArray(null),o}function wi(t,e,r){return Ai(t,e.attribSetters||e,r.attribs,r.indices)}var Fi=Object.freeze({__proto__:null,createVertexArrayInfo:gi,createVAOAndSetAttributes:Ai,createVAOFromBufferInfo:wi});const _i={addExtensionsToContext:!0};function Ei(t){O(t,_i),tt(t),Xn(t)}const Pi=/^(.*?)_/;function Ti(t,e){xe(t,0);const r=t.getExtension(e);if(r){const n={},o=Pi.exec(e)[1],a="_"+o;for(const e in r){const i=r[e],u="function"==typeof i,s=u?o:a;let c=e;e.endsWith(s)&&(c=e.substring(0,e.length-s.length)),void 0!==t[c]?u||t[c]===i||k(c,t[c],i,e):u?t[c]=function(t){return function(){return t.apply(r,arguments)}}(i):(t[c]=i,n[c]=i)}n.constructor={name:r.constructor.name},xe(n,0)}return r}const Si=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function Ii(t){for(let e=0;e<Si.length;++e)Ti(t,Si[e])}function zi(t,e){const r=function(t,e){const r=["webgl","experimental-webgl"];let n=null;for(let o=0;o<r.length;++o)if(n=t.getContext(r[o],e),n){_i.addExtensionsToContext&&Ii(n);break}return n}(t,e);return r}function Bi(t,e){const r=function(t,e){const r=["webgl2","webgl","experimental-webgl"];let n=null;for(let o=0;o<r.length;++o)if(n=t.getContext(r[o],e),n){_i.addExtensionsToContext&&Ii(n);break}return n}(t,e);return r}function Ri(t,e){e=e||1,e=Math.max(0,e);const r=t.clientWidth*e|0,n=t.clientHeight*e|0;return(t.width!==r||t.height!==n)&&(t.width=r,t.height=n,!0)}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(244)})();
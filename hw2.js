/*! For license information please see hw2.js.LICENSE.txt */
(()=>{"use strict";var t={176:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n=r.p+"negx.jpg"},287:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n=r.p+"negy.jpg"},827:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n=r.p+"negz.jpg"},840:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n=r.p+"posx.jpg"},5:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n=r.p+"posy.jpg"},745:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n=r.p+"posz.jpg"},887:(t,e,r)=>{r.r(e),r.d(e,{glMatrix:()=>n,mat2:()=>o,mat2d:()=>a,mat3:()=>i,mat4:()=>s,quat:()=>f,quat2:()=>l,vec2:()=>h,vec3:()=>u,vec4:()=>c});var n={};r.r(n),r.d(n,{ARRAY_TYPE:()=>d,EPSILON:()=>m,RANDOM:()=>b,equals:()=>g,setMatrixArrayType:()=>p,toRadian:()=>y});var o={};r.r(o),r.d(o,{LDU:()=>k,add:()=>D,adjoint:()=>T,clone:()=>M,copy:()=>_,create:()=>x,determinant:()=>O,equals:()=>U,exactEquals:()=>L,frob:()=>z,fromRotation:()=>j,fromScaling:()=>C,fromValues:()=>A,identity:()=>w,invert:()=>P,mul:()=>$,multiply:()=>S,multiplyScalar:()=>q,multiplyScalarAndAdd:()=>W,rotate:()=>I,scale:()=>B,set:()=>F,str:()=>R,sub:()=>N,subtract:()=>V,transpose:()=>E});var a={};r.r(a),r.d(a,{add:()=>ct,clone:()=>X,copy:()=>Y,create:()=>G,determinant:()=>J,equals:()=>dt,exactEquals:()=>mt,frob:()=>ut,fromRotation:()=>ot,fromScaling:()=>at,fromTranslation:()=>it,fromValues:()=>Q,identity:()=>H,invert:()=>K,mul:()=>bt,multiply:()=>tt,multiplyScalar:()=>lt,multiplyScalarAndAdd:()=>ht,rotate:()=>et,scale:()=>rt,set:()=>Z,str:()=>st,sub:()=>pt,subtract:()=>ft,translate:()=>nt});var i={};r.r(i),r.d(i,{add:()=>Ut,adjoint:()=>Et,clone:()=>gt,copy:()=>xt,create:()=>vt,determinant:()=>Pt,equals:()=>Gt,exactEquals:()=>Nt,frob:()=>Lt,fromMat2d:()=>Rt,fromMat4:()=>yt,fromQuat:()=>zt,fromRotation:()=>jt,fromScaling:()=>Ct,fromTranslation:()=>Bt,fromValues:()=>Mt,identity:()=>wt,invert:()=>Ft,mul:()=>Xt,multiply:()=>Tt,multiplyScalar:()=>Wt,multiplyScalarAndAdd:()=>$t,normalFromMat4:()=>kt,projection:()=>Dt,rotate:()=>St,scale:()=>It,set:()=>_t,str:()=>Vt,sub:()=>Yt,subtract:()=>qt,translate:()=>Ot,transpose:()=>At});var s={};r.r(s),r.d(s,{add:()=>De,adjoint:()=>ne,clone:()=>Qt,copy:()=>Zt,create:()=>Ht,determinant:()=>oe,equals:()=>We,exactEquals:()=>qe,frob:()=>ke,fromQuat:()=>Fe,fromQuat2:()=>ge,fromRotation:()=>de,fromRotationTranslation:()=>ye,fromRotationTranslationScale:()=>we,fromRotationTranslationScaleOrigin:()=>Ae,fromScaling:()=>me,fromTranslation:()=>he,fromValues:()=>Kt,fromXRotation:()=>be,fromYRotation:()=>pe,fromZRotation:()=>ve,frustum:()=>Ee,getRotation:()=>_e,getScaling:()=>Me,getTranslation:()=>xe,identity:()=>te,invert:()=>re,lookAt:()=>Ce,mul:()=>$e,multiply:()=>ae,multiplyScalar:()=>Le,multiplyScalarAndAdd:()=>Ue,ortho:()=>Be,orthoNO:()=>Ie,orthoZO:()=>je,perspective:()=>Te,perspectiveFromFieldOfView:()=>Se,perspectiveNO:()=>Pe,perspectiveZO:()=>Oe,rotate:()=>ue,rotateX:()=>ce,rotateY:()=>fe,rotateZ:()=>le,scale:()=>se,set:()=>Jt,str:()=>ze,sub:()=>Ne,subtract:()=>Ve,targetTo:()=>Re,translate:()=>ie,transpose:()=>ee});var u={};r.r(u),r.d(u,{add:()=>Ke,angle:()=>Pr,bezier:()=>gr,ceil:()=>rr,clone:()=>Xe,copy:()=>Qe,create:()=>Ge,cross:()=>pr,dist:()=>zr,distance:()=>cr,div:()=>Rr,divide:()=>er,dot:()=>br,equals:()=>Ir,exactEquals:()=>Sr,floor:()=>nr,forEach:()=>Lr,fromValues:()=>He,hermite:()=>yr,inverse:()=>mr,len:()=>Dr,length:()=>Ye,lerp:()=>vr,max:()=>ar,min:()=>or,mul:()=>Cr,multiply:()=>tr,negate:()=>hr,normalize:()=>dr,random:()=>xr,rotateX:()=>Ar,rotateY:()=>Fr,rotateZ:()=>Er,round:()=>ir,scale:()=>sr,scaleAndAdd:()=>ur,set:()=>Ze,sqrDist:()=>kr,sqrLen:()=>Vr,squaredDistance:()=>fr,squaredLength:()=>lr,str:()=>Or,sub:()=>jr,subtract:()=>Je,transformMat3:()=>_r,transformMat4:()=>Mr,transformQuat:()=>wr,zero:()=>Tr});var c={};r.r(c),r.d(c,{add:()=>Gr,ceil:()=>Qr,clone:()=>qr,copy:()=>$r,create:()=>Ur,cross:()=>hn,dist:()=>An,distance:()=>nn,div:()=>wn,divide:()=>Hr,dot:()=>ln,equals:()=>xn,exactEquals:()=>gn,floor:()=>Zr,forEach:()=>Tn,fromValues:()=>Wr,inverse:()=>cn,len:()=>En,length:()=>an,lerp:()=>mn,max:()=>Jr,min:()=>Kr,mul:()=>_n,multiply:()=>Yr,negate:()=>un,normalize:()=>fn,random:()=>dn,round:()=>tn,scale:()=>en,scaleAndAdd:()=>rn,set:()=>Nr,sqrDist:()=>Fn,sqrLen:()=>Pn,squaredDistance:()=>on,squaredLength:()=>sn,str:()=>yn,sub:()=>Mn,subtract:()=>Xr,transformMat4:()=>bn,transformQuat:()=>pn,zero:()=>vn});var f={};r.r(f),r.d(f,{add:()=>ao,calculateW:()=>Dn,clone:()=>eo,conjugate:()=>Nn,copy:()=>no,create:()=>On,dot:()=>uo,equals:()=>vo,exactEquals:()=>po,exp:()=>Vn,fromEuler:()=>Xn,fromMat3:()=>Gn,fromValues:()=>ro,getAngle:()=>jn,getAxisAngle:()=>Bn,identity:()=>Sn,invert:()=>$n,len:()=>lo,length:()=>fo,lerp:()=>co,ln:()=>Ln,mul:()=>io,multiply:()=>Cn,normalize:()=>bo,pow:()=>Un,random:()=>Wn,rotateX:()=>Rn,rotateY:()=>zn,rotateZ:()=>kn,rotationTo:()=>yo,scale:()=>so,set:()=>oo,setAxes:()=>xo,setAxisAngle:()=>In,slerp:()=>qn,sqlerp:()=>go,sqrLen:()=>mo,squaredLength:()=>ho,str:()=>Yn});var l={};r.r(l),r.d(l,{add:()=>$o,clone:()=>_o,conjugate:()=>Zo,copy:()=>Oo,create:()=>Mo,dot:()=>Yo,equals:()=>aa,exactEquals:()=>oa,fromMat4:()=>To,fromRotation:()=>Po,fromRotationTranslation:()=>Fo,fromRotationTranslationValues:()=>Ao,fromTranslation:()=>Eo,fromValues:()=>wo,getDual:()=>jo,getReal:()=>Bo,getTranslation:()=>zo,identity:()=>So,invert:()=>Qo,len:()=>Jo,length:()=>Ko,lerp:()=>Ho,mul:()=>Go,multiply:()=>No,normalize:()=>ra,rotateAroundAxis:()=>Wo,rotateByQuatAppend:()=>Uo,rotateByQuatPrepend:()=>qo,rotateX:()=>Do,rotateY:()=>Vo,rotateZ:()=>Lo,scale:()=>Xo,set:()=>Io,setDual:()=>Ro,setReal:()=>Co,sqrLen:()=>ea,squaredLength:()=>ta,str:()=>na,translate:()=>ko});var h={};r.r(h),r.d(h,{add:()=>la,angle:()=>Da,ceil:()=>ba,clone:()=>sa,copy:()=>ca,create:()=>ia,cross:()=>Sa,dist:()=>Xa,distance:()=>_a,div:()=>Ga,divide:()=>da,dot:()=>Oa,equals:()=>qa,exactEquals:()=>Ua,floor:()=>pa,forEach:()=>Qa,fromValues:()=>ua,inverse:()=>Pa,len:()=>Wa,length:()=>Aa,lerp:()=>Ia,max:()=>ya,min:()=>va,mul:()=>Na,multiply:()=>ma,negate:()=>Ea,normalize:()=>Ta,random:()=>Ba,rotate:()=>ka,round:()=>ga,scale:()=>xa,scaleAndAdd:()=>Ma,set:()=>fa,sqrDist:()=>Ya,sqrLen:()=>Ha,squaredDistance:()=>wa,squaredLength:()=>Fa,str:()=>La,sub:()=>$a,subtract:()=>ha,transformMat2:()=>ja,transformMat2d:()=>Ca,transformMat3:()=>Ra,transformMat4:()=>za,zero:()=>Va});var m=1e-6,d="undefined"!=typeof Float32Array?Float32Array:Array,b=Math.random;function p(t){d=t}var v=Math.PI/180;function y(t){return t*v}function g(t,e){return Math.abs(t-e)<=m*Math.max(1,Math.abs(t),Math.abs(e))}function x(){var t=new d(4);return d!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function M(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function _(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function w(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function A(t,e,r,n){var o=new d(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o}function F(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t}function E(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function P(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r*a-o*n;return i?(i=1/i,t[0]=a*i,t[1]=-n*i,t[2]=-o*i,t[3]=r*i,t):null}function T(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function O(t){return t[0]*t[3]-t[2]*t[1]}function S(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=r[0],u=r[1],c=r[2],f=r[3];return t[0]=n*s+a*u,t[1]=o*s+i*u,t[2]=n*c+a*f,t[3]=o*c+i*f,t}function I(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=o*u+i*s,t[2]=n*-s+a*u,t[3]=o*-s+i*u,t}function B(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=r[0],u=r[1];return t[0]=n*s,t[1]=o*s,t[2]=a*u,t[3]=i*u,t}function j(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function C(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function R(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function z(t){return Math.hypot(t[0],t[1],t[2],t[3])}function k(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function D(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function V(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function L(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function U(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(r-i)<=m*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=m*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=m*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=m*Math.max(1,Math.abs(a),Math.abs(c))}function q(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function W(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var $=S,N=V;function G(){var t=new d(6);return d!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function X(t){var e=new d(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function H(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Q(t,e,r,n,o,a){var i=new d(6);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i[4]=o,i[5]=a,i}function Z(t,e,r,n,o,a,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t}function K(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=r*a-n*o;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-o*u,t[3]=r*u,t[4]=(o*s-a*i)*u,t[5]=(n*i-r*s)*u,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=r[0],f=r[1],l=r[2],h=r[3],m=r[4],d=r[5];return t[0]=n*c+a*f,t[1]=o*c+i*f,t[2]=n*l+a*h,t[3]=o*l+i*h,t[4]=n*m+a*d+s,t[5]=o*m+i*d+u,t}function et(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=Math.sin(r),f=Math.cos(r);return t[0]=n*f+a*c,t[1]=o*f+i*c,t[2]=n*-c+a*f,t[3]=o*-c+i*f,t[4]=s,t[5]=u,t}function rt(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=r[0],f=r[1];return t[0]=n*c,t[1]=o*c,t[2]=a*f,t[3]=i*f,t[4]=s,t[5]=u,t}function nt(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=r[0],f=r[1];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=n*c+a*f+s,t[5]=o*c+i*f+u,t}function ot(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function at(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function it(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function ft(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function lt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function ht(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function mt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function dt(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=e[0],c=e[1],f=e[2],l=e[3],h=e[4],d=e[5];return Math.abs(r-u)<=m*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=m*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-f)<=m*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-l)<=m*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-h)<=m*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-d)<=m*Math.max(1,Math.abs(s),Math.abs(d))}var bt=tt,pt=ft;function vt(){var t=new d(9);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gt(t){var e=new d(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Mt(t,e,r,n,o,a,i,s,u){var c=new d(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=o,c[5]=a,c[6]=i,c[7]=s,c[8]=u,c}function _t(t,e,r,n,o,a,i,s,u,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t}function wt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,e){if(t===e){var r=e[1],n=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Ft(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=f*i-s*c,h=-f*a+s*u,m=c*a-i*u,d=r*l+n*h+o*m;return d?(d=1/d,t[0]=l*d,t[1]=(-f*n+o*c)*d,t[2]=(s*n-o*i)*d,t[3]=h*d,t[4]=(f*r-o*u)*d,t[5]=(-s*r+o*a)*d,t[6]=m*d,t[7]=(-c*r+n*u)*d,t[8]=(i*r-n*a)*d,t):null}function Et(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],f=e[8];return t[0]=i*f-s*c,t[1]=o*c-n*f,t[2]=n*s-o*i,t[3]=s*u-a*f,t[4]=r*f-o*u,t[5]=o*a-r*s,t[6]=a*c-i*u,t[7]=n*u-r*c,t[8]=r*i-n*a,t}function Pt(t){var e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8];return e*(c*a-i*u)+r*(-c*o+i*s)+n*(u*o-a*s)}function Tt(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=r[0],m=r[1],d=r[2],b=r[3],p=r[4],v=r[5],y=r[6],g=r[7],x=r[8];return t[0]=h*n+m*i+d*c,t[1]=h*o+m*s+d*f,t[2]=h*a+m*u+d*l,t[3]=b*n+p*i+v*c,t[4]=b*o+p*s+v*f,t[5]=b*a+p*u+v*l,t[6]=y*n+g*i+x*c,t[7]=y*o+g*s+x*f,t[8]=y*a+g*u+x*l,t}function Ot(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=r[0],m=r[1];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=s,t[5]=u,t[6]=h*n+m*i+c,t[7]=h*o+m*s+f,t[8]=h*a+m*u+l,t}function St(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(r),m=Math.cos(r);return t[0]=m*n+h*i,t[1]=m*o+h*s,t[2]=m*a+h*u,t[3]=m*i-h*n,t[4]=m*s-h*o,t[5]=m*u-h*a,t[6]=c,t[7]=f,t[8]=l,t}function It(t,e,r){var n=r[0],o=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Bt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function jt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ct(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Rt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function zt(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r+r,s=n+n,u=o+o,c=r*i,f=n*i,l=n*s,h=o*i,m=o*s,d=o*u,b=a*i,p=a*s,v=a*u;return t[0]=1-l-d,t[3]=f-v,t[6]=h+p,t[1]=f+v,t[4]=1-c-d,t[7]=m-b,t[2]=h-p,t[5]=m+b,t[8]=1-c-l,t}function kt(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],m=e[11],d=e[12],b=e[13],p=e[14],v=e[15],y=r*s-n*i,g=r*u-o*i,x=r*c-a*i,M=n*u-o*s,_=n*c-a*s,w=o*c-a*u,A=f*b-l*d,F=f*p-h*d,E=f*v-m*d,P=l*p-h*b,T=l*v-m*b,O=h*v-m*p,S=y*O-g*T+x*P+M*E-_*F+w*A;return S?(S=1/S,t[0]=(s*O-u*T+c*P)*S,t[1]=(u*E-i*O-c*F)*S,t[2]=(i*T-s*E+c*A)*S,t[3]=(o*T-n*O-a*P)*S,t[4]=(r*O-o*E+a*F)*S,t[5]=(n*E-r*T-a*A)*S,t[6]=(b*w-p*_+v*M)*S,t[7]=(p*x-d*w-v*g)*S,t[8]=(d*_-b*x+v*y)*S,t):null}function Dt(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Vt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Lt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Ut(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function qt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function Wt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function $t(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function Nt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Gt(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=e[0],h=e[1],d=e[2],b=e[3],p=e[4],v=e[5],y=e[6],g=e[7],x=e[8];return Math.abs(r-l)<=m*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-h)<=m*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-d)<=m*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-b)<=m*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(i-p)<=m*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-v)<=m*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-y)<=m*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-g)<=m*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-x)<=m*Math.max(1,Math.abs(f),Math.abs(x))}var Xt=Tt,Yt=qt;function Ht(){var t=new d(16);return d!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qt(t){var e=new d(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Kt(t,e,r,n,o,a,i,s,u,c,f,l,h,m,b,p){var v=new d(16);return v[0]=t,v[1]=e,v[2]=r,v[3]=n,v[4]=o,v[5]=a,v[6]=i,v[7]=s,v[8]=u,v[9]=c,v[10]=f,v[11]=l,v[12]=h,v[13]=m,v[14]=b,v[15]=p,v}function Jt(t,e,r,n,o,a,i,s,u,c,f,l,h,m,d,b,p){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=m,t[13]=d,t[14]=b,t[15]=p,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var r=e[1],n=e[2],o=e[3],a=e[6],i=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=o,t[13]=i,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],m=e[11],d=e[12],b=e[13],p=e[14],v=e[15],y=r*s-n*i,g=r*u-o*i,x=r*c-a*i,M=n*u-o*s,_=n*c-a*s,w=o*c-a*u,A=f*b-l*d,F=f*p-h*d,E=f*v-m*d,P=l*p-h*b,T=l*v-m*b,O=h*v-m*p,S=y*O-g*T+x*P+M*E-_*F+w*A;return S?(S=1/S,t[0]=(s*O-u*T+c*P)*S,t[1]=(o*T-n*O-a*P)*S,t[2]=(b*w-p*_+v*M)*S,t[3]=(h*_-l*w-m*M)*S,t[4]=(u*E-i*O-c*F)*S,t[5]=(r*O-o*E+a*F)*S,t[6]=(p*x-d*w-v*g)*S,t[7]=(f*w-h*x+m*g)*S,t[8]=(i*T-s*E+c*A)*S,t[9]=(n*E-r*T-a*A)*S,t[10]=(d*_-b*x+v*y)*S,t[11]=(l*x-f*_-m*y)*S,t[12]=(s*F-i*P-u*A)*S,t[13]=(r*P-n*F+o*A)*S,t[14]=(b*g-d*M-p*y)*S,t[15]=(f*M-l*g+h*y)*S,t):null}function ne(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],f=e[8],l=e[9],h=e[10],m=e[11],d=e[12],b=e[13],p=e[14],v=e[15];return t[0]=s*(h*v-m*p)-l*(u*v-c*p)+b*(u*m-c*h),t[1]=-(n*(h*v-m*p)-l*(o*v-a*p)+b*(o*m-a*h)),t[2]=n*(u*v-c*p)-s*(o*v-a*p)+b*(o*c-a*u),t[3]=-(n*(u*m-c*h)-s*(o*m-a*h)+l*(o*c-a*u)),t[4]=-(i*(h*v-m*p)-f*(u*v-c*p)+d*(u*m-c*h)),t[5]=r*(h*v-m*p)-f*(o*v-a*p)+d*(o*m-a*h),t[6]=-(r*(u*v-c*p)-i*(o*v-a*p)+d*(o*c-a*u)),t[7]=r*(u*m-c*h)-i*(o*m-a*h)+f*(o*c-a*u),t[8]=i*(l*v-m*b)-f*(s*v-c*b)+d*(s*m-c*l),t[9]=-(r*(l*v-m*b)-f*(n*v-a*b)+d*(n*m-a*l)),t[10]=r*(s*v-c*b)-i*(n*v-a*b)+d*(n*c-a*s),t[11]=-(r*(s*m-c*l)-i*(n*m-a*l)+f*(n*c-a*s)),t[12]=-(i*(l*p-h*b)-f*(s*p-u*b)+d*(s*h-u*l)),t[13]=r*(l*p-h*b)-f*(n*p-o*b)+d*(n*h-o*l),t[14]=-(r*(s*p-u*b)-i*(n*p-o*b)+d*(n*u-o*s)),t[15]=r*(s*h-u*l)-i*(n*h-o*l)+f*(n*u-o*s),t}function oe(t){var e=t[0],r=t[1],n=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8],f=t[9],l=t[10],h=t[11],m=t[12],d=t[13],b=t[14],p=t[15];return(e*i-r*a)*(l*p-h*b)-(e*s-n*a)*(f*p-h*d)+(e*u-o*a)*(f*b-l*d)+(r*s-n*i)*(c*p-h*m)-(r*u-o*i)*(c*b-l*m)+(n*u-o*s)*(c*d-f*m)}function ae(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],m=e[10],d=e[11],b=e[12],p=e[13],v=e[14],y=e[15],g=r[0],x=r[1],M=r[2],_=r[3];return t[0]=g*n+x*s+M*l+_*b,t[1]=g*o+x*u+M*h+_*p,t[2]=g*a+x*c+M*m+_*v,t[3]=g*i+x*f+M*d+_*y,g=r[4],x=r[5],M=r[6],_=r[7],t[4]=g*n+x*s+M*l+_*b,t[5]=g*o+x*u+M*h+_*p,t[6]=g*a+x*c+M*m+_*v,t[7]=g*i+x*f+M*d+_*y,g=r[8],x=r[9],M=r[10],_=r[11],t[8]=g*n+x*s+M*l+_*b,t[9]=g*o+x*u+M*h+_*p,t[10]=g*a+x*c+M*m+_*v,t[11]=g*i+x*f+M*d+_*y,g=r[12],x=r[13],M=r[14],_=r[15],t[12]=g*n+x*s+M*l+_*b,t[13]=g*o+x*u+M*h+_*p,t[14]=g*a+x*c+M*m+_*v,t[15]=g*i+x*f+M*d+_*y,t}function ie(t,e,r){var n,o,a,i,s,u,c,f,l,h,m,d,b=r[0],p=r[1],v=r[2];return e===t?(t[12]=e[0]*b+e[4]*p+e[8]*v+e[12],t[13]=e[1]*b+e[5]*p+e[9]*v+e[13],t[14]=e[2]*b+e[6]*p+e[10]*v+e[14],t[15]=e[3]*b+e[7]*p+e[11]*v+e[15]):(n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=e[8],h=e[9],m=e[10],d=e[11],t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=s,t[5]=u,t[6]=c,t[7]=f,t[8]=l,t[9]=h,t[10]=m,t[11]=d,t[12]=n*b+s*p+l*v+e[12],t[13]=o*b+u*p+h*v+e[13],t[14]=a*b+c*p+m*v+e[14],t[15]=i*b+f*p+d*v+e[15]),t}function se(t,e,r){var n=r[0],o=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,r,n){var o,a,i,s,u,c,f,l,h,d,b,p,v,y,g,x,M,_,w,A,F,E,P,T,O=n[0],S=n[1],I=n[2],B=Math.hypot(O,S,I);return B<m?null:(O*=B=1/B,S*=B,I*=B,o=Math.sin(r),i=1-(a=Math.cos(r)),s=e[0],u=e[1],c=e[2],f=e[3],l=e[4],h=e[5],d=e[6],b=e[7],p=e[8],v=e[9],y=e[10],g=e[11],x=O*O*i+a,M=S*O*i+I*o,_=I*O*i-S*o,w=O*S*i-I*o,A=S*S*i+a,F=I*S*i+O*o,E=O*I*i+S*o,P=S*I*i-O*o,T=I*I*i+a,t[0]=s*x+l*M+p*_,t[1]=u*x+h*M+v*_,t[2]=c*x+d*M+y*_,t[3]=f*x+b*M+g*_,t[4]=s*w+l*A+p*F,t[5]=u*w+h*A+v*F,t[6]=c*w+d*A+y*F,t[7]=f*w+b*A+g*F,t[8]=s*E+l*P+p*T,t[9]=u*E+h*P+v*T,t[10]=c*E+d*P+y*T,t[11]=f*E+b*P+g*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[4],i=e[5],s=e[6],u=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*o+c*n,t[5]=i*o+f*n,t[6]=s*o+l*n,t[7]=u*o+h*n,t[8]=c*o-a*n,t[9]=f*o-i*n,t[10]=l*o-s*n,t[11]=h*o-u*n,t}function fe(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[0],i=e[1],s=e[2],u=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o-c*n,t[1]=i*o-f*n,t[2]=s*o-l*n,t[3]=u*o-h*n,t[8]=a*n+c*o,t[9]=i*n+f*o,t[10]=s*n+l*o,t[11]=u*n+h*o,t}function le(t,e,r){var n=Math.sin(r),o=Math.cos(r),a=e[0],i=e[1],s=e[2],u=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o+c*n,t[1]=i*o+f*n,t[2]=s*o+l*n,t[3]=u*o+h*n,t[4]=c*o-a*n,t[5]=f*o-i*n,t[6]=l*o-s*n,t[7]=h*o-u*n,t}function he(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function me(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function de(t,e,r){var n,o,a,i=r[0],s=r[1],u=r[2],c=Math.hypot(i,s,u);return c<m?null:(i*=c=1/c,s*=c,u*=c,n=Math.sin(e),a=1-(o=Math.cos(e)),t[0]=i*i*a+o,t[1]=s*i*a+u*n,t[2]=u*i*a-s*n,t[3]=0,t[4]=i*s*a-u*n,t[5]=s*s*a+o,t[6]=u*s*a+i*n,t[7]=0,t[8]=i*u*a+s*n,t[9]=s*u*a-i*n,t[10]=u*u*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function be(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=n+n,u=o+o,c=a+a,f=n*s,l=n*u,h=n*c,m=o*u,d=o*c,b=a*c,p=i*s,v=i*u,y=i*c;return t[0]=1-(m+b),t[1]=l+y,t[2]=h-v,t[3]=0,t[4]=l-y,t[5]=1-(f+b),t[6]=d+p,t[7]=0,t[8]=h+v,t[9]=d-p,t[10]=1-(f+m),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ge(t,e){var r=new d(3),n=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=n*n+o*o+a*a+i*i;return l>0?(r[0]=2*(s*i+f*n+u*a-c*o)/l,r[1]=2*(u*i+f*o+c*n-s*a)/l,r[2]=2*(c*i+f*a+s*o-u*n)/l):(r[0]=2*(s*i+f*n+u*a-c*o),r[1]=2*(u*i+f*o+c*n-s*a),r[2]=2*(c*i+f*a+s*o-u*n)),ye(t,e,r),t}function xe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Me(t,e){var r=e[0],n=e[1],o=e[2],a=e[4],i=e[5],s=e[6],u=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(r,n,o),t[1]=Math.hypot(a,i,s),t[2]=Math.hypot(u,c,f),t}function _e(t,e){var r=new d(3);Me(r,e);var n=1/r[0],o=1/r[1],a=1/r[2],i=e[0]*n,s=e[1]*o,u=e[2]*a,c=e[4]*n,f=e[5]*o,l=e[6]*a,h=e[8]*n,m=e[9]*o,b=e[10]*a,p=i+f+b,v=0;return p>0?(v=2*Math.sqrt(p+1),t[3]=.25*v,t[0]=(l-m)/v,t[1]=(h-u)/v,t[2]=(s-c)/v):i>f&&i>b?(v=2*Math.sqrt(1+i-f-b),t[3]=(l-m)/v,t[0]=.25*v,t[1]=(s+c)/v,t[2]=(h+u)/v):f>b?(v=2*Math.sqrt(1+f-i-b),t[3]=(h-u)/v,t[0]=(s+c)/v,t[1]=.25*v,t[2]=(l+m)/v):(v=2*Math.sqrt(1+b-i-f),t[3]=(s-c)/v,t[0]=(h+u)/v,t[1]=(l+m)/v,t[2]=.25*v),t}function we(t,e,r,n){var o=e[0],a=e[1],i=e[2],s=e[3],u=o+o,c=a+a,f=i+i,l=o*u,h=o*c,m=o*f,d=a*c,b=a*f,p=i*f,v=s*u,y=s*c,g=s*f,x=n[0],M=n[1],_=n[2];return t[0]=(1-(d+p))*x,t[1]=(h+g)*x,t[2]=(m-y)*x,t[3]=0,t[4]=(h-g)*M,t[5]=(1-(l+p))*M,t[6]=(b+v)*M,t[7]=0,t[8]=(m+y)*_,t[9]=(b-v)*_,t[10]=(1-(l+d))*_,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Ae(t,e,r,n,o){var a=e[0],i=e[1],s=e[2],u=e[3],c=a+a,f=i+i,l=s+s,h=a*c,m=a*f,d=a*l,b=i*f,p=i*l,v=s*l,y=u*c,g=u*f,x=u*l,M=n[0],_=n[1],w=n[2],A=o[0],F=o[1],E=o[2],P=(1-(b+v))*M,T=(m+x)*M,O=(d-g)*M,S=(m-x)*_,I=(1-(h+v))*_,B=(p+y)*_,j=(d+g)*w,C=(p-y)*w,R=(1-(h+b))*w;return t[0]=P,t[1]=T,t[2]=O,t[3]=0,t[4]=S,t[5]=I,t[6]=B,t[7]=0,t[8]=j,t[9]=C,t[10]=R,t[11]=0,t[12]=r[0]+A-(P*A+S*F+j*E),t[13]=r[1]+F-(T*A+I*F+C*E),t[14]=r[2]+E-(O*A+B*F+R*E),t[15]=1,t}function Fe(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r+r,s=n+n,u=o+o,c=r*i,f=n*i,l=n*s,h=o*i,m=o*s,d=o*u,b=a*i,p=a*s,v=a*u;return t[0]=1-l-d,t[1]=f+v,t[2]=h-p,t[3]=0,t[4]=f-v,t[5]=1-c-d,t[6]=m+b,t[7]=0,t[8]=h+p,t[9]=m-b,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ee(t,e,r,n,o,a,i){var s=1/(r-e),u=1/(o-n),c=1/(a-i);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(o+n)*u,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t}function Pe(t,e,r,n,o){var a,i=1/Math.tan(e/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(n-o),t[10]=(o+n)*a,t[14]=2*o*n*a):(t[10]=-1,t[14]=-2*n),t}var Te=Pe;function Oe(t,e,r,n,o){var a,i=1/Math.tan(e/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(n-o),t[10]=o*a,t[14]=o*n*a):(t[10]=-1,t[14]=-n),t}function Se(t,e,r,n){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(i+s),c=2/(o+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-s)*u*.5,t[9]=(o-a)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Ie(t,e,r,n,o,a,i){var s=1/(e-r),u=1/(n-o),c=1/(a-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(o+n)*u,t[14]=(i+a)*c,t[15]=1,t}var Be=Ie;function je(t,e,r,n,o,a,i){var s=1/(e-r),u=1/(n-o),c=1/(a-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+r)*s,t[13]=(o+n)*u,t[14]=a*c,t[15]=1,t}function Ce(t,e,r,n){var o,a,i,s,u,c,f,l,h,d,b=e[0],p=e[1],v=e[2],y=n[0],g=n[1],x=n[2],M=r[0],_=r[1],w=r[2];return Math.abs(b-M)<m&&Math.abs(p-_)<m&&Math.abs(v-w)<m?te(t):(f=b-M,l=p-_,h=v-w,o=g*(h*=d=1/Math.hypot(f,l,h))-x*(l*=d),a=x*(f*=d)-y*h,i=y*l-g*f,(d=Math.hypot(o,a,i))?(o*=d=1/d,a*=d,i*=d):(o=0,a=0,i=0),s=l*i-h*a,u=h*o-f*i,c=f*a-l*o,(d=Math.hypot(s,u,c))?(s*=d=1/d,u*=d,c*=d):(s=0,u=0,c=0),t[0]=o,t[1]=s,t[2]=f,t[3]=0,t[4]=a,t[5]=u,t[6]=l,t[7]=0,t[8]=i,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*b+a*p+i*v),t[13]=-(s*b+u*p+c*v),t[14]=-(f*b+l*p+h*v),t[15]=1,t)}function Re(t,e,r,n){var o=e[0],a=e[1],i=e[2],s=n[0],u=n[1],c=n[2],f=o-r[0],l=a-r[1],h=i-r[2],m=f*f+l*l+h*h;m>0&&(f*=m=1/Math.sqrt(m),l*=m,h*=m);var d=u*h-c*l,b=c*f-s*h,p=s*l-u*f;return(m=d*d+b*b+p*p)>0&&(d*=m=1/Math.sqrt(m),b*=m,p*=m),t[0]=d,t[1]=b,t[2]=p,t[3]=0,t[4]=l*p-h*b,t[5]=h*d-f*p,t[6]=f*b-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t}function ze(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function ke(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function De(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Ve(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function Le(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Ue(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function qe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function We(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=t[9],h=t[10],d=t[11],b=t[12],p=t[13],v=t[14],y=t[15],g=e[0],x=e[1],M=e[2],_=e[3],w=e[4],A=e[5],F=e[6],E=e[7],P=e[8],T=e[9],O=e[10],S=e[11],I=e[12],B=e[13],j=e[14],C=e[15];return Math.abs(r-g)<=m*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-x)<=m*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(o-M)<=m*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-_)<=m*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(i-w)<=m*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-A)<=m*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(u-F)<=m*Math.max(1,Math.abs(u),Math.abs(F))&&Math.abs(c-E)<=m*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(f-P)<=m*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(l-T)<=m*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(h-O)<=m*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(d-S)<=m*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(b-I)<=m*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(p-B)<=m*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(v-j)<=m*Math.max(1,Math.abs(v),Math.abs(j))&&Math.abs(y-C)<=m*Math.max(1,Math.abs(y),Math.abs(C))}var $e=ae,Ne=Ve;function Ge(){var t=new d(3);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Xe(t){var e=new d(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ye(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function He(t,e,r){var n=new d(3);return n[0]=t,n[1]=e,n[2]=r,n}function Qe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ze(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Ke(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Je(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function tr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function er(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function rr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function nr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function or(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function ar(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function ir(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function sr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function ur(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function cr(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return Math.hypot(r,n,o)}function fr(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return r*r+n*n+o*o}function lr(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function hr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function mr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function dr(t,e){var r=e[0],n=e[1],o=e[2],a=r*r+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function br(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pr(t,e,r){var n=e[0],o=e[1],a=e[2],i=r[0],s=r[1],u=r[2];return t[0]=o*u-a*s,t[1]=a*i-n*u,t[2]=n*s-o*i,t}function vr(t,e,r,n){var o=e[0],a=e[1],i=e[2];return t[0]=o+n*(r[0]-o),t[1]=a+n*(r[1]-a),t[2]=i+n*(r[2]-i),t}function yr(t,e,r,n,o,a){var i=a*a,s=i*(2*a-3)+1,u=i*(a-2)+a,c=i*(a-1),f=i*(3-2*a);return t[0]=e[0]*s+r[0]*u+n[0]*c+o[0]*f,t[1]=e[1]*s+r[1]*u+n[1]*c+o[1]*f,t[2]=e[2]*s+r[2]*u+n[2]*c+o[2]*f,t}function gr(t,e,r,n,o,a){var i=1-a,s=i*i,u=a*a,c=s*i,f=3*a*s,l=3*u*i,h=u*a;return t[0]=e[0]*c+r[0]*f+n[0]*l+o[0]*h,t[1]=e[1]*c+r[1]*f+n[1]*l+o[1]*h,t[2]=e[2]*c+r[2]*f+n[2]*l+o[2]*h,t}function xr(t,e){e=e||1;var r=2*b()*Math.PI,n=2*b()-1,o=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=n*e,t}function Mr(t,e,r){var n=e[0],o=e[1],a=e[2],i=r[3]*n+r[7]*o+r[11]*a+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*o+r[8]*a+r[12])/i,t[1]=(r[1]*n+r[5]*o+r[9]*a+r[13])/i,t[2]=(r[2]*n+r[6]*o+r[10]*a+r[14])/i,t}function _r(t,e,r){var n=e[0],o=e[1],a=e[2];return t[0]=n*r[0]+o*r[3]+a*r[6],t[1]=n*r[1]+o*r[4]+a*r[7],t[2]=n*r[2]+o*r[5]+a*r[8],t}function wr(t,e,r){var n=r[0],o=r[1],a=r[2],i=r[3],s=e[0],u=e[1],c=e[2],f=o*c-a*u,l=a*s-n*c,h=n*u-o*s,m=o*h-a*l,d=a*f-n*h,b=n*l-o*f,p=2*i;return f*=p,l*=p,h*=p,m*=2,d*=2,b*=2,t[0]=s+f+m,t[1]=u+l+d,t[2]=c+h+b,t}function Ar(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Fr(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Er(t,e,r,n){var o=[],a=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Pr(t,e){var r=t[0],n=t[1],o=t[2],a=e[0],i=e[1],s=e[2],u=Math.sqrt(r*r+n*n+o*o)*Math.sqrt(a*a+i*i+s*s),c=u&&br(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function Tr(t){return t[0]=0,t[1]=0,t[2]=0,t}function Or(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Sr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Ir(t,e){var r=t[0],n=t[1],o=t[2],a=e[0],i=e[1],s=e[2];return Math.abs(r-a)<=m*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-i)<=m*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-s)<=m*Math.max(1,Math.abs(o),Math.abs(s))}var Br,jr=Je,Cr=tr,Rr=er,zr=cr,kr=fr,Dr=Ye,Vr=lr,Lr=(Br=Ge(),function(t,e,r,n,o,a){var i,s;for(e||(e=3),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,i=r;i<s;i+=e)Br[0]=t[i],Br[1]=t[i+1],Br[2]=t[i+2],o(Br,Br,a),t[i]=Br[0],t[i+1]=Br[1],t[i+2]=Br[2];return t});function Ur(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function qr(t){var e=new d(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Wr(t,e,r,n){var o=new d(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o}function $r(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Nr(t,e,r,n,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t}function Gr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Xr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Yr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function Hr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Qr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Zr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Kr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function Jr(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function tn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function en(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function rn(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function nn(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return Math.hypot(r,n,o,a)}function on(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+o*o+a*a}function an(t){var e=t[0],r=t[1],n=t[2],o=t[3];return Math.hypot(e,r,n,o)}function sn(t){var e=t[0],r=t[1],n=t[2],o=t[3];return e*e+r*r+n*n+o*o}function un(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function cn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function fn(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r*r+n*n+o*o+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=r*i,t[1]=n*i,t[2]=o*i,t[3]=a*i,t}function ln(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function hn(t,e,r,n){var o=r[0]*n[1]-r[1]*n[0],a=r[0]*n[2]-r[2]*n[0],i=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],c=r[2]*n[3]-r[3]*n[2],f=e[0],l=e[1],h=e[2],m=e[3];return t[0]=l*c-h*u+m*s,t[1]=-f*c+h*i-m*a,t[2]=f*u-l*i+m*o,t[3]=-f*s+l*a-h*o,t}function mn(t,e,r,n){var o=e[0],a=e[1],i=e[2],s=e[3];return t[0]=o+n*(r[0]-o),t[1]=a+n*(r[1]-a),t[2]=i+n*(r[2]-i),t[3]=s+n*(r[3]-s),t}function dn(t,e){var r,n,o,a,i,s;e=e||1;do{i=(r=2*b()-1)*r+(n=2*b()-1)*n}while(i>=1);do{s=(o=2*b()-1)*o+(a=2*b()-1)*a}while(s>=1);var u=Math.sqrt((1-i)/s);return t[0]=e*r,t[1]=e*n,t[2]=e*o*u,t[3]=e*a*u,t}function bn(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3];return t[0]=r[0]*n+r[4]*o+r[8]*a+r[12]*i,t[1]=r[1]*n+r[5]*o+r[9]*a+r[13]*i,t[2]=r[2]*n+r[6]*o+r[10]*a+r[14]*i,t[3]=r[3]*n+r[7]*o+r[11]*a+r[15]*i,t}function pn(t,e,r){var n=e[0],o=e[1],a=e[2],i=r[0],s=r[1],u=r[2],c=r[3],f=c*n+s*a-u*o,l=c*o+u*n-i*a,h=c*a+i*o-s*n,m=-i*n-s*o-u*a;return t[0]=f*c+m*-i+l*-u-h*-s,t[1]=l*c+m*-s+h*-i-f*-u,t[2]=h*c+m*-u+f*-s-l*-i,t[3]=e[3],t}function vn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function yn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function gn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function xn(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(r-i)<=m*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=m*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=m*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=m*Math.max(1,Math.abs(a),Math.abs(c))}var Mn=Xr,_n=Yr,wn=Hr,An=nn,Fn=on,En=an,Pn=sn,Tn=function(){var t=Ur();return function(e,r,n,o,a,i){var s,u;for(r||(r=4),n||(n=0),u=o?Math.min(o*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,i),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function On(){var t=new d(4);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Sn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function In(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Bn(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>m?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function jn(t,e){var r=uo(t,e);return Math.acos(2*r*r-1)}function Cn(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=r[0],u=r[1],c=r[2],f=r[3];return t[0]=n*f+i*s+o*c-a*u,t[1]=o*f+i*u+a*s-n*c,t[2]=a*f+i*c+n*u-o*s,t[3]=i*f-n*s-o*u-a*c,t}function Rn(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=o*u+a*s,t[2]=a*u-o*s,t[3]=i*u-n*s,t}function zn(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-a*s,t[1]=o*u+i*s,t[2]=a*u+n*s,t[3]=i*u-o*s,t}function kn(t,e,r){r*=.5;var n=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*s,t[1]=o*u-n*s,t[2]=a*u+i*s,t[3]=i*u-a*s,t}function Dn(t,e){var r=e[0],n=e[1],o=e[2];return t[0]=r,t[1]=n,t[2]=o,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-o*o)),t}function Vn(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=Math.sqrt(r*r+n*n+o*o),s=Math.exp(a),u=i>0?s*Math.sin(i)/i:0;return t[0]=r*u,t[1]=n*u,t[2]=o*u,t[3]=s*Math.cos(i),t}function Ln(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=Math.sqrt(r*r+n*n+o*o),s=i>0?Math.atan2(i,a)/i:0;return t[0]=r*s,t[1]=n*s,t[2]=o*s,t[3]=.5*Math.log(r*r+n*n+o*o+a*a),t}function Un(t,e,r){return Ln(t,e),so(t,t,r),Vn(t,t),t}function qn(t,e,r,n){var o,a,i,s,u,c=e[0],f=e[1],l=e[2],h=e[3],d=r[0],b=r[1],p=r[2],v=r[3];return(a=c*d+f*b+l*p+h*v)<0&&(a=-a,d=-d,b=-b,p=-p,v=-v),1-a>m?(o=Math.acos(a),i=Math.sin(o),s=Math.sin((1-n)*o)/i,u=Math.sin(n*o)/i):(s=1-n,u=n),t[0]=s*c+u*d,t[1]=s*f+u*b,t[2]=s*l+u*p,t[3]=s*h+u*v,t}function Wn(t){var e=b(),r=b(),n=b(),o=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=a*Math.sin(2*Math.PI*n),t[3]=a*Math.cos(2*Math.PI*n),t}function $n(t,e){var r=e[0],n=e[1],o=e[2],a=e[3],i=r*r+n*n+o*o+a*a,s=i?1/i:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-o*s,t[3]=a*s,t}function Nn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Gn(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;r=Math.sqrt(e[3*o+o]-e[3*a+a]-e[3*i+i]+1),t[o]=.5*r,r=.5/r,t[3]=(e[3*a+i]-e[3*i+a])*r,t[a]=(e[3*a+o]+e[3*o+a])*r,t[i]=(e[3*i+o]+e[3*o+i])*r}return t}function Xn(t,e,r,n){var o=.5*Math.PI/180;e*=o,r*=o,n*=o;var a=Math.sin(e),i=Math.cos(e),s=Math.sin(r),u=Math.cos(r),c=Math.sin(n),f=Math.cos(n);return t[0]=a*u*f-i*s*c,t[1]=i*s*f+a*u*c,t[2]=i*u*c-a*s*f,t[3]=i*u*f+a*s*c,t}function Yn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Hn,Qn,Zn,Kn,Jn,to,eo=qr,ro=Wr,no=$r,oo=Nr,ao=Gr,io=Cn,so=en,uo=ln,co=mn,fo=an,lo=fo,ho=sn,mo=ho,bo=fn,po=gn,vo=xn,yo=(Hn=Ge(),Qn=He(1,0,0),Zn=He(0,1,0),function(t,e,r){var n=br(e,r);return n<-.999999?(pr(Hn,Qn,e),Dr(Hn)<1e-6&&pr(Hn,Zn,e),dr(Hn,Hn),In(t,Hn,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(pr(Hn,e,r),t[0]=Hn[0],t[1]=Hn[1],t[2]=Hn[2],t[3]=1+n,bo(t,t))}),go=(Kn=On(),Jn=On(),function(t,e,r,n,o,a){return qn(Kn,e,o,a),qn(Jn,r,n,a),qn(t,Kn,Jn,2*a*(1-a)),t}),xo=(to=vt(),function(t,e,r,n){return to[0]=r[0],to[3]=r[1],to[6]=r[2],to[1]=n[0],to[4]=n[1],to[7]=n[2],to[2]=-e[0],to[5]=-e[1],to[8]=-e[2],bo(t,Gn(t,to))});function Mo(){var t=new d(8);return d!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function _o(t){var e=new d(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function wo(t,e,r,n,o,a,i,s){var u=new d(8);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=o,u[5]=a,u[6]=i,u[7]=s,u}function Ao(t,e,r,n,o,a,i){var s=new d(8);s[0]=t,s[1]=e,s[2]=r,s[3]=n;var u=.5*o,c=.5*a,f=.5*i;return s[4]=u*n+c*r-f*e,s[5]=c*n+f*t-u*r,s[6]=f*n+u*e-c*t,s[7]=-u*t-c*e-f*r,s}function Fo(t,e,r){var n=.5*r[0],o=.5*r[1],a=.5*r[2],i=e[0],s=e[1],u=e[2],c=e[3];return t[0]=i,t[1]=s,t[2]=u,t[3]=c,t[4]=n*c+o*u-a*s,t[5]=o*c+a*i-n*u,t[6]=a*c+n*s-o*i,t[7]=-n*i-o*s-a*u,t}function Eo(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Po(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function To(t,e){var r=On();_e(r,e);var n=new d(3);return xe(n,e),Fo(t,r,n),t}function Oo(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function So(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Io(t,e,r,n,o,a,i,s,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t}var Bo=no;function jo(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Co=no;function Ro(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function zo(t,e){var r=e[4],n=e[5],o=e[6],a=e[7],i=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(r*c+a*i+n*u-o*s),t[1]=2*(n*c+a*s+o*i-r*u),t[2]=2*(o*c+a*u+r*s-n*i),t}function ko(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=.5*r[0],u=.5*r[1],c=.5*r[2],f=e[4],l=e[5],h=e[6],m=e[7];return t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=i*s+o*c-a*u+f,t[5]=i*u+a*s-n*c+l,t[6]=i*c+n*u-o*s+h,t[7]=-n*s-o*u-a*c+m,t}function Do(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*i+f*n+u*a-c*o,h=u*i+f*o+c*n-s*a,m=c*i+f*a+s*o-u*n,d=f*i-s*n-u*o-c*a;return Rn(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+d*n+h*a-m*o,t[5]=h*i+d*o+m*n-l*a,t[6]=m*i+d*a+l*o-h*n,t[7]=d*i-l*n-h*o-m*a,t}function Vo(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*i+f*n+u*a-c*o,h=u*i+f*o+c*n-s*a,m=c*i+f*a+s*o-u*n,d=f*i-s*n-u*o-c*a;return zn(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+d*n+h*a-m*o,t[5]=h*i+d*o+m*n-l*a,t[6]=m*i+d*a+l*o-h*n,t[7]=d*i-l*n-h*o-m*a,t}function Lo(t,e,r){var n=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],f=e[7],l=s*i+f*n+u*a-c*o,h=u*i+f*o+c*n-s*a,m=c*i+f*a+s*o-u*n,d=f*i-s*n-u*o-c*a;return kn(t,e,r),n=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+d*n+h*a-m*o,t[5]=h*i+d*o+m*n-l*a,t[6]=m*i+d*a+l*o-h*n,t[7]=d*i-l*n-h*o-m*a,t}function Uo(t,e,r){var n=r[0],o=r[1],a=r[2],i=r[3],s=e[0],u=e[1],c=e[2],f=e[3];return t[0]=s*i+f*n+u*a-c*o,t[1]=u*i+f*o+c*n-s*a,t[2]=c*i+f*a+s*o-u*n,t[3]=f*i-s*n-u*o-c*a,s=e[4],u=e[5],c=e[6],f=e[7],t[4]=s*i+f*n+u*a-c*o,t[5]=u*i+f*o+c*n-s*a,t[6]=c*i+f*a+s*o-u*n,t[7]=f*i-s*n-u*o-c*a,t}function qo(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=r[0],u=r[1],c=r[2],f=r[3];return t[0]=n*f+i*s+o*c-a*u,t[1]=o*f+i*u+a*s-n*c,t[2]=a*f+i*c+n*u-o*s,t[3]=i*f-n*s-o*u-a*c,s=r[4],u=r[5],c=r[6],f=r[7],t[4]=n*f+i*s+o*c-a*u,t[5]=o*f+i*u+a*s-n*c,t[6]=a*f+i*c+n*u-o*s,t[7]=i*f-n*s-o*u-a*c,t}function Wo(t,e,r,n){if(Math.abs(n)<m)return Oo(t,e);var o=Math.hypot(r[0],r[1],r[2]);n*=.5;var a=Math.sin(n),i=a*r[0]/o,s=a*r[1]/o,u=a*r[2]/o,c=Math.cos(n),f=e[0],l=e[1],h=e[2],d=e[3];t[0]=f*c+d*i+l*u-h*s,t[1]=l*c+d*s+h*i-f*u,t[2]=h*c+d*u+f*s-l*i,t[3]=d*c-f*i-l*s-h*u;var b=e[4],p=e[5],v=e[6],y=e[7];return t[4]=b*c+y*i+p*u-v*s,t[5]=p*c+y*s+v*i-b*u,t[6]=v*c+y*u+b*s-p*i,t[7]=y*c-b*i-p*s-v*u,t}function $o(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function No(t,e,r){var n=e[0],o=e[1],a=e[2],i=e[3],s=r[4],u=r[5],c=r[6],f=r[7],l=e[4],h=e[5],m=e[6],d=e[7],b=r[0],p=r[1],v=r[2],y=r[3];return t[0]=n*y+i*b+o*v-a*p,t[1]=o*y+i*p+a*b-n*v,t[2]=a*y+i*v+n*p-o*b,t[3]=i*y-n*b-o*p-a*v,t[4]=n*f+i*s+o*c-a*u+l*y+d*b+h*v-m*p,t[5]=o*f+i*u+a*s-n*c+h*y+d*p+m*b-l*v,t[6]=a*f+i*c+n*u-o*s+m*y+d*v+l*p-h*b,t[7]=i*f-n*s-o*u-a*c+d*y-l*b-h*p-m*v,t}var Go=No;function Xo(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var Yo=uo;function Ho(t,e,r,n){var o=1-n;return Yo(e,r)<0&&(n=-n),t[0]=e[0]*o+r[0]*n,t[1]=e[1]*o+r[1]*n,t[2]=e[2]*o+r[2]*n,t[3]=e[3]*o+r[3]*n,t[4]=e[4]*o+r[4]*n,t[5]=e[5]*o+r[5]*n,t[6]=e[6]*o+r[6]*n,t[7]=e[7]*o+r[7]*n,t}function Qo(t,e){var r=ta(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Zo(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Ko=fo,Jo=Ko,ta=ho,ea=ta;function ra(t,e){var r=ta(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,o=e[1]/r,a=e[2]/r,i=e[3]/r,s=e[4],u=e[5],c=e[6],f=e[7],l=n*s+o*u+a*c+i*f;t[0]=n,t[1]=o,t[2]=a,t[3]=i,t[4]=(s-n*l)/r,t[5]=(u-o*l)/r,t[6]=(c-a*l)/r,t[7]=(f-i*l)/r}return t}function na(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function oa(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function aa(t,e){var r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],f=e[0],l=e[1],h=e[2],d=e[3],b=e[4],p=e[5],v=e[6],y=e[7];return Math.abs(r-f)<=m*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-l)<=m*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-h)<=m*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-d)<=m*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-b)<=m*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(s-p)<=m*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-v)<=m*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-y)<=m*Math.max(1,Math.abs(c),Math.abs(y))}function ia(){var t=new d(2);return d!=Float32Array&&(t[0]=0,t[1]=0),t}function sa(t){var e=new d(2);return e[0]=t[0],e[1]=t[1],e}function ua(t,e){var r=new d(2);return r[0]=t,r[1]=e,r}function ca(t,e){return t[0]=e[0],t[1]=e[1],t}function fa(t,e,r){return t[0]=e,t[1]=r,t}function la(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function ha(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function ma(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function da(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function ba(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function pa(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function va(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function ya(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function ga(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function xa(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function Ma(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function _a(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function wa(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function Aa(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function Fa(t){var e=t[0],r=t[1];return e*e+r*r}function Ea(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Pa(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Ta(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function Oa(t,e){return t[0]*e[0]+t[1]*e[1]}function Sa(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function Ia(t,e,r,n){var o=e[0],a=e[1];return t[0]=o+n*(r[0]-o),t[1]=a+n*(r[1]-a),t}function Ba(t,e){e=e||1;var r=2*b()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function ja(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o,t[1]=r[1]*n+r[3]*o,t}function Ca(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t}function Ra(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[3]*o+r[6],t[1]=r[1]*n+r[4]*o+r[7],t}function za(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[4]*o+r[12],t[1]=r[1]*n+r[5]*o+r[13],t}function ka(t,e,r,n){var o=e[0]-r[0],a=e[1]-r[1],i=Math.sin(n),s=Math.cos(n);return t[0]=o*s-a*i+r[0],t[1]=o*i+a*s+r[1],t}function Da(t,e){var r=t[0],n=t[1],o=e[0],a=e[1],i=Math.sqrt(r*r+n*n)*Math.sqrt(o*o+a*a),s=i&&(r*o+n*a)/i;return Math.acos(Math.min(Math.max(s,-1),1))}function Va(t){return t[0]=0,t[1]=0,t}function La(t){return"vec2("+t[0]+", "+t[1]+")"}function Ua(t,e){return t[0]===e[0]&&t[1]===e[1]}function qa(t,e){var r=t[0],n=t[1],o=e[0],a=e[1];return Math.abs(r-o)<=m*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=m*Math.max(1,Math.abs(n),Math.abs(a))}var Wa=Aa,$a=ha,Na=ma,Ga=da,Xa=_a,Ya=wa,Ha=Fa,Qa=function(){var t=ia();return function(e,r,n,o,a,i){var s,u;for(r||(r=2),n||(n=0),u=o?Math.min(o*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],a(t,t,i),e[s]=t[0],e[s+1]=t[1];return e}}()},372:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\n\nprecision highp float;\n\n// the varied color passed from the vertex shader\nin vec4 v_color;\nin vec2 v_texcoord;\n\n\n// we need to declare an output for the fragment shader\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}"},91:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\n\n// an attribute is an input (in) to a vertex shader.\n// It will receive data from a buffer\nin vec4 a_position;\nin vec2 a_texcoord;\nin vec4 a_color;\n\n// A matrix to transform the positions by\nuniform mat4 u_matrix;\n\n// The world matrix to rotate \nuniform mat4 u_world_matrix;\n\n// a varying the color to the fragment shader\nout vec4 v_color;\nout vec2 v_texcoord;\n\n// all shaders have a main function\nvoid main() {\n  // Multiply the position by the matrix.\n  gl_Position = u_matrix * u_world_matrix * a_position;\n\n  // Pass the color to the fragment shader.\n  v_color = a_color;\n  v_texcoord = a_texcoord;\n}"},742:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\n\nin vec2 a_position;\nin vec2 a_texcoord;\n\nout vec2 v_texcoord;\n\nvoid main()\n{\n    v_texcoord = a_texcoord;\n    gl_Position = vec4(a_position.x, a_position.y, 0.0, 1.0); \n}  \n\n"},318:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\n\nprecision highp float;\n\nin vec2 v_texcoord;\n\nout vec4 FragColor;\n\n\nuniform sampler2D u_screen;\n\nvoid main()\n{\n    // grey effect\n    vec3 col = texture(u_screen, v_texcoord).rgb;\n    float grey = dot(col, vec3(0.2126, 0.7152, 0.0722));\n    col = vec3(grey, grey, grey);\n    FragColor = vec4(col, 1.0);\n} "},615:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\n\nprecision highp float;\n\nin vec2 v_texcoord;\n\nout vec4 FragColor;\n\n\nuniform sampler2D u_screen;\n\nvoid main()\n{\n    // guassian blur\n    vec2 tex_offset = 1.0 / vec2(textureSize(u_screen, 0)); // gets size of single texel\n    vec3 result = vec3(0.0);\n    for(int x = -2; x <= 2; x++)\n    {\n        for(int y = -2; y <= 2; y++)\n        {\n            vec2 offset = vec2(x, y) * tex_offset;\n            vec4 this_color = texture(u_screen, v_texcoord + offset);\n            result += vec3(this_color.r, this_color.g, this_color.b);\n        }\n    }\n    vec3 col = vec3(result / 25.0);\n    FragColor = vec4(col, 1.0);\n} "},913:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\n\nprecision highp float;\n\nin vec2 v_texcoord;\n\nout vec4 FragColor;\n\n\nuniform sampler2D u_screen;\n\nvoid main()\n{\n    // raw effect\n    vec3 col = texture(u_screen, v_texcoord).rgb;\n    FragColor = vec4(col, 1.0);\n} "},981:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\n\nprecision highp float;\n\nin vec2 v_texcoord;\n\nout vec4 FragColor;\n\n\nuniform sampler2D u_screen;\n\nvoid main()\n{\n    // reverse effect\n    vec3 col = texture(u_screen, v_texcoord).rgb;\n    col = 1.0 - col;\n    FragColor = vec4(col, 1.0);\n} "},734:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\n\nprecision highp float;\n\nin vec2 v_texcoord;\n\nout vec4 FragColor;\n\n\nuniform sampler2D u_screen;\n\nvoid main()\n{\n    vec3 col = texture(u_screen, v_texcoord).rgb;\n    // create a vignette effect\n    float dist = distance(v_texcoord, vec2(0.5, 0.5));\n    col *= smoothstep(0.7, 0.2, dist);\n\n    FragColor = vec4(col, 1.0);\n} "},320:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\n\nprecision highp float;\n\n// the varied color passed from the vertex shader\nin vec4 v_color;\nin vec2 v_texcoord;\n\n// texture for the fragment shader\nuniform sampler2D u_diffuse;\n\n// we need to declare an output for the fragment shader\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(u_diffuse, v_texcoord) * v_color;\n}"},284:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\n\n// an attribute is an input (in) to a vertex shader.\n// It will receive data from a buffer\nin vec4 a_position;\nin vec2 a_texcoord;\n\n// color to pass to the fragment shader\nuniform vec4 u_color;\n\n// A matrix to transform the positions by\nuniform mat4 u_matrix;\n\n// The world matrix to rotate \nuniform mat4 u_world_matrix;\n\n// a varying the color to the fragment shader\nout vec4 v_color;\nout vec2 v_texcoord;\n\n// all shaders have a main function\nvoid main() {\n  // Multiply the position by the matrix.\n  gl_Position = u_matrix * u_world_matrix * a_position;\n\n  // Pass the color to the fragment shader.\n  v_color = u_color;\n  v_texcoord = a_texcoord;\n}"},837:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\nprecision highp float;\n\n// texture for the skybox\nuniform samplerCube u_skybox;\n\nuniform mat4 u_viewDirectionProjectionInverse;\n\n// input position\nin vec4 v_position;\n\n// we need to declare an output for the fragment shader\nout vec4 outColor;\n\nvoid main() {\n  vec4 t = u_viewDirectionProjectionInverse * v_position;\n  outColor = texture(u_skybox, normalize(t.xyz / t.w));\n}"},543:(t,e,r)=>{r.r(e),r.d(e,{default:()=>n});const n="#version 300 es\n\nin vec4 a_position;\n\nout vec4 v_position;\n\nvoid main() {\n  v_position = a_position;\n  gl_Position = vec4(a_position.xy, 1, 1);\n}"},963:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=e.CameraMovement=void 0;const n=r(887),o=r(201);var a;!function(t){t[t.FORWARD=0]="FORWARD",t[t.BACKWARD=1]="BACKWARD",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT",t[t.UP=4]="UP",t[t.DOWN=5]="DOWN"}(a=e.CameraMovement||(e.CameraMovement={})),e.Camera=class{update_camera_vectors(){let t=n.vec3.create();t[0]=Math.cos((0,o.deg_to_rad)(this.yaw))*Math.cos((0,o.deg_to_rad)(this.pitch)),t[1]=Math.sin((0,o.deg_to_rad)(this.pitch)),t[2]=Math.sin((0,o.deg_to_rad)(this.yaw))*Math.cos((0,o.deg_to_rad)(this.pitch)),n.vec3.normalize(this.front_axis,t),n.vec3.cross(this.right_axis,this.front_axis,this.world_up),n.vec3.normalize(this.right_axis,this.right_axis),n.vec3.cross(this.up_axis,this.right_axis,this.front_axis),n.vec3.normalize(this.up_axis,this.up_axis)}constructor(t=n.vec3.fromValues(0,0,1),e=n.vec3.fromValues(0,1,0),r=-90,o=0){this.position=n.vec3.fromValues(0,0,0),this.front_axis=n.vec3.fromValues(0,0,-1),this.up_axis=n.vec3.fromValues(0,1,0),this.right_axis=n.vec3.fromValues(1,0,0),this.movement_speed=2.5,this.mouse_sensitivity=.1,this.zoom=45,this.position=t,this.world_up=e,this.yaw=r,this.pitch=o,this.update_camera_vectors()}setup_interaction(t,e=(t=>{})){document.addEventListener("wheel",(t=>{this.process_mouse_scroll(t.deltaY>0?1:-1),e(this)})),document.addEventListener("keydown",(t=>{switch(t.key){case"w":this.process_keyboard(a.FORWARD,.1);break;case"s":this.process_keyboard(a.BACKWARD,.1);break;case"a":this.process_keyboard(a.LEFT,.1);break;case"d":this.process_keyboard(a.RIGHT,.1);break;case"q":this.process_keyboard(a.UP,.1);break;case"e":this.process_keyboard(a.DOWN,.1)}e(this)}));let r=!1,n=0,o=0;t.addEventListener("mousedown",(function(t){r=!0,n=t.clientX,o=t.clientY})),t.addEventListener("mousemove",(t=>{r&&(this.process_mouse_movement(t.clientX-n,t.clientY-o),n=t.clientX,o=t.clientY,e(this))})),t.addEventListener("mouseup",(t=>{r=!1})),t.addEventListener("mouseleave",(t=>{r=!1}))}set_position(t){this.position=t,this.update_camera_vectors()}set_yaw_pitch(t,e){this.yaw=t,this.pitch=e,this.update_camera_vectors()}set_zoom(t){this.zoom=t,this.update_camera_vectors()}get_position_string(){return`(${this.position[0].toFixed(2)}, ${this.position[1].toFixed(2)}, ${this.position[2].toFixed(2)})`}get_angles_string(){return`(yaw: ${this.yaw.toFixed(2)}, pitch: ${this.pitch.toFixed(2)})`}get_zoom_string(){return`zoom: ${this.zoom.toFixed(2)}`}get_eye_position(){return n.vec3.clone(this.position)}get_view_matrix(){let t=n.mat4.create(),e=n.vec3.create();return n.vec3.add(e,this.position,this.front_axis),n.mat4.lookAt(t,this.position,e,this.up_axis),t}get_projection_matrix(t,e,r=1,a=100){return n.mat4.perspective(n.mat4.create(),(0,o.deg_to_rad)(this.zoom),t/e,r,a)}process_keyboard(t,e){let r=this.movement_speed*e;t==a.FORWARD&&n.vec3.scaleAndAdd(this.position,this.position,this.front_axis,r),t==a.BACKWARD&&n.vec3.scaleAndAdd(this.position,this.position,this.front_axis,-r),t==a.LEFT&&n.vec3.scaleAndAdd(this.position,this.position,this.right_axis,-r),t==a.RIGHT&&n.vec3.scaleAndAdd(this.position,this.position,this.right_axis,r),t==a.UP&&n.vec3.scaleAndAdd(this.position,this.position,this.up_axis,r),t==a.DOWN&&n.vec3.scaleAndAdd(this.position,this.position,this.up_axis,-r)}process_mouse_movement(t,e,r=!0){t*=this.mouse_sensitivity,e*=this.mouse_sensitivity,this.yaw+=t,this.pitch+=e,r&&(this.pitch>89&&(this.pitch=89),this.pitch<-89&&(this.pitch=-89)),this.update_camera_vectors()}process_mouse_scroll(t){console.log(t),this.zoom>=1&&this.zoom<=90&&(this.zoom-=t),this.zoom<=1&&(this.zoom=1),this.zoom>=90&&(this.zoom=90)}}},410:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionTest=void 0;const n=r(887),o=r(132);e.CollisionTest=class{constructor(t,e=console.log){this.objects=[],this.boundaries=[],this.boundaries=t,this.output_function=e}set_boundary(t){this.boundaries=t}clearObjects(){this.objects=[]}addObject(t){this.objects.push(t)}detectCollision(){const t=this.objects.length;for(let e=0;e<t;e++)for(let r=e+1;r<t;r++){if(!this.objects[e].enableCollision||!this.objects[r].enableCollision)continue;const t=(0,o.isColliding)(this.objects[e],this.objects[r]);if(t[0]&&t[1]&&t[2]){const t=(new Date).toLocaleTimeString();if(this.output_function(`${t}, object ${e} and ${r} is colliding.`),this.objects[e].enableMove&&this.objects[r].enableMove){const t=this.objects[e].speed;this.objects[e].speed=this.objects[r].speed,this.objects[r].speed=t}else this.objects[e].enableMove&&(this.objects[e].speed=n.vec3.negate(n.vec3.create(),this.objects[e].speed)),this.objects[r].enableMove&&(this.objects[r].speed=n.vec3.negate(n.vec3.create(),this.objects[r].speed))}}for(let e=0;e<t;e++){const t=this.objects[e].getAABBBox();for(let r=0;r<3;r++){const n=(new Date).toLocaleTimeString();t[r][0]<this.boundaries[r][0]?(this.output_function(`${n}, object ${e} is colliding with boundary dim ${r} min`),this.objects[e].speed[r]=Math.abs(this.objects[e].speed[r])):t[r][1]>this.boundaries[r][1]&&(this.output_function(`${n}, object ${e} is colliding with boundary dim ${r} max`),this.objects[e].speed[r]=-Math.abs(this.objects[e].speed[r]))}}}updatePosition(t){for(const e of this.objects)e.updatePosition(t)}}},312:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigReader=void 0;const i=r(887),s=r(458),u=r(152),c=a(r(460));e.ConfigReader=class{constructor(t){this.gl=t}readFile(t){return new Promise(((e,r)=>{let n=new FileReader;n.readAsText(t),n.onload=()=>{try{let t=n.result;e(t)}catch(t){r(t)}}}))}load(t){return new Promise(((e,r)=>{this.readFile(t).then((t=>{try{const r=JSON.parse(t);e(r)}catch(t){r(t)}}))}))}set_camera(t,e){3==t.position.length?2==t.angle.length?t.angle[1]<=-89||t.angle[1]>=89?alert(`camera pitch should be in range (-89, 89), but got ${t.angle[1]}`):t.zoom<=0||t.zoom>90?alert(`camera zoom should be in range (0, 90], but got ${t.zoom}`):(e.set_position(i.vec3.fromValues(t.position[0],t.position[1],t.position[2])),e.set_yaw_pitch(t.angle[0],t.angle[1]),e.set_zoom(t.zoom)):alert("Camera angle should be a 2D vector (yaw, pitch)"):alert("Camera position should be a 3D vector")}set_boundary(t,e){if(2!=t.x.length)return void alert("Boundary x should be a 2D vector");if(2!=t.y.length)return void alert("Boundary y should be a 2D vector");if(2!=t.z.length)return void alert("Boundary z should be a 2D vector");const r=i.vec2.fromValues(t.x[0],t.x[1]),n=i.vec2.fromValues(t.y[0],t.y[1]),o=i.vec2.fromValues(t.z[0],t.z[1]);e.set_boundary([r,n,o])}set_objects(t,e){const r=[];return e.clearObjects(),t.forEach((t=>{if(3!=t.position.length)return void alert("Object position should be a 3D vector");if(3!=t.speed.length)return void alert("Object speed should be a 3D vector");if(3!=t.color.length)return void alert("Object color should be a 3D vector");if(t.size<=0)return void alert(`Object size should be positive, but got ${t.size}`);const n=i.vec3.fromValues(t.position[0],t.position[1],t.position[2]),o=i.vec3.fromValues(t.speed[0],t.speed[1],t.speed[2]),a=i.vec3.fromValues(t.color[0],t.color[1],t.color[2]);if("ball"==t.type){const i=new s.Ball(this.gl,n,o,t.size,a,t.isMovable);r.push(i),e.addObject(i)}else if("cube"==t.type){const i=c.createTexture(this.gl,{min:this.gl.NEAREST,mag:this.gl.NEAREST,src:[255,255,255,255,192,192,192,255,192,192,192,255,255,255,255,255]}),s=new u.Cube(this.gl,n,o,t.size,a,t.isMovable,i);r.push(s),e.addObject(s)}else alert(`Unknown object type ${t.type}`)})),r}}},275:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.FramebufferExporter=e.FrameBufferType=void 0;const s=i(r(742)),u=i(r(913)),c=i(r(318)),f=i(r(981)),l=i(r(615)),h=i(r(734)),m=a(r(460));var d;!function(t){t[t.Raw=0]="Raw",t[t.Grey=1]="Grey",t[t.Reverse=2]="Reverse",t[t.Guass=3]="Guass",t[t.Vignette=4]="Vignette"}(d=e.FrameBufferType||(e.FrameBufferType={}));const b=[u.default,c.default,f.default,l.default,h.default];e.FramebufferExporter=class{constructor(t,e,r=d.Raw){this.currentType=d.Raw,this.gl=t,this.programInfo=m.createProgramInfo(t,[s.default,b[r]]),this.quadBufferInfo=m.primitives.createXYQuadBufferInfo(t),this.quadVAO=m.createVAOFromBufferInfo(t,this.programInfo,this.quadBufferInfo),this.framebufferInfo=e}recreate(t=d.Raw){this.programInfo=m.createProgramInfo(this.gl,[s.default,b[t]]),this.quadVAO=m.createVAOFromBufferInfo(this.gl,this.programInfo,this.quadBufferInfo),this.currentType=t}render(t,e=!0){e&&(m.resizeCanvasToDisplaySize(t),this.gl.viewport(0,0,t.width,t.height),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)),this.gl.disable(this.gl.DEPTH_TEST),this.gl.disable(this.gl.BLEND),this.gl.useProgram(this.programInfo.program),this.gl.bindVertexArray(this.quadVAO);const r={u_screen:this.framebufferInfo.attachments[0]};m.setUniforms(this.programInfo,r),m.drawBufferInfo(this.gl,this.quadBufferInfo)}}},458:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Ball=void 0;const s=r(887),u=a(r(460)),c=i(r(91)),f=i(r(372)),l=r(132);class h extends l.BasicObject{constructor(t,e,r,n,o=s.vec3.fromValues(1,1,1),a=!0){super(t,c.default,f.default,e,r,o,n,!0,a);const i=u.primitives.createSphereVertices(n/2,8,6);let l=[];for(let t=0;t<i.position.length;t+=3){const t=.5*Math.random()+.5;l.push(o[0]*t,o[1]*t,o[2]*t,1)}i.color=new Float32Array(l),console.log(i),this.ballBuffer=u.createBufferInfoFromArrays(t,i),this.ballVAO=u.createVAOFromBufferInfo(t,this.programInfo,this.ballBuffer)}render(t,e){const r=this.gl;r.enable(r.DEPTH_TEST);const n=s.mat4.multiply(s.mat4.create(),t.get_projection_matrix(e.width,e.height),t.get_view_matrix());r.depthFunc(r.LESS),r.useProgram(this.programInfo.program),r.bindVertexArray(this.ballVAO);const o={u_matrix:n,u_world_matrix:s.mat4.fromTranslation(s.mat4.create(),this.position),u_color:s.vec4.fromValues(this.color[0],this.color[1],this.color[2],1)};u.setUniforms(this.programInfo,o),u.drawBufferInfo(r,this.ballBuffer)}getAABBBox(){const t=this.size/2;return[s.vec2.fromValues(this.position[0]-t,this.position[0]+t),s.vec2.fromValues(this.position[1]-t,this.position[1]+t),s.vec2.fromValues(this.position[2]-t,this.position[2]+t)]}}e.Ball=h},132:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.isColliding=e.BasicObject=void 0;const i=a(r(460)),s=r(887);function u(t,e){return t[0]<=e[1]&&t[1]>=e[0]}e.BasicObject=class{constructor(t,e,r,n,o,a,u,c,f){this.position=s.vec3.create(),this.speed=s.vec3.create(),this.enableCollision=!0,this.enableMove=!0,this.gl=t,this.programInfo=i.createProgramInfo(t,[e,r]),this.position=n,this.speed=o,this.enableCollision=c,this.enableMove=f,this.color=a,this.size=u}updatePosition(t){this.enableMove&&s.vec3.scaleAndAdd(this.position,this.position,this.speed,t)}},e.isColliding=function(t,e){const r=t.getAABBBox(),n=e.getAABBBox(),o=[!1,!1,!1];for(let t=0;t<3;t++)o[t]=u(r[t],n[t]);return o}},152:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Cube=void 0;const s=r(887),u=a(r(460)),c=i(r(284)),f=i(r(320)),l=r(132);class h extends l.BasicObject{constructor(t,e,r,n,o=s.vec3.fromValues(1,1,1),a=!0,i=null){super(t,c.default,f.default,e,r,o,n,!0,a);const l=u.primitives.createCubeVertices(n);if(console.log(l),this.cubeBuffer=u.createBufferInfoFromArrays(t,l),this.cubeVAO=u.createVAOFromBufferInfo(t,this.programInfo,this.cubeBuffer),null==i){const e={min:t.NEAREST,mag:t.NEAREST,src:[255,255,255,255,192,192,192,255,192,192,192,255,255,255,255,255]};this.texture=u.createTexture(t,e)}else this.texture=i}render(t,e){const r=this.gl;r.enable(r.DEPTH_TEST);const n=s.mat4.multiply(s.mat4.create(),t.get_projection_matrix(e.width,e.height),t.get_view_matrix());r.depthFunc(r.LESS),r.useProgram(this.programInfo.program),r.bindVertexArray(this.cubeVAO);const o={u_matrix:n,u_world_matrix:s.mat4.fromTranslation(s.mat4.create(),this.position),u_color:s.vec4.fromValues(this.color[0],this.color[1],this.color[2],1),u_diffuse:this.texture};u.setUniforms(this.programInfo,o),u.drawBufferInfo(r,this.cubeBuffer)}getAABBBox(){const t=this.size/2;return[s.vec2.fromValues(this.position[0]-t,this.position[0]+t),s.vec2.fromValues(this.position[1]-t,this.position[1]+t),s.vec2.fromValues(this.position[2]-t,this.position[2]+t)]}}e.Cube=h},48:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.SkyBox=void 0;const s=a(r(460)),u=r(887),c=i(r(543)),f=i(r(837));e.SkyBox=class{constructor(t,e){this.gl=t,this.skyboxTexture=e,this.programInfo=s.createProgramInfo(t,[c.default,f.default]),this.quadBufferInfo=s.primitives.createXYQuadBufferInfo(t),this.quadVAO=s.createVAOFromBufferInfo(t,this.programInfo,this.quadBufferInfo)}render(t,e){const r=u.mat4.invert(u.mat4.create(),t.get_view_matrix());this.gl.depthFunc(this.gl.LEQUAL),this.gl.useProgram(this.programInfo.program),this.gl.bindVertexArray(this.quadVAO);var n=u.mat4.copy(u.mat4.create(),r);n[12]=0,n[13]=0,n[14]=0;var o=u.mat4.multiply(u.mat4.create(),t.get_projection_matrix(e.width,e.height),n),a=u.mat4.invert(u.mat4.create(),o);s.setUniforms(this.programInfo,{u_viewDirectionProjectionInverse:a,u_skybox:this.skyboxTexture}),s.drawBufferInfo(this.gl,this.quadBufferInfo)}}},201:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rad_to_deg=e.deg_to_rad=void 0,e.deg_to_rad=function(t){return t*Math.PI/180},e.rad_to_deg=function(t){return 180*t/Math.PI}},289:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=r(887),u=a(r(460)),c=r(963),f=i(r(176)),l=i(r(287)),h=i(r(827)),m=i(r(840)),d=i(r(5)),b=i(r(745)),p=r(48),v=r(152),y=r(275),g=r(410),x=r(312),M=r(458);!function(){const t=document.querySelector("#canvas"),e=t.getContext("webgl2"),r=new x.ConfigReader(e);if(u.resizeCanvasToDisplaySize(t),!e)return void alert("No WebGL2! Please use a newer browser.");const n=new c.Camera(s.vec3.fromValues(0,0,15));document.addEventListener("wheel",(function(t){n.process_mouse_scroll(t.deltaY>0?1:-1),_()})),document.addEventListener("keydown",(function(t){switch(t.key){case"w":n.process_keyboard(c.CameraMovement.FORWARD,.1);break;case"s":n.process_keyboard(c.CameraMovement.BACKWARD,.1);break;case"a":n.process_keyboard(c.CameraMovement.LEFT,.1);break;case"d":n.process_keyboard(c.CameraMovement.RIGHT,.1);break;case"q":n.process_keyboard(c.CameraMovement.UP,.1);break;case"e":n.process_keyboard(c.CameraMovement.DOWN,.1)}_()}));let o=!1,a=0,i=0;function _(){const t=document.querySelector("#camera_pos"),e=document.querySelector("#camera_angle"),r=document.querySelector("#camera_zoom");t.innerText=n.get_position_string(),e.innerText=n.get_angles_string(),r.innerText=n.get_zoom_string()}t.addEventListener("mousedown",(function(t){o=!0,a=t.clientX,i=t.clientY})),t.addEventListener("mousemove",(function(t){o&&(n.process_mouse_movement(t.clientX-a,t.clientY-i),_(),a=t.clientX,i=t.clientY)})),t.addEventListener("mouseup",(function(t){o=!1})),t.addEventListener("mouseleave",(function(t){o=!1})),_(),u.setDefaults({attribPrefix:"a_"});const w=u.createTexture(e,{target:e.TEXTURE_CUBE_MAP,src:[m.default,f.default,d.default,l.default,b.default,h.default],min:e.LINEAR_MIPMAP_LINEAR,crossOrigin:""}),A=new p.SkyBox(e,w),F=u.createTexture(e,{min:e.NEAREST,mag:e.NEAREST,src:[255,255,255,255,192,192,192,255,192,192,192,255,255,255,255,255]}),E=new v.Cube(e,s.vec3.fromValues(0,0,0),s.vec3.fromValues(3,2,0),1,s.vec3.fromValues(1,0,0),!0,F),P=new v.Cube(e,s.vec3.fromValues(3,0,0),s.vec3.fromValues(0,0,0),.5,s.vec3.fromValues(0,0,1),!1,F),T=new M.Ball(e,s.vec3.fromValues(0,3,0),s.vec3.fromValues(0,2,1),1.5,s.vec3.fromValues(0,1,1),!0),O=new M.Ball(e,s.vec3.fromValues(0,0,-2),s.vec3.fromValues(0,0,0),1,s.vec3.fromValues(0,1,0),!1);let S=[E,P,T,O];const I=u.createFramebufferInfo(e);u.bindFramebufferInfo(e,null),e.checkFramebufferStatus(e.FRAMEBUFFER)!=e.FRAMEBUFFER_COMPLETE?console.log("Invalid framebuffer"):console.log("Success creating framebuffer");const B=new y.FramebufferExporter(e,I);document.querySelector("#filter").addEventListener("change",(function(t){let e=this.options.selectedIndex,r=this.options[e].value;console.log(r),B.recreate(parseInt(r))}));const j=[s.vec2.fromValues(-5,5),s.vec2.fromValues(-5,5),s.vec2.fromValues(-5,5)],C=document.querySelector("#collision_output"),R=new g.CollisionTest(j,(function(t){C.value=t+"\n"+C.value}));R.addObject(E),R.addObject(P),R.addObject(T),R.addObject(O);const z=document.querySelector("#load_config"),k=document.querySelector("#config");z.addEventListener("click",(function(t){if(null==k.files)return;if(0==k.files.length)return void alert("Please select a config file");const e=k.files[0];r.load(e).then((t=>{r.set_camera(t.camera,n),r.set_boundary(t.boundary,R),S=r.set_objects(t.objects,R),console.log(t.objects),B.recreate()}))}));const D=document.querySelector("#button_x_pos"),V=document.querySelector("#button_x_neg"),L=document.querySelector("#button_z_pos"),U=document.querySelector("#button_z_neg");D.addEventListener("click",(function(t){n.set_position(s.vec3.fromValues(15,0,0)),n.set_yaw_pitch(180,0),_()})),V.addEventListener("click",(function(t){n.set_position(s.vec3.fromValues(-15,0,0)),n.set_yaw_pitch(0,0),_()})),L.addEventListener("click",(function(t){n.set_position(s.vec3.fromValues(0,0,15)),n.set_yaw_pitch(-90,0),_()})),U.addEventListener("click",(function(t){n.set_position(s.vec3.fromValues(0,0,-15)),n.set_yaw_pitch(90,0),_()}));let q=0;requestAnimationFrame((function r(o){if(o*=.001,0!=q){const t=o-q;R.updatePosition(t)}q=o,u.bindFramebufferInfo(e,I),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST),R.detectCollision(),A.render(n,t);for(const e of S)e.render(n,t);u.bindFramebufferInfo(e),B.render(t),requestAnimationFrame(r)}))}()},460:(t,e,r)=>{r.r(e),r.d(e,{addExtensionsToContext:()=>Si,attributes:()=>gt,bindFramebufferInfo:()=>yi,bindTransformFeedbackInfo:()=>Ta,bindUniformBlock:()=>Ra,canFilter:()=>qn,canGenerateMipmap:()=>Un,createAttribsFromArrays:()=>mt,createAttributeSetters:()=>Ua,createBufferFromArray:()=>vt,createBufferFromTypedArray:()=>rt,createBufferInfoFromArrays:()=>pt,createBuffersFromArrays:()=>yt,createFramebufferInfo:()=>pi,createProgram:()=>da,createProgramAsync:()=>pa,createProgramFromScripts:()=>xa,createProgramFromSources:()=>Ma,createProgramInfo:()=>Ga,createProgramInfoAsync:()=>va,createProgramInfoFromProgram:()=>$a,createProgramInfos:()=>Ha,createProgramInfosAsync:()=>Za,createPrograms:()=>Ya,createProgramsAsync:()=>Qa,createSampler:()=>Jn,createSamplers:()=>to,createTexture:()=>mo,createTextures:()=>po,createTransformFeedback:()=>Oa,createTransformFeedbackInfo:()=>Pa,createUniformBlockInfo:()=>Ca,createUniformBlockInfoFromProgram:()=>ja,createUniformBlockSpecFromProgram:()=>Sa,createUniformSetters:()=>Ea,createVAOAndSetAttributes:()=>_i,createVAOFromBufferInfo:()=>wi,createVertexArrayInfo:()=>Mi,draw:()=>ni,drawBufferInfo:()=>ei,drawObjectList:()=>ri,framebuffers:()=>gi,getArray_:()=>ot,getBytesPerElementForInternalFormat:()=>Dn,getContext:()=>Bi,getFormatAndTypeForInternalFormat:()=>Vn,getGLTypeForTypedArray:()=>O,getGLTypeForTypedArrayType:()=>S,getNumComponentsForFormat:()=>Wn,getNumComponents_:()=>st,getTypedArrayTypeForGLType:()=>I,getWebGLContext:()=>Ii,glEnumToString:()=>xe,isArrayBuffer:()=>B,isWebGL1:()=>ge,isWebGL2:()=>ye,loadTextureFromUrl:()=>fo,m4:()=>x,primitives:()=>ve,programs:()=>Ka,resizeCanvasToDisplaySize:()=>ji,resizeFramebufferInfo:()=>vi,resizeTexture:()=>bo,setAttribInfoBufferFromArray:()=>dt,setAttributeDefaults_:()=>tt,setAttributePrefix:()=>J,setAttributes:()=>qa,setBlockUniforms:()=>ka,setBuffersAndAttributes:()=>Wa,setDefaultTextureColor:()=>Gn,setDefaults:()=>Ei,setEmptyTexture:()=>ho,setSamplerParameters:()=>Kn,setTextureDefaults_:()=>Xn,setTextureFilteringForSize:()=>eo,setTextureFromArray:()=>lo,setTextureFromElement:()=>ao,setTextureParameters:()=>Zn,setUniformBlock:()=>za,setUniforms:()=>Va,setUniformsAndBindTextures:()=>La,textures:()=>vo,typedarrays:()=>j,utils:()=>Me,v3:()=>f,vertexArrays:()=>Ai});let n=Float32Array;function o(t,e,r){const o=new n(3);return t&&(o[0]=t),e&&(o[1]=e),r&&(o[2]=r),o}function a(t,e,r){return(r=r||new n(3))[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r}function i(t,e,r){return(r=r||new n(3))[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r}function s(t,e,r){r=r||new n(3);const o=t[2]*e[0]-t[0]*e[2],a=t[0]*e[1]-t[1]*e[0];return r[0]=t[1]*e[2]-t[2]*e[1],r[1]=o,r[2]=a,r}function u(t,e){e=e||new n(3);const r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=Math.sqrt(r);return o>1e-5?(e[0]=t[0]/o,e[1]=t[1]/o,e[2]=t[2]/o):(e[0]=0,e[1]=0,e[2]=0),e}function c(t,e,r){return(r=r||new n(3))[0]=t[0]*e[0],r[1]=t[1]*e[1],r[2]=t[2]*e[2],r}var f=Object.freeze({__proto__:null,add:a,copy:function(t,e){return(e=e||new n(3))[0]=t[0],e[1]=t[1],e[2]=t[2],e},create:o,cross:s,distance:function(t,e){const r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(r*r+n*n+o*o)},distanceSq:function(t,e){const r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return r*r+n*n+o*o},divide:function(t,e,r){return(r=r||new n(3))[0]=t[0]/e[0],r[1]=t[1]/e[1],r[2]=t[2]/e[2],r},divScalar:function(t,e,r){return(r=r||new n(3))[0]=t[0]/e,r[1]=t[1]/e,r[2]=t[2]/e,r},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},lerp:function(t,e,r,o){return(o=o||new n(3))[0]=t[0]+r*(e[0]-t[0]),o[1]=t[1]+r*(e[1]-t[1]),o[2]=t[2]+r*(e[2]-t[2]),o},lerpV:function(t,e,r,o){return(o=o||new n(3))[0]=t[0]+r[0]*(e[0]-t[0]),o[1]=t[1]+r[1]*(e[1]-t[1]),o[2]=t[2]+r[2]*(e[2]-t[2]),o},length:function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},lengthSq:function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},max:function(t,e,r){return(r=r||new n(3))[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r[2]=Math.max(t[2],e[2]),r},min:function(t,e,r){return(r=r||new n(3))[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r[2]=Math.min(t[2],e[2]),r},mulScalar:function(t,e,r){return(r=r||new n(3))[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r},multiply:c,negate:function(t,e){return(e=e||new n(3))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},normalize:u,setDefaultType:function(t){const e=n;return n=t,e},subtract:i});let l,h,m,d=Float32Array;function b(t,e){return(e=e||new d(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(t){return(t=t||new d(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function v(t,e){e=e||new d(16);const r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=t[9],h=t[10],m=t[11],b=t[12],p=t[13],v=t[14],y=t[15],g=h*y,x=v*m,M=u*y,_=v*c,w=u*m,A=h*c,F=o*y,E=v*a,P=o*m,T=h*a,O=o*c,S=u*a,I=f*p,B=b*l,j=i*p,C=b*s,R=i*l,z=f*s,k=r*p,D=b*n,V=r*l,L=f*n,U=r*s,q=i*n,W=g*s+_*l+w*p-(x*s+M*l+A*p),$=x*n+F*l+T*p-(g*n+E*l+P*p),N=M*n+E*s+O*p-(_*n+F*s+S*p),G=A*n+P*s+S*l-(w*n+T*s+O*l),X=1/(r*W+i*$+f*N+b*G);return e[0]=X*W,e[1]=X*$,e[2]=X*N,e[3]=X*G,e[4]=X*(x*i+M*f+A*b-(g*i+_*f+w*b)),e[5]=X*(g*r+E*f+P*b-(x*r+F*f+T*b)),e[6]=X*(_*r+F*i+S*b-(M*r+E*i+O*b)),e[7]=X*(w*r+T*i+O*f-(A*r+P*i+S*f)),e[8]=X*(I*c+C*m+R*y-(B*c+j*m+z*y)),e[9]=X*(B*a+k*m+L*y-(I*a+D*m+V*y)),e[10]=X*(j*a+D*c+U*y-(C*a+k*c+q*y)),e[11]=X*(z*a+V*c+q*m-(R*a+L*c+U*m)),e[12]=X*(j*h+z*v+B*u-(R*v+I*u+C*h)),e[13]=X*(V*v+I*o+D*h-(k*h+L*v+B*o)),e[14]=X*(k*u+q*v+C*o-(U*v+j*o+D*u)),e[15]=X*(U*h+R*o+L*u-(V*u+q*h+z*o)),e}function y(t,e,r){r=r||o();const n=e[0],a=e[1],i=e[2],s=n*t[3]+a*t[7]+i*t[11]+t[15];return r[0]=(n*t[0]+a*t[4]+i*t[8]+t[12])/s,r[1]=(n*t[1]+a*t[5]+i*t[9]+t[13])/s,r[2]=(n*t[2]+a*t[6]+i*t[10]+t[14])/s,r}function g(t,e,r){r=r||o();const n=e[0],a=e[1],i=e[2];return r[0]=n*t[0]+a*t[4]+i*t[8],r[1]=n*t[1]+a*t[5]+i*t[9],r[2]=n*t[2]+a*t[6]+i*t[10],r}var x=Object.freeze({__proto__:null,axisRotate:function(t,e,r,n){n=n||new d(16);let o=e[0],a=e[1],i=e[2];const s=Math.sqrt(o*o+a*a+i*i);o/=s,a/=s,i/=s;const u=o*o,c=a*a,f=i*i,l=Math.cos(r),h=Math.sin(r),m=1-l,b=u+(1-u)*l,p=o*a*m+i*h,v=o*i*m-a*h,y=o*a*m-i*h,g=c+(1-c)*l,x=a*i*m+o*h,M=o*i*m+a*h,_=a*i*m-o*h,w=f+(1-f)*l,A=t[0],F=t[1],E=t[2],P=t[3],T=t[4],O=t[5],S=t[6],I=t[7],B=t[8],j=t[9],C=t[10],R=t[11];return n[0]=b*A+p*T+v*B,n[1]=b*F+p*O+v*j,n[2]=b*E+p*S+v*C,n[3]=b*P+p*I+v*R,n[4]=y*A+g*T+x*B,n[5]=y*F+g*O+x*j,n[6]=y*E+g*S+x*C,n[7]=y*P+g*I+x*R,n[8]=M*A+_*T+w*B,n[9]=M*F+_*O+w*j,n[10]=M*E+_*S+w*C,n[11]=M*P+_*I+w*R,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},axisRotation:function(t,e,r){r=r||new d(16);let n=t[0],o=t[1],a=t[2];const i=Math.sqrt(n*n+o*o+a*a);n/=i,o/=i,a/=i;const s=n*n,u=o*o,c=a*a,f=Math.cos(e),l=Math.sin(e),h=1-f;return r[0]=s+(1-s)*f,r[1]=n*o*h+a*l,r[2]=n*a*h-o*l,r[3]=0,r[4]=n*o*h-a*l,r[5]=u+(1-u)*f,r[6]=o*a*h+n*l,r[7]=0,r[8]=n*a*h+o*l,r[9]=o*a*h-n*l,r[10]=c+(1-c)*f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},copy:b,create:function(){return new d(16).fill(0)},frustum:function(t,e,r,n,o,a,i){const s=e-t,u=n-r,c=o-a;return(i=i||new d(16))[0]=2*o/s,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*o/u,i[6]=0,i[7]=0,i[8]=(t+e)/s,i[9]=(n+r)/u,i[10]=a/c,i[11]=-1,i[12]=0,i[13]=0,i[14]=o*a/c,i[15]=0,i},getAxis:function(t,e,r){const n=4*e;return(r=r||o())[0]=t[n+0],r[1]=t[n+1],r[2]=t[n+2],r},getTranslation:function(t,e){return(e=e||o())[0]=t[12],e[1]=t[13],e[2]=t[14],e},identity:p,inverse:v,lookAt:function(t,e,r,n){return n=n||new d(16),l=l||o(),h=h||o(),m=m||o(),u(i(t,e,m),m),u(s(r,m,l),l),u(s(m,l,h),h),n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=0,n[4]=h[0],n[5]=h[1],n[6]=h[2],n[7]=0,n[8]=m[0],n[9]=m[1],n[10]=m[2],n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n},multiply:function(t,e,r){r=r||new d(16);const n=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],f=t[7],l=t[8],h=t[9],m=t[10],b=t[11],p=t[12],v=t[13],y=t[14],g=t[15],x=e[0],M=e[1],_=e[2],w=e[3],A=e[4],F=e[5],E=e[6],P=e[7],T=e[8],O=e[9],S=e[10],I=e[11],B=e[12],j=e[13],C=e[14],R=e[15];return r[0]=n*x+s*M+l*_+p*w,r[1]=o*x+u*M+h*_+v*w,r[2]=a*x+c*M+m*_+y*w,r[3]=i*x+f*M+b*_+g*w,r[4]=n*A+s*F+l*E+p*P,r[5]=o*A+u*F+h*E+v*P,r[6]=a*A+c*F+m*E+y*P,r[7]=i*A+f*F+b*E+g*P,r[8]=n*T+s*O+l*S+p*I,r[9]=o*T+u*O+h*S+v*I,r[10]=a*T+c*O+m*S+y*I,r[11]=i*T+f*O+b*S+g*I,r[12]=n*B+s*j+l*C+p*R,r[13]=o*B+u*j+h*C+v*R,r[14]=a*B+c*j+m*C+y*R,r[15]=i*B+f*j+b*C+g*R,r},negate:function(t,e){return(e=e||new d(16))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},ortho:function(t,e,r,n,o,a,i){return(i=i||new d(16))[0]=2/(e-t),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(n-r),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(o-a),i[11]=0,i[12]=(e+t)/(t-e),i[13]=(n+r)/(r-n),i[14]=(a+o)/(o-a),i[15]=1,i},perspective:function(t,e,r,n,o){o=o||new d(16);const a=Math.tan(.5*Math.PI-.5*t),i=1/(r-n);return o[0]=a/e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(r+n)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=r*n*i*2,o[15]=0,o},rotateX:function(t,e,r){r=r||new d(16);const n=t[4],o=t[5],a=t[6],i=t[7],s=t[8],u=t[9],c=t[10],f=t[11],l=Math.cos(e),h=Math.sin(e);return r[4]=l*n+h*s,r[5]=l*o+h*u,r[6]=l*a+h*c,r[7]=l*i+h*f,r[8]=l*s-h*n,r[9]=l*u-h*o,r[10]=l*c-h*a,r[11]=l*f-h*i,t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},rotateY:function(t,e,r){r=r||new d(16);const n=t[0],o=t[1],a=t[2],i=t[3],s=t[8],u=t[9],c=t[10],f=t[11],l=Math.cos(e),h=Math.sin(e);return r[0]=l*n-h*s,r[1]=l*o-h*u,r[2]=l*a-h*c,r[3]=l*i-h*f,r[8]=l*s+h*n,r[9]=l*u+h*o,r[10]=l*c+h*a,r[11]=l*f+h*i,t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},rotateZ:function(t,e,r){r=r||new d(16);const n=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],f=t[7],l=Math.cos(e),h=Math.sin(e);return r[0]=l*n+h*s,r[1]=l*o+h*u,r[2]=l*a+h*c,r[3]=l*i+h*f,r[4]=l*s-h*n,r[5]=l*u-h*o,r[6]=l*c-h*a,r[7]=l*f-h*i,t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},rotationX:function(t,e){e=e||new d(16);const r=Math.cos(t),n=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationY:function(t,e){e=e||new d(16);const r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationZ:function(t,e){e=e||new d(16);const r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},scale:function(t,e,r){r=r||new d(16);const n=e[0],o=e[1],a=e[2];return r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=n*t[3],r[4]=o*t[4],r[5]=o*t[5],r[6]=o*t[6],r[7]=o*t[7],r[8]=a*t[8],r[9]=a*t[9],r[10]=a*t[10],r[11]=a*t[11],t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},scaling:function(t,e){return(e=e||new d(16))[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},setAxis:function(t,e,r,n){n!==t&&(n=b(t,n));const o=4*r;return n[o+0]=e[0],n[o+1]=e[1],n[o+2]=e[2],n},setDefaultType:function(t){const e=d;return d=t,e},setTranslation:function(t,e,r){return t!==(r=r||p())&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11]),r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r},transformDirection:g,transformNormal:function(t,e,r){r=r||o();const n=v(t),a=e[0],i=e[1],s=e[2];return r[0]=a*n[0]+i*n[1]+s*n[2],r[1]=a*n[4]+i*n[5]+s*n[6],r[2]=a*n[8]+i*n[9]+s*n[10],r},transformPoint:y,translate:function(t,e,r){r=r||new d(16);const n=e[0],o=e[1],a=e[2],i=t[0],s=t[1],u=t[2],c=t[3],f=t[4],l=t[5],h=t[6],m=t[7],b=t[8],p=t[9],v=t[10],y=t[11],g=t[12],x=t[13],M=t[14],_=t[15];return t!==r&&(r[0]=i,r[1]=s,r[2]=u,r[3]=c,r[4]=f,r[5]=l,r[6]=h,r[7]=m,r[8]=b,r[9]=p,r[10]=v,r[11]=y),r[12]=i*n+f*o+b*a+g,r[13]=s*n+l*o+p*a+x,r[14]=u*n+h*o+v*a+M,r[15]=c*n+m*o+y*a+_,r},translation:function(t,e){return(e=e||new d(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},transpose:function(t,e){if((e=e||new d(16))===t){let r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,e}const r=t[0],n=t[1],o=t[2],a=t[3],i=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=t[9],h=t[10],m=t[11],b=t[12],p=t[13],v=t[14],y=t[15];return e[0]=r,e[1]=i,e[2]=f,e[3]=b,e[4]=n,e[5]=s,e[6]=l,e[7]=p,e[8]=o,e[9]=u,e[10]=h,e[11]=v,e[12]=a,e[13]=c,e[14]=m,e[15]=y,e}});const M=5120,_=5121,w=5122,A=5123,F=5124,E=5125,P=5126,T={};{const t=T;t[M]=Int8Array,t[_]=Uint8Array,t[w]=Int16Array,t[A]=Uint16Array,t[F]=Int32Array,t[E]=Uint32Array,t[P]=Float32Array,t[32819]=Uint16Array,t[32820]=Uint16Array,t[33635]=Uint16Array,t[5131]=Uint16Array,t[33640]=Uint32Array,t[35899]=Uint32Array,t[35902]=Uint32Array,t[36269]=Uint32Array,t[34042]=Uint32Array}function O(t){if(t instanceof Int8Array)return M;if(t instanceof Uint8Array)return _;if(t instanceof Uint8ClampedArray)return _;if(t instanceof Int16Array)return w;if(t instanceof Uint16Array)return A;if(t instanceof Int32Array)return F;if(t instanceof Uint32Array)return E;if(t instanceof Float32Array)return P;throw new Error("unsupported typed array type")}function S(t){if(t===Int8Array)return M;if(t===Uint8Array)return _;if(t===Uint8ClampedArray)return _;if(t===Int16Array)return w;if(t===Uint16Array)return A;if(t===Int32Array)return F;if(t===Uint32Array)return E;if(t===Float32Array)return P;throw new Error("unsupported typed array type")}function I(t){const e=T[t];if(!e)throw new Error("unknown gl type");return e}const B="undefined"!=typeof SharedArrayBuffer?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};var j=Object.freeze({__proto__:null,getGLTypeForTypedArray:O,getGLTypeForTypedArrayType:S,getTypedArrayTypeForGLType:I,isArrayBuffer:B});function C(t,e){Object.keys(e).forEach((function(r){e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(e[r]=t[r])}))}function R(...t){console.error(...t)}function z(...t){console.warn(...t)}const k=new Map;function D(t,e){if(!t||"object"!=typeof t)return!1;let r=k.get(e);r||(r=new WeakMap,k.set(e,r));let n=r.get(t);if(void 0===n){const o=Object.prototype.toString.call(t);n=o.substring(8,o.length-1)===e,r.set(t,n)}return n}function V(t,e){return"undefined"!=typeof WebGLRenderbuffer&&D(e,"WebGLRenderbuffer")}function L(t,e){return"undefined"!=typeof WebGLTexture&&D(e,"WebGLTexture")}const U=35044,q=34962,W=34963,$=34660,N=5120,G=5121,X=5122,Y=5123,H=5124,Q=5125,Z=5126,K={attribPrefix:""};function J(t){K.attribPrefix=t}function tt(t){C(t,K)}function et(t,e,r,n,o){t.bindBuffer(e,r),t.bufferData(e,n,o||U)}function rt(t,e,r,n){if("undefined"!=typeof WebGLBuffer&&D(e,"WebGLBuffer"))return e;r=r||q;const o=t.createBuffer();return et(t,r,o,e,n),o}function nt(t){return"indices"===t}function ot(t){return t.length?t:t.data}const at=/coord|texture/i,it=/color|colour/i;function st(t,e,r){return t.numComponents||t.size||function(t,e){let r;if(r=at.test(t)?2:it.test(t)?4:3,e%r>0)throw new Error(`Can not guess numComponents for attribute '${t}'. Tried ${r} but ${e} values is not evenly divisible by ${r}. You should specify it.`);return r}(e,r||ot(t).length)}function ut(t,e){if(B(t))return t;if(B(t.data))return t.data;Array.isArray(t)&&(t={data:t});let r=t.type?ct(t.type):void 0;return r||(r=nt(e)?Uint16Array:Float32Array),new r(t.data)}function ct(t){return"number"==typeof t?I(t):t||Float32Array}function ft(t,e){return{buffer:e.buffer,numValues:24,type:(r=e.type,"number"==typeof r?r:r?S(r):Z),arrayType:ct(e.type)};var r}function lt(t,e){const r=e.data||e,n=ct(e.type),o=r*n.BYTES_PER_ELEMENT,a=t.createBuffer();return t.bindBuffer(q,a),t.bufferData(q,o,e.drawType||U),{buffer:a,numValues:r,type:S(n),arrayType:n}}function ht(t,e,r){const n=ut(e,r);return{arrayType:n.constructor,buffer:rt(t,n,void 0,e.drawType),type:O(n),numValues:0}}function mt(t,e){const r={};return Object.keys(e).forEach((function(n){if(!nt(n)){const a=e[n],i=a.attrib||a.name||a.attribName||K.attribPrefix+n;if(a.value){if(!Array.isArray(a.value)&&!B(a.value))throw new Error("array.value is not array or typedarray");r[i]={value:a.value}}else{let e;e=a.buffer&&a.buffer instanceof WebGLBuffer?ft:"number"==typeof a||"number"==typeof a.data?lt:ht;const{buffer:s,type:u,numValues:c,arrayType:f}=e(t,a,n),l=void 0!==a.normalize?a.normalize:(o=f)===Int8Array||o===Uint8Array,h=st(a,n,c);r[i]={buffer:s,numComponents:h,type:u,normalize:l,stride:a.stride||0,offset:a.offset||0,divisor:void 0===a.divisor?void 0:a.divisor,drawType:a.drawType}}}var o})),t.bindBuffer(q,null),r}function dt(t,e,r,n){r=ut(r),void 0!==n?(t.bindBuffer(q,e.buffer),t.bufferSubData(q,n,r)):et(t,q,e.buffer,r,e.drawType)}const bt=["position","positions","a_position"];function pt(t,e,r){const n=mt(t,e),o=Object.assign({},r||{});o.attribs=Object.assign({},r?r.attribs:{},n);const a=e.indices;if(a){const e=ut(a,"indices");o.indices=rt(t,e,W),o.numElements=e.length,o.elementType=O(e)}else o.numElements||(o.numElements=function(t,e){let r,n;for(n=0;n<bt.length&&(r=bt[n],!(r in e))&&(r=K.attribPrefix+r,!(r in e));++n);n===bt.length&&(r=Object.keys(e)[0]);const o=e[r];if(!o.buffer)return 1;t.bindBuffer(q,o.buffer);const a=t.getBufferParameter(q,$);var i;t.bindBuffer(q,null);const s=a/((i=o.type)===N||i===G?1:i===X||i===Y?2:i===H||i===Q||i===Z?4:0),u=o.numComponents||o.size,c=s/u;if(c%1!=0)throw new Error(`numComponents ${u} not correct for length ${length}`);return c}(t,o.attribs));return o}function vt(t,e,r){const n="indices"===r?W:q;return rt(t,ut(e,r),n)}function yt(t,e){const r={};return Object.keys(e).forEach((function(n){r[n]=vt(t,e[n],n)})),e.indices?(r.numElements=e.indices.length,r.elementType=O(ut(e.indices))):r.numElements=function(t){let e,r;for(r=0;r<bt.length&&(e=bt[r],!(e in t));++r);r===bt.length&&(e=Object.keys(t)[0]);const n=t[e],o=ot(n).length;if(void 0===o)return 1;const a=st(n,e),i=o/a;if(o%a>0)throw new Error(`numComponents ${a} not correct for length ${o}`);return i}(e),r}var gt=Object.freeze({__proto__:null,createAttribsFromArrays:mt,createBuffersFromArrays:yt,createBufferFromArray:vt,createBufferFromTypedArray:rt,createBufferInfoFromArrays:pt,setAttribInfoBufferFromArray:dt,setAttributePrefix:J,setAttributeDefaults_:tt,getNumComponents_:st,getArray_:ot});const xt=ot,Mt=st;function _t(t,e){let r=0;return t.push=function(){for(let e=0;e<arguments.length;++e){const n=arguments[e];if(n instanceof Array||B(n))for(let e=0;e<n.length;++e)t[r++]=n[e];else t[r++]=n}},t.reset=function(t){r=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function wt(t,e,r){return _t(new(r||Float32Array)(t*e),t)}function At(t){return"indices"!==t}function Ft(t,e,r){const n=t.length,o=new Float32Array(3);for(let a=0;a<n;a+=3)r(e,[t[a],t[a+1],t[a+2]],o),t[a]=o[0],t[a+1]=o[1],t[a+2]=o[2]}function Et(t,e,r){r=r||o();const n=e[0],a=e[1],i=e[2];return r[0]=n*t[0]+a*t[1]+i*t[2],r[1]=n*t[4]+a*t[5]+i*t[6],r[2]=n*t[8]+a*t[9]+i*t[10],r}function Pt(t,e){return Ft(t,e,g),t}function Tt(t,e){return Ft(t,v(e),Et),t}function Ot(t,e){return Ft(t,e,y),t}function St(t,e){return Object.keys(t).forEach((function(r){const n=t[r];r.indexOf("pos")>=0?Ot(n,e):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?Pt(n,e):r.indexOf("norm")>=0&&Tt(n,e)})),t}function It(t,e,r){return t=t||2,{position:{numComponents:2,data:[(e=e||0)+-1*(t*=.5),(r=r||0)+-1*t,e+1*t,r+-1*t,e+-1*t,r+1*t,e+1*t,r+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function Bt(t,e,r,n,o){t=t||1,e=e||1,r=r||1,n=n||1,o=o||p();const a=(r+1)*(n+1),i=wt(3,a),s=wt(3,a),u=wt(2,a);for(let o=0;o<=n;o++)for(let a=0;a<=r;a++){const c=a/r,f=o/n;i.push(t*c-.5*t,0,e*f-.5*e),s.push(0,1,0),u.push(c,f)}const c=r+1,f=wt(3,r*n*2,Uint16Array);for(let t=0;t<n;t++)for(let e=0;e<r;e++)f.push((t+0)*c+e,(t+1)*c+e,(t+0)*c+e+1),f.push((t+1)*c+e,(t+1)*c+e+1,(t+0)*c+e+1);return St({position:i,normal:s,texcoord:u,indices:f},o)}function jt(t,e,r,n,o,a,i){if(e<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,a=a||0;const s=(o=o||Math.PI)-n,u=(i=i||2*Math.PI)-a,c=(e+1)*(r+1),f=wt(3,c),l=wt(3,c),h=wt(2,c);for(let o=0;o<=r;o++)for(let i=0;i<=e;i++){const c=i/e,m=o/r,d=u*c+a,b=s*m+n,p=Math.sin(d),v=Math.cos(d),y=Math.sin(b),g=v*y,x=Math.cos(b),M=p*y;f.push(t*g,t*x,t*M),l.push(g,x,M),h.push(1-c,m)}const m=e+1,d=wt(3,e*r*2,Uint16Array);for(let t=0;t<e;t++)for(let e=0;e<r;e++)d.push((e+0)*m+t,(e+0)*m+t+1,(e+1)*m+t),d.push((e+1)*m+t,(e+0)*m+t+1,(e+1)*m+t+1);return{position:f,normal:l,texcoord:h,indices:d}}const Ct=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function Rt(t){const e=(t=t||1)/2,r=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],a=wt(3,24),i=wt(3,24),s=wt(2,24),u=wt(3,12,Uint16Array);for(let t=0;t<6;++t){const e=Ct[t];for(let u=0;u<4;++u){const c=r[e[u]],f=n[t],l=o[u];a.push(c),i.push(f),s.push(l)}const c=4*t;u.push(c+0,c+1,c+2),u.push(c+0,c+2,c+3)}return{position:a,normal:i,texcoord:s,indices:u}}function zt(t,e,r,n,o,a,i){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");const s=void 0===a||a,u=void 0===i||i,c=(s?2:0)+(u?2:0),f=(n+1)*(o+1+c),l=wt(3,f),h=wt(3,f),m=wt(2,f),d=wt(3,n*(o+c/2)*2,Uint16Array),b=n+1,p=Math.atan2(t-e,r),v=Math.cos(p),y=Math.sin(p),g=o+(u?2:0);for(let a=s?-2:0;a<=g;++a){let i,s=a/o,u=r*s;a<0?(u=0,s=1,i=t):a>o?(u=r,s=1,i=e):i=t+a/o*(e-t),-2!==a&&a!==o+2||(i=0,s=0),u-=r/2;for(let t=0;t<b;++t){const e=Math.sin(t*Math.PI*2/n),r=Math.cos(t*Math.PI*2/n);l.push(e*i,u,r*i),a<0?h.push(0,-1,0):a>o?h.push(0,1,0):0===i?h.push(0,0,0):h.push(e*v,y,r*v),m.push(t/n,1-s)}}for(let t=0;t<o+c;++t)if(!(1===t&&s||t===o+c-2&&u))for(let e=0;e<n;++e)d.push(b*(t+0)+0+e,b*(t+0)+1+e,b*(t+1)+1+e),d.push(b*(t+0)+0+e,b*(t+1)+1+e,b*(t+1)+0+e);return{position:l,normal:h,texcoord:m,indices:d}}function kt(t,e){e=e||[];const r=[];for(let n=0;n<t.length;n+=4){const o=t[n],a=t.slice(n+1,n+4);a.push.apply(a,e);for(let t=0;t<o;++t)r.push.apply(r,a)}return r}function Dt(){const t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=kt([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=kt([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=t.length/3,o={position:wt(3,n),texcoord:wt(2,n),normal:wt(3,n),color:wt(4,n,Uint8Array),indices:wt(3,n/3,Uint16Array)};o.position.push(t),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(e),o.color.push(r);for(let t=0;t<n;++t)o.indices.push(t);return o}function Vt(t,e,r,n,o,i,s){if(o<=0)throw new Error("subdivisionDown must be > 0");const u=(s=s||1)-(i=i||0),f=2*(o+1)*4,l=wt(3,f),h=wt(3,f),m=wt(2,f);function d(t,e,r){return t+(e-t)*r}function b(e,r,s,f,b,p){for(let v=0;v<=o;v++){const y=r/1,g=v/o,x=2*(y-.5),M=(i+g*u)*Math.PI,_=Math.sin(M),w=Math.cos(M),A=d(t,e,_),F=x*n,E=w*t,P=_*A;l.push(F,E,P);const T=a(c([0,_,w],s),f);h.push(T),m.push(y*b+p,g)}}for(let t=0;t<2;t++){const n=2*(t/1-.5);b(e,t,[1,1,1],[0,0,0],1,0),b(e,t,[0,0,0],[n,0,0],0,0),b(r,t,[1,1,1],[0,0,0],1,0),b(r,t,[0,0,0],[n,0,0],0,1)}const p=wt(3,2*o*4,Uint16Array);function v(t,e){for(let r=0;r<o;++r)p.push(t+r+0,t+r+1,e+r+0),p.push(t+r+1,e+r+1,e+r+0)}const y=o+1;return v(0*y,4*y),v(5*y,7*y),v(6*y,2*y),v(3*y,1*y),{position:l,normal:h,texcoord:m,indices:p}}function Lt(t,e,r,n,o,a){return zt(t,t,e,r,n,o,a)}function Ut(t,e,r,n,o,a){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0;const i=(a=a||2*Math.PI)-o,s=r+1,u=n+1,c=s*u,f=wt(3,c),l=wt(3,c),h=wt(2,c),m=wt(3,r*n*2,Uint16Array);for(let a=0;a<u;++a){const u=a/n,c=u*Math.PI*2,m=Math.sin(c),d=t+m*e,b=Math.cos(c),p=b*e;for(let t=0;t<s;++t){const e=t/r,n=o+e*i,a=Math.sin(n),s=Math.cos(n),c=a*d,v=s*d,y=a*m,g=s*m;f.push(c,p,v),l.push(y,b,g),h.push(e,1-u)}}for(let t=0;t<n;++t)for(let e=0;e<r;++e){const r=1+e,n=1+t;m.push(s*t+e,s*n+e,s*t+r),m.push(s*n+e,s*n+r,s*t+r)}return{position:f,normal:l,texcoord:h,indices:m}}function qt(t,e,r,n,o){if(e<3)throw new Error("divisions must be at least 3");o=o||1,n=n||0;const a=(e+1)*((r=r||1)+1),i=wt(3,a),s=wt(3,a),u=wt(2,a),c=wt(3,r*e*2,Uint16Array);let f=0;const l=t-n,h=e+1;for(let t=0;t<=r;++t){const a=n+l*Math.pow(t/r,o);for(let n=0;n<=e;++n){const o=2*Math.PI*n/e,l=a*Math.cos(o),m=a*Math.sin(o);if(i.push(l,0,m),s.push(0,1,0),u.push(1-n/e,t/r),t>0&&n!==e){const t=f+(n+1),e=f+n,r=f+n-h,o=f+(n+1)-h;c.push(t,e,r),c.push(t,r,o)}}f+=e+1}return{position:i,normal:s,texcoord:u,indices:c}}function Wt(t){return function(e){return yt(e,t.apply(this,Array.prototype.slice.call(arguments,1)))}}function $t(t){return function(e){return pt(e,t.apply(null,Array.prototype.slice.call(arguments,1)))}}const Nt=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function Gt(t,e,r,n){n=n||0;const o=t.length;for(let a=0;a<o;++a)e[r+a]=t[a]+n}function Xt(t,e){const r=xt(t),n=new r.constructor(e);let o=n;var a,i;return r.numComponents&&r.numElements&&_t(n,r.numComponents),t.data&&(o={data:n},a=t,i=o,Nt.forEach((function(t){const e=a[t];void 0!==e&&(i[t]=e)}))),o}const Yt=$t(Dt),Ht=Wt(Dt),Qt=$t(Rt),Zt=Wt(Rt),Kt=$t(Bt),Jt=Wt(Bt),te=$t(jt),ee=Wt(jt),re=$t(zt),ne=Wt(zt),oe=$t(It),ae=Wt(It),ie=$t(Vt),se=Wt(Vt),ue=$t(Lt),ce=Wt(Lt),fe=$t(Ut),le=Wt(Ut),he=$t(qt),me=Wt(qt),de=ie,be=se,pe=Vt;var ve=Object.freeze({__proto__:null,create3DFBufferInfo:Yt,create3DFBuffers:Ht,create3DFVertices:Dt,createAugmentedTypedArray:wt,createCubeBufferInfo:Qt,createCubeBuffers:Zt,createCubeVertices:Rt,createPlaneBufferInfo:Kt,createPlaneBuffers:Jt,createPlaneVertices:Bt,createSphereBufferInfo:te,createSphereBuffers:ee,createSphereVertices:jt,createTruncatedConeBufferInfo:re,createTruncatedConeBuffers:ne,createTruncatedConeVertices:zt,createXYQuadBufferInfo:oe,createXYQuadBuffers:ae,createXYQuadVertices:It,createCresentBufferInfo:de,createCresentBuffers:be,createCresentVertices:pe,createCrescentBufferInfo:ie,createCrescentBuffers:se,createCrescentVertices:Vt,createCylinderBufferInfo:ue,createCylinderBuffers:ce,createCylinderVertices:Lt,createTorusBufferInfo:fe,createTorusBuffers:le,createTorusVertices:Ut,createDiscBufferInfo:he,createDiscBuffers:me,createDiscVertices:qt,deindexVertices:function(t){const e=t.indices,r={},n=e.length;return Object.keys(t).filter(At).forEach((function(o){const a=t[o],i=a.numComponents,s=wt(i,n,a.constructor);for(let t=0;t<n;++t){const r=e[t]*i;for(let t=0;t<i;++t)s.push(a[r+t])}r[o]=s})),r},flattenNormals:function(t){if(t.indices)throw new Error("can not flatten normals of indexed vertices. deindex them first");const e=t.normal,r=e.length;for(let t=0;t<r;t+=9){const r=e[t+0],n=e[t+1],o=e[t+2],a=e[t+3],i=e[t+4],s=e[t+5];let u=r+a+e[t+6],c=n+i+e[t+7],f=o+s+e[t+8];const l=Math.sqrt(u*u+c*c+f*f);u/=l,c/=l,f/=l,e[t+0]=u,e[t+1]=c,e[t+2]=f,e[t+3]=u,e[t+4]=c,e[t+5]=f,e[t+6]=u,e[t+7]=c,e[t+8]=f}return t},makeRandomVertexColors:function(t,e){e=e||{};const r=t.position.numElements,n=wt(4,r,Uint8Array),o=e.rand||function(t,e){return e<3?(256,256*Math.random()|0):255};if(t.color=n,t.indices)for(let t=0;t<r;++t)n.push(o(t,0),o(t,1),o(t,2),o(t,3));else{const t=e.vertsPerColor||3,a=r/t;for(let e=0;e<a;++e){const r=[o(e,0),o(e,1),o(e,2),o(e,3)];for(let e=0;e<t;++e)n.push(r)}}return t},reorientDirections:Pt,reorientNormals:Tt,reorientPositions:Ot,reorientVertices:St,concatVertices:function(t){const e={};let r;for(let n=0;n<t.length;++n){const o=t[n];Object.keys(o).forEach((function(t){e[t]||(e[t]=[]),r||"indices"===t||(r=t);const n=o[t],a=Mt(n,t),i=xt(n).length/a;e[t].push(i)}))}const n=e[r],o={};return Object.keys(e).forEach((function(e){const r=function(e){let r,n=0;for(let o=0;o<t.length;++o){const a=t[o][e];n+=xt(a).length,r&&!a.data||(r=a)}return{length:n,spec:r}}(e),a=Xt(r.spec,r.length);!function(e,r,n){let o=0,a=0;for(let i=0;i<t.length;++i){const s=t[i][e],u=xt(s);"indices"===e?(Gt(u,n,a,o),o+=r[i]):Gt(u,n,a),a+=u.length}}(e,n,xt(a)),o[e]=a})),o},duplicateVertices:function(t){const e={};return Object.keys(t).forEach((function(r){const n=t[r],o=xt(n),a=Xt(n,o.length);Gt(o,xt(a),0),e[r]=a})),e}});function ye(t){return!!t.texStorage2D}function ge(t){return!t.texStorage2D}const xe=function(){const t={},e={};return function(r,n){return function(r){const n=r.constructor.name;if(!t[n]){for(const t in r)if("number"==typeof r[t]){const n=e[r[t]];e[r[t]]=n?`${n} | ${t}`:t}t[n]=!0}}(r),e[n]||("number"==typeof n?`0x${n.toString(16)}`:n)}}();var Me=Object.freeze({__proto__:null,glEnumToString:xe,isWebGL1:ge,isWebGL2:ye});const _e={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},we=B,Ae=function(){let t;return function(){return t=t||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null),t}}(),Fe=6406,Ee=6407,Pe=6408,Te=6409,Oe=6410,Se=6402,Ie=34041,Be=33071,je=9728,Ce=9729,Re=3553,ze=34067,ke=32879,De=35866,Ve=34069,Le=34070,Ue=34071,qe=34072,We=34073,$e=34074,Ne=10241,Ge=10240,Xe=10242,Ye=10243,He=32882,Qe=33082,Ze=33083,Ke=33084,Je=33085,tr=34892,er=34893,rr=3317,nr=3314,or=32878,ar=3316,ir=3315,sr=32877,ur=37443,cr=37441,fr=37440,lr=33321,hr=36756,mr=33325,dr=33326,br=33330,pr=33329,vr=33338,yr=33337,gr=33340,xr=33339,Mr=33323,_r=36757,wr=33327,Ar=33328,Fr=33336,Er=33335,Pr=33332,Tr=33331,Or=33334,Sr=33333,Ir=32849,Br=35905,jr=36194,Cr=36758,Rr=35898,zr=35901,kr=34843,Dr=34837,Vr=36221,Lr=36239,Ur=36215,qr=36233,Wr=36209,$r=36227,Nr=32856,Gr=35907,Xr=36759,Yr=32855,Hr=32854,Qr=32857,Zr=34842,Kr=34836,Jr=36220,tn=36238,en=36975,rn=36214,nn=36232,on=36226,an=36208,sn=33189,un=33190,cn=36012,fn=36013,ln=35056,hn=5120,mn=5121,dn=5122,bn=5123,pn=5124,vn=5125,yn=5126,gn=32819,xn=32820,Mn=33635,_n=5131,wn=36193,An=33640,Fn=35899,En=35902,Pn=36269,Tn=34042,On=33319,Sn=33320,In=6403,Bn=36244,jn=36248,Cn=36249,Rn={};{const t=Rn;t[Fe]={numColorComponents:1},t[Te]={numColorComponents:1},t[Oe]={numColorComponents:2},t[Ee]={numColorComponents:3},t[Pe]={numColorComponents:4},t[In]={numColorComponents:1},t[Bn]={numColorComponents:1},t[On]={numColorComponents:2},t[Sn]={numColorComponents:2},t[Ee]={numColorComponents:3},t[jn]={numColorComponents:3},t[Pe]={numColorComponents:4},t[Cn]={numColorComponents:4},t[Se]={numColorComponents:1},t[Ie]={numColorComponents:2}}let zn;function kn(t){if(!zn){const t={};t[Fe]={textureFormat:Fe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[mn,_n,wn,yn]},t[Te]={textureFormat:Te,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[mn,_n,wn,yn]},t[Oe]={textureFormat:Oe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[mn,_n,wn,yn]},t[Ee]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[mn,_n,wn,yn,Mn]},t[Pe]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[mn,_n,wn,yn,gn,xn]},t[Se]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[vn,bn]},t[lr]={textureFormat:In,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[mn]},t[hr]={textureFormat:In,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[hn]},t[mr]={textureFormat:In,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[yn,_n]},t[dr]={textureFormat:In,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[yn]},t[br]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[mn]},t[pr]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[hn]},t[Pr]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[bn]},t[Tr]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[dn]},t[Or]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[vn]},t[Sr]={textureFormat:Bn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[pn]},t[Mr]={textureFormat:On,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[mn]},t[_r]={textureFormat:On,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[hn]},t[wr]={textureFormat:On,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[yn,_n]},t[Ar]={textureFormat:On,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[yn]},t[Fr]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[mn]},t[Er]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[hn]},t[vr]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[bn]},t[yr]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[dn]},t[gr]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[vn]},t[xr]={textureFormat:Sn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[pn]},t[Ir]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[mn]},t[Br]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[mn]},t[jr]={textureFormat:Ee,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[mn,Mn]},t[Cr]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[hn]},t[Rr]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[yn,_n,Fn]},t[zr]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[yn,_n,En]},t[kr]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[yn,_n]},t[Dr]={textureFormat:Ee,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[yn]},t[Vr]={textureFormat:jn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[mn]},t[Lr]={textureFormat:jn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[hn]},t[Ur]={textureFormat:jn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[bn]},t[qr]={textureFormat:jn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[dn]},t[Wr]={textureFormat:jn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[vn]},t[$r]={textureFormat:jn,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[pn]},t[Nr]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[mn]},t[Gr]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[mn]},t[Xr]={textureFormat:Pe,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[hn]},t[Yr]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[mn,xn,An]},t[Hr]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[mn,gn]},t[Qr]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[An]},t[Zr]={textureFormat:Pe,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[yn,_n]},t[Kr]={textureFormat:Pe,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[yn]},t[Jr]={textureFormat:Cn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[mn]},t[tn]={textureFormat:Cn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[hn]},t[en]={textureFormat:Cn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[An]},t[rn]={textureFormat:Cn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[bn]},t[nn]={textureFormat:Cn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[dn]},t[on]={textureFormat:Cn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[pn]},t[an]={textureFormat:Cn,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[vn]},t[sn]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[bn,vn]},t[un]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[vn]},t[cn]={textureFormat:Se,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[yn]},t[ln]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Tn]},t[fn]={textureFormat:Ie,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Pn]},Object.keys(t).forEach((function(e){const r=t[e];r.bytesPerElementMap={},r.bytesPerElement.forEach((function(t,e){const n=r.type[e];r.bytesPerElementMap[n]=t}))})),zn=t}return zn[t]}function Dn(t,e){const r=kn(t);if(!r)throw"unknown internal format";const n=r.bytesPerElementMap[e];if(void 0===n)throw"unknown internal format";return n}function Vn(t){const e=kn(t);if(!e)throw"unknown internal format";return{format:e.textureFormat,type:e.type[0]}}function Ln(t){return 0==(t&t-1)}function Un(t,e,r,n){if(!ye(t))return Ln(e)&&Ln(r);const o=kn(n);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function qn(t){const e=kn(t);if(!e)throw"unknown internal format";return e.textureFilterable}function Wn(t){const e=Rn[t];if(!e)throw"unknown format: "+t;return e.numColorComponents}function $n(t,e,r){return we(e)?O(e):r||mn}function Nn(t,e,r,n,o){if(o%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=o/n)%1)throw"can't guess dimensions"}else if((n=o/r)%1)throw"can't guess dimensions"}else{const t=Math.sqrt(o/(e===ze?6:1));t%1==0?(r=t,n=t):(r=o,n=1)}return{width:r,height:n}}function Gn(t){_e.textureColor=new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}function Xn(t){C(t,_e),t.textureColor&&Gn(t.textureColor)}function Yn(t,e){void 0!==e.colorspaceConversion&&t.pixelStorei(ur,e.colorspaceConversion),void 0!==e.premultiplyAlpha&&t.pixelStorei(cr,e.premultiplyAlpha),void 0!==e.flipY&&t.pixelStorei(fr,e.flipY)}function Hn(t){t.pixelStorei(rr,4),ye(t)&&(t.pixelStorei(nr,0),t.pixelStorei(or,0),t.pixelStorei(ar,0),t.pixelStorei(ir,0),t.pixelStorei(sr,0))}function Qn(t,e,r,n){n.minMag&&(r.call(t,e,Ne,n.minMag),r.call(t,e,Ge,n.minMag)),n.min&&r.call(t,e,Ne,n.min),n.mag&&r.call(t,e,Ge,n.mag),n.wrap&&(r.call(t,e,Xe,n.wrap),r.call(t,e,Ye,n.wrap),(e===ke||"undefined"!=typeof WebGLSampler&&D(e,"WebGLSampler"))&&r.call(t,e,He,n.wrap)),n.wrapR&&r.call(t,e,He,n.wrapR),n.wrapS&&r.call(t,e,Xe,n.wrapS),n.wrapT&&r.call(t,e,Ye,n.wrapT),void 0!==n.minLod&&r.call(t,e,Qe,n.minLod),void 0!==n.maxLod&&r.call(t,e,Ze,n.maxLod),void 0!==n.baseLevel&&r.call(t,e,Ke,n.baseLevel),void 0!==n.maxLevel&&r.call(t,e,Je,n.maxLevel),void 0!==n.compareFunc&&r.call(t,e,er,n.compareFunc),void 0!==n.compareMode&&r.call(t,e,tr,n.compareMode)}function Zn(t,e,r){const n=r.target||Re;t.bindTexture(n,e),Qn(t,n,t.texParameteri,r)}function Kn(t,e,r){Qn(t,e,t.samplerParameteri,r)}function Jn(t,e){const r=t.createSampler();return Kn(t,r,e),r}function to(t,e){const r={};return Object.keys(e).forEach((function(n){r[n]=Jn(t,e[n])})),r}function eo(t,e,r,n,o,a){r=r||_e.textureOptions,a=a||Pe;const i=r.target||Re;if(n=n||r.width,o=o||r.height,t.bindTexture(i,e),Un(t,n,o,a))t.generateMipmap(i);else{const e=qn(a)?Ce:je;t.texParameteri(i,Ne,e),t.texParameteri(i,Ge,e),t.texParameteri(i,Xe,Be),t.texParameteri(i,Ye,Be)}}function ro(t){return!0===t.auto||void 0===t.auto&&void 0===t.level}function no(t,e){return(e=e||{}).cubeFaceOrder||[Ve,Le,Ue,qe,We,$e]}function oo(t,e){const r=no(0,e).map((function(t,e){return{face:t,ndx:e}}));return r.sort((function(t,e){return t.face-e.face})),r}function ao(t,e,r,n){const o=(n=n||_e.textureOptions).target||Re,a=n.level||0;let i=r.width,s=r.height;const u=n.internalFormat||n.format||Pe,c=Vn(u),f=n.format||c.format,l=n.type||c.type;if(Yn(t,n),t.bindTexture(o,e),o===ze){const c=r.width,h=r.height;let m,d;if(c/6===h)m=h,d=[0,0,1,0,2,0,3,0,4,0,5,0];else if(h/6===c)m=c,d=[0,0,0,1,0,2,0,3,0,4,0,5];else if(c/3==h/2)m=c/3,d=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(c/2!=h/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);m=c/2,d=[0,0,1,0,0,1,1,1,0,2,1,2]}const b=Ae();b?(b.canvas.width=m,b.canvas.height=m,i=m,s=m,oo(0,n).forEach((function(e){const n=d[2*e.ndx+0]*m,o=d[2*e.ndx+1]*m;b.drawImage(r,n,o,m,m,0,0,m,m),t.texImage2D(e.face,a,u,f,l,b.canvas)})),b.canvas.width=1,b.canvas.height=1):"undefined"!=typeof createImageBitmap&&(i=m,s=m,oo(0,n).forEach((function(c){const h=d[2*c.ndx+0]*m,b=d[2*c.ndx+1]*m;t.texImage2D(c.face,a,u,m,m,0,f,l,null),createImageBitmap(r,h,b,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(r){Yn(t,n),t.bindTexture(o,e),t.texImage2D(c.face,a,u,f,l,r),ro(n)&&eo(t,e,n,i,s,u)}))})))}else if(o===ke||o===De){const e=Math.min(r.width,r.height),n=Math.max(r.width,r.height),i=n/e;if(i%1!=0)throw"can not compute 3D dimensions of element";const s=r.width===n?1:0,c=r.height===n?1:0;t.pixelStorei(rr,1),t.pixelStorei(nr,r.width),t.pixelStorei(or,0),t.pixelStorei(sr,0),t.texImage3D(o,a,u,e,e,e,0,f,l,null);for(let n=0;n<i;++n){const i=n*e*s,u=n*e*c;t.pixelStorei(ar,i),t.pixelStorei(ir,u),t.texSubImage3D(o,a,0,0,n,e,e,1,f,l,r)}Hn(t)}else t.texImage2D(o,a,u,f,l,r);ro(n)&&eo(t,e,n,i,s,u),Zn(t,e,n)}function io(){}function so(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof ImageData&&t instanceof ImageData||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement}function uo(t,e,r){return so(t)?(setTimeout((function(){r(null,t)})),t):function(t,e,r){let n;if(r=r||io,e=void 0!==e?e:_e.crossOrigin,e=function(t,e){return void 0!==e||function(t){if("undefined"!=typeof document){const e=document.createElement("a");return e.href=t,e.hostname===location.hostname&&e.port===location.port&&e.protocol===location.protocol}{const e=new URL(location.href).origin;return new URL(t,location.href).origin===e}}(t)?e:"anonymous"}(t,e),"undefined"!=typeof Image){n=new Image,void 0!==e&&(n.crossOrigin=e);const o=function(){n.removeEventListener("error",a),n.removeEventListener("load",i),n=null},a=function(){const e="couldn't load image: "+t;R(e),r(e,n),o()},i=function(){r(null,n),o()};return n.addEventListener("error",a),n.addEventListener("load",i),n.src=t,n}if("undefined"!=typeof ImageBitmap){let o,a;const i=function(){r(o,a)},s={};e&&(s.mode="cors"),fetch(t,s).then((function(t){if(!t.ok)throw t;return t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){a=t,setTimeout(i)})).catch((function(t){o=t,setTimeout(i)})),n=null}return n}(t,e,r)}function co(t,e,r){const n=(r=r||_e.textureOptions).target||Re;if(t.bindTexture(n,e),!1===r.color)return;const o=function(t){return t=t||_e.textureColor,we(t)?t:new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}(r.color);if(n===ze)for(let e=0;e<6;++e)t.texImage2D(Ve+e,0,Pe,1,1,0,Pe,mn,o);else n===ke||n===De?t.texImage3D(n,0,Pe,1,1,1,0,Pe,mn,o):t.texImage2D(n,0,Pe,1,1,0,Pe,mn,o)}function fo(t,e,r,n){return n=n||io,r=r||_e.textureOptions,co(t,e,r),uo((r=Object.assign({},r)).src,r.crossOrigin,(function(o,a){o?n(o,e,a):(ao(t,e,a,r),n(null,e,a))}))}function lo(t,e,r,n){const o=(n=n||_e.textureOptions).target||Re;t.bindTexture(o,e);let a=n.width,i=n.height,s=n.depth;const u=n.level||0,c=n.internalFormat||n.format||Pe,f=Vn(c),l=n.format||f.format,h=n.type||$n(0,r,f.type);if(we(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{const t=I(h);r=new t(r)}const m=Dn(c,h),d=r.byteLength/m;if(d%1)throw"length wrong size for format: "+xe(t,l);let b;if(o===ke||o===De)if(a||i||s)!a||i&&s?!i||a&&s?(b=Nn(0,o,a,i,d/s),a=b.width,i=b.height):(b=Nn(0,o,a,s,d/i),a=b.width,s=b.height):(b=Nn(0,o,i,s,d/a),i=b.width,s=b.height);else{const t=Math.cbrt(d);if(t%1!=0)throw"can't guess cube size of array of numElements: "+d;a=t,i=t,s=t}else b=Nn(0,o,a,i,d),a=b.width,i=b.height;if(Hn(t),t.pixelStorei(rr,n.unpackAlignment||1),Yn(t,n),o===ze){const e=d/6*(m/r.BYTES_PER_ELEMENT);oo(0,n).forEach((n=>{const o=e*n.ndx,s=r.subarray(o,o+e);t.texImage2D(n.face,u,c,a,i,0,l,h,s)}))}else o===ke||o===De?t.texImage3D(o,u,c,a,i,s,0,l,h,r):t.texImage2D(o,u,c,a,i,0,l,h,r);return{width:a,height:i,depth:s,type:h}}function ho(t,e,r){const n=r.target||Re;t.bindTexture(n,e);const o=r.level||0,a=r.internalFormat||r.format||Pe,i=Vn(a),s=r.format||i.format,u=r.type||i.type;if(Yn(t,r),n===ze)for(let e=0;e<6;++e)t.texImage2D(Ve+e,o,a,r.width,r.height,0,s,u,null);else n===ke||n===De?t.texImage3D(n,o,a,r.width,r.height,r.depth,0,s,u,null):t.texImage2D(n,o,a,r.width,r.height,0,s,u,null)}function mo(t,e,r){r=r||io,e=e||_e.textureOptions;const n=t.createTexture(),o=e.target||Re;let a=e.width||1,i=e.height||1;const s=e.internalFormat||Pe;t.bindTexture(o,n),o===ze&&(t.texParameteri(o,Xe,Be),t.texParameteri(o,Ye,Be));let u=e.src;if(u)if("function"==typeof u&&(u=u(t,e)),"string"==typeof u)fo(t,n,e,r);else if(we(u)||Array.isArray(u)&&("number"==typeof u[0]||Array.isArray(u[0])||we(u[0]))){const r=lo(t,n,u,e);a=r.width,i=r.height}else Array.isArray(u)&&("string"==typeof u[0]||so(u[0]))?o===ze?function(t,e,r,n){n=n||io;const o=r.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";const a=r.level||0,i=r.internalFormat||r.format||Pe,s=Vn(i),u=r.format||s.format,c=r.type||mn,f=r.target||Re;if(f!==ze)throw"target must be TEXTURE_CUBE_MAP";co(t,e,r),r=Object.assign({},r);let l=6;const h=[],m=no(0,r);let d;d=o.map((function(o,s){return uo(o,r.crossOrigin,(b=m[s],function(o,s){--l,o?h.push(o):s.width!==s.height?h.push("cubemap face img is not a square: "+s.src):(Yn(t,r),t.bindTexture(f,e),5===l?no().forEach((function(e){t.texImage2D(e,a,i,u,c,s)})):t.texImage2D(b,a,i,u,c,s),ro(r)&&t.generateMipmap(f)),0===l&&n(h.length?h:void 0,e,d)}));var b}))}(t,n,e,r):function(t,e,r,n){n=n||io;const o=r.src,a=r.internalFormat||r.format||Pe,i=Vn(a),s=r.format||i.format,u=r.type||mn,c=r.target||De;if(c!==ke&&c!==De)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";co(t,e,r),r=Object.assign({},r);let f=o.length;const l=[];let h;const m=r.level||0;let d=r.width,b=r.height;const p=o.length;let v=!0;h=o.map((function(o,i){return uo(o,r.crossOrigin,(y=i,function(o,i){if(--f,o)l.push(o);else{if(Yn(t,r),t.bindTexture(c,e),v){v=!1,d=r.width||i.width,b=r.height||i.height,t.texImage3D(c,m,a,d,b,p,0,s,u,null);for(let e=0;e<p;++e)t.texSubImage3D(c,m,0,0,e,d,b,1,s,u,i)}else{let e,r=i;i.width===d&&i.height===b||(e=Ae(),r=e.canvas,e.canvas.width=d,e.canvas.height=b,e.drawImage(i,0,0,d,b)),t.texSubImage3D(c,m,0,0,y,d,b,1,s,u,r),e&&r===e.canvas&&(e.canvas.width=0,e.canvas.height=0)}ro(r)&&t.generateMipmap(c)}0===f&&n(l.length?l:void 0,e,h)}));var y}))}(t,n,e,r):(ao(t,n,u,e),a=u.width,i=u.height);else ho(t,n,e);return ro(e)&&eo(t,n,e,a,i,s),Zn(t,n,e),n}function bo(t,e,r,n,o,a){n=n||r.width,o=o||r.height,a=a||r.depth;const i=r.target||Re;t.bindTexture(i,e);const s=r.level||0,u=r.internalFormat||r.format||Pe,c=Vn(u),f=r.format||c.format;let l;const h=r.src;if(l=h&&(we(h)||Array.isArray(h)&&"number"==typeof h[0])?r.type||$n(0,h,c.type):r.type||c.type,i===ze)for(let e=0;e<6;++e)t.texImage2D(Ve+e,s,u,n,o,0,f,l,null);else i===ke||i===De?t.texImage3D(i,s,u,n,o,a,0,f,l,null):t.texImage2D(i,s,u,n,o,0,f,l,null)}function po(t,e,r){r=r||io;let n=0;const o=[],a={},i={};function s(){0===n&&setTimeout((function(){r(o.length?o:void 0,a,i)}),0)}return Object.keys(e).forEach((function(r){const u=e[r];let c;var f;("string"==typeof(f=u.src)||Array.isArray(f)&&"string"==typeof f[0])&&(c=function(t,e,a){i[r]=a,--n,t&&o.push(t),s()},++n),a[r]=mo(t,u,c)})),s(),a}var vo=Object.freeze({__proto__:null,setTextureDefaults_:Xn,createSampler:Jn,createSamplers:to,setSamplerParameters:Kn,createTexture:mo,setEmptyTexture:ho,setTextureFromArray:lo,loadTextureFromUrl:fo,setTextureFromElement:ao,setTextureFilteringForSize:eo,setTextureParameters:Zn,setDefaultTextureColor:Gn,createTextures:po,resizeTexture:bo,canGenerateMipmap:Un,canFilter:qn,getNumComponentsForFormat:Wn,getBytesPerElementForInternalFormat:Dn,getFormatAndTypeForInternalFormat:Vn});const yo=R,go=z;function xo(t){return"undefined"!=typeof document&&document.getElementById?document.getElementById(t):null}const Mo=33984,_o=35048,wo=34962,Ao=34963,Fo=35345,Eo=35982,Po=36386,To=35713,Oo=35714,So=35632,Io=35633,Bo=35981,jo=35718,Co=35721,Ro=35971,zo=35382,ko=35396,Do=35398,Vo=35392,Lo=35395,Uo=5124,qo=3553,Wo=34067,$o=32879,No=35866,Go={};function Xo(t,e){return Go[e].bindPoint}function Yo(t,e){return function(r){t.uniform1i(e,r)}}function Ho(t,e){return function(r){t.uniform1iv(e,r)}}function Qo(t,e){return function(r){t.uniform2iv(e,r)}}function Zo(t,e){return function(r){t.uniform3iv(e,r)}}function Ko(t,e){return function(r){t.uniform4iv(e,r)}}function Jo(t,e,r,n){const o=Xo(0,e);return ye(t)?function(e){let a,i;!e||L(0,e)?(a=e,i=null):(a=e.texture,i=e.sampler),t.uniform1i(n,r),t.activeTexture(Mo+r),t.bindTexture(o,a),t.bindSampler(r,i)}:function(e){t.uniform1i(n,r),t.activeTexture(Mo+r),t.bindTexture(o,e)}}function ta(t,e,r,n,o){const a=Xo(0,e),i=new Int32Array(o);for(let t=0;t<o;++t)i[t]=r+t;return ye(t)?function(e){t.uniform1iv(n,i),e.forEach((function(e,n){let o,s;t.activeTexture(Mo+i[n]),!e||L(0,e)?(o=e,s=null):(o=e.texture,s=e.sampler),t.bindSampler(r,s),t.bindTexture(a,o)}))}:function(e){t.uniform1iv(n,i),e.forEach((function(e,r){t.activeTexture(Mo+i[r]),t.bindTexture(a,e)}))}}function ea(t,e){return function(r){if(r.value)switch(t.disableVertexAttribArray(e),r.value.length){case 4:t.vertexAttrib4fv(e,r.value);break;case 3:t.vertexAttrib3fv(e,r.value);break;case 2:t.vertexAttrib2fv(e,r.value);break;case 1:t.vertexAttrib1fv(e,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else t.bindBuffer(wo,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,r.numComponents||r.size,r.type||5126,r.normalize||!1,r.stride||0,r.offset||0),t.vertexAttribDivisor&&t.vertexAttribDivisor(e,r.divisor||0)}}function ra(t,e){return function(r){if(r.value){if(t.disableVertexAttribArray(e),4!==r.value.length)throw new Error("The length of an integer constant value must be 4!");t.vertexAttrib4iv(e,r.value)}else t.bindBuffer(wo,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,r.numComponents||r.size,r.type||Uo,r.stride||0,r.offset||0),t.vertexAttribDivisor&&t.vertexAttribDivisor(e,r.divisor||0)}}function na(t,e){return function(r){if(r.value){if(t.disableVertexAttribArray(e),4!==r.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");t.vertexAttrib4uiv(e,r.value)}else t.bindBuffer(wo,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,r.numComponents||r.size,r.type||5125,r.stride||0,r.offset||0),t.vertexAttribDivisor&&t.vertexAttribDivisor(e,r.divisor||0)}}function oa(t,e,r){const n=r.size,o=r.count;return function(r){t.bindBuffer(wo,r.buffer);const a=r.size||r.numComponents||n,i=a/o,s=r.type||5126,u=Go[s].size*a,c=r.normalize||!1,f=r.offset||0,l=u/o;for(let n=0;n<o;++n)t.enableVertexAttribArray(e+n),t.vertexAttribPointer(e+n,i,s,c,u,f+l*n),t.vertexAttribDivisor&&t.vertexAttribDivisor(e+n,r.divisor||0)}}Go[5126]={Type:Float32Array,size:4,setter:function(t,e){return function(r){t.uniform1f(e,r)}},arraySetter:function(t,e){return function(r){t.uniform1fv(e,r)}}},Go[35664]={Type:Float32Array,size:8,setter:function(t,e){return function(r){t.uniform2fv(e,r)}},cols:2},Go[35665]={Type:Float32Array,size:12,setter:function(t,e){return function(r){t.uniform3fv(e,r)}},cols:3},Go[35666]={Type:Float32Array,size:16,setter:function(t,e){return function(r){t.uniform4fv(e,r)}},cols:4},Go[Uo]={Type:Int32Array,size:4,setter:Yo,arraySetter:Ho},Go[35667]={Type:Int32Array,size:8,setter:Qo,cols:2},Go[35668]={Type:Int32Array,size:12,setter:Zo,cols:3},Go[35669]={Type:Int32Array,size:16,setter:Ko,cols:4},Go[5125]={Type:Uint32Array,size:4,setter:function(t,e){return function(r){t.uniform1ui(e,r)}},arraySetter:function(t,e){return function(r){t.uniform1uiv(e,r)}}},Go[36294]={Type:Uint32Array,size:8,setter:function(t,e){return function(r){t.uniform2uiv(e,r)}},cols:2},Go[36295]={Type:Uint32Array,size:12,setter:function(t,e){return function(r){t.uniform3uiv(e,r)}},cols:3},Go[36296]={Type:Uint32Array,size:16,setter:function(t,e){return function(r){t.uniform4uiv(e,r)}},cols:4},Go[35670]={Type:Uint32Array,size:4,setter:Yo,arraySetter:Ho},Go[35671]={Type:Uint32Array,size:8,setter:Qo,cols:2},Go[35672]={Type:Uint32Array,size:12,setter:Zo,cols:3},Go[35673]={Type:Uint32Array,size:16,setter:Ko,cols:4},Go[35674]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix2fv(e,!1,r)}},rows:2,cols:2},Go[35675]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix3fv(e,!1,r)}},rows:3,cols:3},Go[35676]={Type:Float32Array,size:64,setter:function(t,e){return function(r){t.uniformMatrix4fv(e,!1,r)}},rows:4,cols:4},Go[35685]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix2x3fv(e,!1,r)}},rows:2,cols:3},Go[35686]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix2x4fv(e,!1,r)}},rows:2,cols:4},Go[35687]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix3x2fv(e,!1,r)}},rows:3,cols:2},Go[35688]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix3x4fv(e,!1,r)}},rows:3,cols:4},Go[35689]={Type:Float32Array,size:64,setter:function(t,e){return function(r){t.uniformMatrix4x2fv(e,!1,r)}},rows:4,cols:2},Go[35690]={Type:Float32Array,size:64,setter:function(t,e){return function(r){t.uniformMatrix4x3fv(e,!1,r)}},rows:4,cols:3},Go[35678]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:qo},Go[35680]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Wo},Go[35679]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:$o},Go[35682]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:qo},Go[36289]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:No},Go[36292]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:No},Go[36293]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Wo},Go[36298]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:qo},Go[36299]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:$o},Go[36300]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Wo},Go[36303]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:No},Go[36306]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:qo},Go[36307]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:$o},Go[36308]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:Wo},Go[36311]={Type:null,size:0,setter:Jo,arraySetter:ta,bindPoint:No};const aa={};aa[5126]={size:4,setter:ea},aa[35664]={size:8,setter:ea},aa[35665]={size:12,setter:ea},aa[35666]={size:16,setter:ea},aa[Uo]={size:4,setter:ra},aa[35667]={size:8,setter:ra},aa[35668]={size:12,setter:ra},aa[35669]={size:16,setter:ra},aa[5125]={size:4,setter:na},aa[36294]={size:8,setter:na},aa[36295]={size:12,setter:na},aa[36296]={size:16,setter:na},aa[35670]={size:4,setter:ra},aa[35671]={size:8,setter:ra},aa[35672]={size:12,setter:ra},aa[35673]={size:16,setter:ra},aa[35674]={size:4,setter:oa,count:2},aa[35675]={size:9,setter:oa,count:3},aa[35676]={size:16,setter:oa,count:4};const ia=/ERROR:\s*\d+:(\d+)/gi,sa=/^[ \t]*\n/;function ua(t){let e=0;return sa.test(t)&&(e=1,t=t.replace(sa,"")),{lineOffset:e,shaderSource:t}}function ca(t,e){return t.errorCallback(e),t.callback&&setTimeout((()=>{t.callback(`${e}\n${t.errors.join("\n")}`)})),null}function fa(t,e,r){let n,o,a;if("function"==typeof e&&(r=e,e=void 0),"function"==typeof t)r=t,t=void 0;else if(t&&!Array.isArray(t)){const e=t;r=e.errorCallback,t=e.attribLocations,n=e.transformFeedbackVaryings,o=e.transformFeedbackMode,a=e.callback}const i=r||yo,s=[],u={errorCallback(t,...e){s.push(t),i(t,...e)},transformFeedbackVaryings:n,transformFeedbackMode:o,callback:a,errors:s};{let r={};Array.isArray(t)?t.forEach((function(t,n){r[t]=e?e[n]:n})):r=t||{},u.attribLocations=r}return u}const la=["VERTEX_SHADER","FRAGMENT_SHADER"],ha=(t=0)=>new Promise((e=>setTimeout(e,t)));function ma(t,e,r){const n=t.createProgram(),{attribLocations:o,transformFeedbackVaryings:a,transformFeedbackMode:i}=fa(r);for(let r=0;r<e.length;++r){let o=e[r];if("string"==typeof o){const e=xo(o),a=e?e.text:o;let i=t[la[r]];e&&e.type&&(i=((s=e.type).indexOf("frag")>=0?So:s.indexOf("vert")>=0?Io:void 0)||i),o=t.createShader(i),t.shaderSource(o,ua(a).shaderSource),t.compileShader(o),t.attachShader(n,o)}}var s;Object.entries(o).forEach((([e,r])=>t.bindAttribLocation(n,r,e)));{let e=a;e&&(e.attribs&&(e=e.attribs),Array.isArray(e)||(e=Object.keys(e)),t.transformFeedbackVaryings(n,e,i||Bo))}return t.linkProgram(n),n}function da(t,e,r,n,o){const a=fa(r,n,o),i=new Set(e),s=ma(t,e,a);function u(t,e){const r=ga(t,e,a.errorCallback);return r&&function(t,e,r){const n=t.getAttachedShaders(e);for(const e of n)r.has(e)&&t.deleteShader(e);t.deleteProgram(e)}(t,e,i),r}if(!a.callback)return u(t,s)?void 0:s;ya(t,s).then((()=>{const e=u(t,s);a.callback(e,e?void 0:s)}))}function ba(t){return function(e,r,...n){return new Promise(((o,a)=>{const i=fa(...n);i.callback=(t,e)=>{t?a(t):o(e)},t(e,r,i)}))}}const pa=ba(da),va=ba(Ga);async function ya(t,e){const r=t.getExtension("KHR_parallel_shader_compile"),n=r?(t,e)=>t.getProgramParameter(e,r.COMPLETION_STATUS_KHR):()=>!0;let o=0;do{await ha(o),o=1e3/60}while(!n(t,e))}function ga(t,e,r){if(r=r||yo,!t.getProgramParameter(e,Oo)){const n=t.getProgramInfoLog(e);return r(`Error in program linking: ${n}`),`${n}\n${t.getAttachedShaders(e).map((e=>function(t,e,r,n){if(n=n||yo,!t.getShaderParameter(r,To)){const o=t.getShaderInfoLog(r),{lineOffset:a,shaderSource:i}=ua(t.getShaderSource(r)),s=`${function(t,e="",r=0){const n=[...e.matchAll(ia)],o=new Map(n.map(((t,r)=>{const o=parseInt(t[1]),a=n[r+1],i=a?a.index:e.length;return[o-1,e.substring(t.index,i)]})));return t.split("\n").map(((t,e)=>{const n=o.get(e);return`${e+1+r}: ${t}${n?`\n\n^^^ ${n}`:""}`})).join("\n")}(i,o,a)}\nError compiling ${xe(t,e)}: ${o}`;return n(s),s}return""}(t,t.getShaderParameter(e,t.SHADER_TYPE),e,r))).filter((t=>t)).join("\n")}`}}function xa(t,e,r,n,o){const a=fa(r,n,o),i=[];for(const t of e){const e=xo(t);if(!e)return ca(a,`unknown script element: ${t}`);i.push(e.text)}return da(t,i,a)}function Ma(t,e,r,n,o){return da(t,e,r,n,o)}function _a(t){const e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const wa=/(\.|\[|]|\w+)/g,Aa=t=>t>="0"&&t<="9";function Fa(t,e,r,n){const o=t.split(wa).filter((t=>""!==t));let a=0,i="";for(;;){const t=o[a++];i+=t;const s=Aa(t[0]),u=s?parseInt(t):t;if(s&&(i+=o[a++]),a===o.length){r[u]=e;break}{const t=o[a++],e="["===t,s=r[u]||(e?[]:{});r[u]=s,r=s,n[i]=n[i]||function(t){return function(e){Da(t,e)}}(s),i+=t}}}function Ea(t,e){let r=0;function n(e,n,o){const a=n.name.endsWith("[0]"),i=n.type,s=Go[i];if(!s)throw new Error(`unknown type: 0x${i.toString(16)}`);let u;if(s.bindPoint){const e=r;r+=n.size,u=a?s.arraySetter(t,i,e,o,n.size):s.setter(t,i,e,o,n.size)}else u=s.arraySetter&&a?s.arraySetter(t,o):s.setter(t,o);return u.location=o,u}const o={},a={},i=t.getProgramParameter(e,jo);for(let r=0;r<i;++r){const i=t.getActiveUniform(e,r);if(_a(i))continue;let s=i.name;s.endsWith("[0]")&&(s=s.substr(0,s.length-3));const u=t.getUniformLocation(e,i.name);if(u){const t=n(0,i,u);o[s]=t,Fa(s,t,a,o)}}return o}function Pa(t,e){const r={},n=t.getProgramParameter(e,Ro);for(let o=0;o<n;++o){const n=t.getTransformFeedbackVarying(e,o);r[n.name]={index:o,type:n.type,size:n.size}}return r}function Ta(t,e,r){e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),r.attribs&&(r=r.attribs);for(const n in r){const o=e[n];if(o){const e=r[n];e.offset?t.bindBufferRange(Eo,o.index,e.buffer,e.offset,e.size):t.bindBufferBase(Eo,o.index,e.buffer)}}}function Oa(t,e,r){const n=t.createTransformFeedback();return t.bindTransformFeedback(Po,n),t.useProgram(e.program),Ta(t,e,r),t.bindTransformFeedback(Po,null),n}function Sa(t,e){const r=t.getProgramParameter(e,jo),n=[],o=[];for(let a=0;a<r;++a){o.push(a),n.push({});const r=t.getActiveUniform(e,a);n[a].name=r.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(r){const a=r[0],i=r[1];t.getActiveUniforms(e,o,t[a]).forEach((function(t,e){n[e][i]=t}))}));const a={},i=t.getProgramParameter(e,zo);for(let r=0;r<i;++r){const n=t.getActiveUniformBlockName(e,r),o={index:t.getUniformBlockIndex(e,n),usedByVertexShader:t.getActiveUniformBlockParameter(e,r,ko),usedByFragmentShader:t.getActiveUniformBlockParameter(e,r,Do),size:t.getActiveUniformBlockParameter(e,r,Vo),uniformIndices:t.getActiveUniformBlockParameter(e,r,Lo)};o.used=o.usedByVertexShader||o.usedByFragmentShader,a[n]=o}return{blockSpecs:a,uniformData:n}}const Ia=/\[\d+\]\.$/,Ba=(t,e)=>((t+(e-1))/e|0)*e;function ja(t,e,r,n){const o=r.blockSpecs,a=r.uniformData,i=o[n];if(!i)return go("no uniform block object named:",n),{name:n,uniforms:{}};const s=new ArrayBuffer(i.size),u=t.createBuffer(),c=i.index;t.bindBuffer(Fo,u),t.uniformBlockBinding(e,i.index,c);let f=n+".";Ia.test(f)&&(f=f.replace(Ia,"."));const l={},h={},m={};return i.uniformIndices.forEach((function(t){const e=a[t];let r=e.name;r.startsWith(f)&&(r=r.substr(f.length));const n=r.endsWith("[0]");n&&(r=r.substr(0,r.length-3));const o=Go[e.type],i=o.Type,u=n?Ba(o.size,16)*e.size:o.size*e.size,c=new i(s,e.offset,u/i.BYTES_PER_ELEMENT);l[r]=c;const d=function(t,e,r,n){if(e||r){n=n||1;const e=t.length/4;return function(r){let o=0,a=0;for(let i=0;i<e;++i){for(let e=0;e<n;++e)t[o++]=r[a++];o+=4-n}}}return function(e){e.length?t.set(e):t[0]=e}}(c,n,o.rows,o.cols);h[r]=d,Fa(r,d,m,h)})),{name:n,array:s,asFloat:new Float32Array(s),buffer:u,uniforms:l,setters:h}}function Ca(t,e,r){return ja(t,e.program,e.uniformBlockSpec,r)}function Ra(t,e,r){const n=(e.uniformBlockSpec||e).blockSpecs[r.name];if(n){const e=n.index;return t.bindBufferRange(Fo,e,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function za(t,e,r){Ra(t,e,r)&&t.bufferData(Fo,r.array,_o)}function ka(t,e){const r=t.setters;for(const t in e){const n=r[t];n&&n(e[t])}}function Da(t,e){for(const r in e){const n=t[r];"function"==typeof n?n(e[r]):Da(t[r],e[r])}}function Va(t,...e){const r=t.uniformSetters||t,n=e.length;for(let t=0;t<n;++t){const n=e[t];if(Array.isArray(n)){const t=n.length;for(let e=0;e<t;++e)Va(r,n[e])}else for(const t in n){const e=r[t];e&&e(n[t])}}}const La=Va;function Ua(t,e){const r={},n=t.getProgramParameter(e,Co);for(let o=0;o<n;++o){const n=t.getActiveAttrib(e,o);if(_a(n))continue;const a=t.getAttribLocation(e,n.name),i=aa[n.type],s=i.setter(t,a,i);s.location=a,r[n.name]=s}return r}function qa(t,e){for(const r in e){const n=t[r];n&&n(e[r])}}function Wa(t,e,r){r.vertexArrayObject?t.bindVertexArray(r.vertexArrayObject):(qa(e.attribSetters||e,r.attribs),r.indices&&t.bindBuffer(Ao,r.indices))}function $a(t,e){const r={program:e,uniformSetters:Ea(t,e),attribSetters:Ua(t,e)};return ye(t)&&(r.uniformBlockSpec=Sa(t,e),r.transformFeedbackInfo=Pa(t,e)),r}const Na=/\s|{|}|;/;function Ga(t,e,r,n,o){const a=fa(r,n,o),i=[];if(e=e.map((function(t){if(!Na.test(t)){const e=xo(t);if(e)t=e.text;else{const e=`no element with id: ${t}`;a.errorCallback(e),i.push(e)}}return t})),i.length)return ca(a,"");const s=a.callback;s&&(a.callback=(e,r)=>{s(e,e?void 0:$a(t,r))});const u=Ma(t,e,a);return u?$a(t,u):null}function Xa(t,e,r,n,o){for(const[a,i]of Object.entries(e)){const s={...o},u=r[a];Array.isArray(u)||Object.assign(s,u);const c=ga(t,i,s.errorCallback);if(c){for(const r of Object.values(e)){const e=t.getAttachedShaders(r);t.deleteProgram(r);for(const r of e)n.has(r)||t.deleteShader(r)}return c}}}function Ya(t,e,r={}){const n=new Set,o=Object.fromEntries(Object.entries(e).map((([e,o])=>{const a={...r},i=Array.isArray(o)?o:o.shaders;return Array.isArray(o)||Object.assign(a,o),i.forEach(n.add,n),[e,ma(t,i,a)]})));if(!r.callback)return Xa(t,o,e,n,r)?void 0:o;(async function(t,e){for(const r of Object.values(e))await ya(t,r)})(t,o).then((()=>{const a=Xa(t,o,e,n,r);r.callback(a,a?void 0:o)}))}function Ha(t,e,r){function n(t,e){return Object.fromEntries(Object.entries(e).map((([e,r])=>[e,$a(t,r)])))}const o=(r=fa(r)).callback;o&&(r.callback=(e,r)=>{o(e,e?void 0:n(t,r))});const a=Ya(t,e,r);if(!o&&a)return n(t,a)}const Qa=ba(Ya),Za=ba(Ha);var Ka=Object.freeze({__proto__:null,createAttributeSetters:Ua,createProgram:da,createProgramAsync:pa,createPrograms:Ya,createProgramsAsync:Qa,createProgramFromScripts:xa,createProgramFromSources:Ma,createProgramInfo:Ga,createProgramInfoAsync:va,createProgramInfos:Ha,createProgramInfosAsync:Za,createProgramInfoFromProgram:$a,createUniformSetters:Ea,createUniformBlockSpecFromProgram:Sa,createUniformBlockInfoFromProgram:ja,createUniformBlockInfo:Ca,createTransformFeedback:Oa,createTransformFeedbackInfo:Pa,bindTransformFeedbackInfo:Ta,setAttributes:qa,setBuffersAndAttributes:Wa,setUniforms:Va,setUniformsAndBindTextures:La,setUniformBlock:za,setBlockUniforms:ka,bindUniformBlock:Ra});const Ja=4,ti=5123;function ei(t,e,r,n,o,a){r=void 0===r?Ja:r;const i=e.indices,s=e.elementType,u=void 0===n?e.numElements:n;o=void 0===o?0:o,s||i?void 0!==a?t.drawElementsInstanced(r,u,void 0===s?ti:e.elementType,o,a):t.drawElements(r,u,void 0===s?ti:e.elementType,o):void 0!==a?t.drawArraysInstanced(r,o,u,a):t.drawArrays(r,o,u)}function ri(t,e){let r=null,n=null;e.forEach((function(e){if(!1===e.active)return;const o=e.programInfo,a=e.vertexArrayInfo||e.bufferInfo;let i=!1;const s=void 0===e.type?Ja:e.type;o!==r&&(r=o,t.useProgram(o.program),i=!0),(i||a!==n)&&(n&&n.vertexArrayObject&&!a.vertexArrayObject&&t.bindVertexArray(null),n=a,Wa(t,o,a)),Va(o,e.uniforms),ei(t,a,s,e.count,e.offset,e.instanceCount)})),n&&n.vertexArrayObject&&t.bindVertexArray(null)}var ni=Object.freeze({__proto__:null,drawBufferInfo:ei,drawObjectList:ri});const oi=36160,ai=36161,ii=3553,si=36064,ui=36096,ci=33306,fi=33071,li=9729,hi=[{format:6408,type:5121,min:li,wrap:fi},{format:34041}],mi={};mi[34041]=ci,mi[6401]=36128,mi[36168]=36128,mi[6402]=ui,mi[33189]=ui,mi[33190]=ui,mi[36012]=ui,mi[35056]=ci,mi[36013]=ci;const di={32854:!0,32855:!0,36194:!0,34041:!0,33189:!0,6401:!0,36168:!0},bi=32;function pi(t,e,r,n){const o=oi,a=t.createFramebuffer();t.bindFramebuffer(o,a),r=r||t.drawingBufferWidth,n=n||t.drawingBufferHeight;const i=[],s={framebuffer:a,attachments:[],width:r,height:n};return(e=e||hi).forEach((function(e,a){let u=e.attachment;const c=e.samples,f=e.format;let l=e.attachmentPoint||function(t,e){return mi[t]||mi[e]}(f,e.internalFormat);if(l||(l=si+a),function(t){return t>=si&&t<si+bi}(l)&&i.push(l),!u)if(void 0!==c||function(t){return di[t]}(f))u=t.createRenderbuffer(),t.bindRenderbuffer(ai,u),c>1?t.renderbufferStorageMultisample(ai,c,f,r,n):t.renderbufferStorage(ai,f,r,n);else{const o=Object.assign({},e);o.width=r,o.height=n,void 0===o.auto&&(o.auto=!1,o.min=o.min||o.minMag||li,o.mag=o.mag||o.minMag||li,o.wrapS=o.wrapS||o.wrap||fi,o.wrapT=o.wrapT||o.wrap||fi),u=mo(t,o)}if(V(0,u))t.framebufferRenderbuffer(o,l,ai,u);else{if(!L(0,u))throw new Error("unknown attachment type");void 0!==e.layer?t.framebufferTextureLayer(o,l,u,e.level||0,e.layer):t.framebufferTexture2D(o,l,e.target||ii,u,e.level||0)}s.attachments.push(u)})),t.drawBuffers&&t.drawBuffers(i),s}function vi(t,e,r,n,o){n=n||t.drawingBufferWidth,o=o||t.drawingBufferHeight,e.width=n,e.height=o,(r=r||hi).forEach((function(r,a){const i=e.attachments[a],s=r.format,u=r.samples;if(void 0!==u||V(0,i))t.bindRenderbuffer(ai,i),u>1?t.renderbufferStorageMultisample(ai,u,s,n,o):t.renderbufferStorage(ai,s,n,o);else{if(!L(0,i))throw new Error("unknown attachment type");bo(t,i,r,n,o)}}))}function yi(t,e,r){r=r||oi,e?(t.bindFramebuffer(r,e.framebuffer),t.viewport(0,0,e.width,e.height)):(t.bindFramebuffer(r,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight))}var gi=Object.freeze({__proto__:null,bindFramebufferInfo:yi,createFramebufferInfo:pi,resizeFramebufferInfo:vi});const xi=34963;function Mi(t,e,r){const n=t.createVertexArray();return t.bindVertexArray(n),e.length||(e=[e]),e.forEach((function(e){Wa(t,e,r)})),t.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:n}}function _i(t,e,r,n){const o=t.createVertexArray();return t.bindVertexArray(o),qa(e,r),n&&t.bindBuffer(xi,n),t.bindVertexArray(null),o}function wi(t,e,r){return _i(t,e.attribSetters||e,r.attribs,r.indices)}var Ai=Object.freeze({__proto__:null,createVertexArrayInfo:Mi,createVAOAndSetAttributes:_i,createVAOFromBufferInfo:wi});const Fi={addExtensionsToContext:!0};function Ei(t){C(t,Fi),tt(t),Xn(t)}const Pi=/^(.*?)_/;function Ti(t,e){xe(t,0);const r=t.getExtension(e);if(r){const n={},o=Pi.exec(e)[1],a="_"+o;for(const e in r){const i=r[e],s="function"==typeof i,u=s?o:a;let c=e;e.endsWith(u)&&(c=e.substring(0,e.length-u.length)),void 0!==t[c]?s||t[c]===i||z(c,t[c],i,e):s?t[c]=function(t){return function(){return t.apply(r,arguments)}}(i):(t[c]=i,n[c]=i)}n.constructor={name:r.constructor.name},xe(n,0)}return r}const Oi=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function Si(t){for(let e=0;e<Oi.length;++e)Ti(t,Oi[e])}function Ii(t,e){const r=function(t,e){const r=["webgl","experimental-webgl"];let n=null;for(let o=0;o<r.length;++o)if(n=t.getContext(r[o],e),n){Fi.addExtensionsToContext&&Si(n);break}return n}(t,e);return r}function Bi(t,e){const r=function(t,e){const r=["webgl2","webgl","experimental-webgl"];let n=null;for(let o=0;o<r.length;++o)if(n=t.getContext(r[o],e),n){Fi.addExtensionsToContext&&Si(n);break}return n}(t,e);return r}function ji(t,e){e=e||1,e=Math.max(0,e);const r=t.clientWidth*e|0,n=t.clientHeight*e|0;return(t.width!==r||t.height!==n)&&(t.width=r,t.height=n,!0)}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&!t;)t=n[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r(289)})();